{"ast":null,"code":"!function (root, factory) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(\"zoid\", [], factory) : \"object\" == typeof exports ? exports.zoid = factory() : root.zoid = factory();\n}(\"undefined\" != typeof self ? self : this, function () {\n  return function (modules) {\n    var installedModules = {};\n\n    function __webpack_require__(moduleId) {\n      if (installedModules[moduleId]) return installedModules[moduleId].exports;\n      var module = installedModules[moduleId] = {\n        i: moduleId,\n        l: !1,\n        exports: {}\n      };\n      modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n      module.l = !0;\n      return module.exports;\n    }\n\n    __webpack_require__.m = modules;\n    __webpack_require__.c = installedModules;\n\n    __webpack_require__.d = function (exports, name, getter) {\n      __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n        enumerable: !0,\n        get: getter\n      });\n    };\n\n    __webpack_require__.r = function (exports) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {\n        value: \"Module\"\n      });\n      Object.defineProperty(exports, \"__esModule\", {\n        value: !0\n      });\n    };\n\n    __webpack_require__.t = function (value, mode) {\n      1 & mode && (value = __webpack_require__(value));\n      if (8 & mode) return value;\n      if (4 & mode && \"object\" == typeof value && value && value.__esModule) return value;\n      var ns = Object.create(null);\n\n      __webpack_require__.r(ns);\n\n      Object.defineProperty(ns, \"default\", {\n        enumerable: !0,\n        value: value\n      });\n      if (2 & mode && \"string\" != typeof value) for (var key in value) __webpack_require__.d(ns, key, function (key) {\n        return value[key];\n      }.bind(null, key));\n      return ns;\n    };\n\n    __webpack_require__.n = function (module) {\n      var getter = module && module.__esModule ? function () {\n        return module.default;\n      } : function () {\n        return module;\n      };\n\n      __webpack_require__.d(getter, \"a\", getter);\n\n      return getter;\n    };\n\n    __webpack_require__.o = function (object, property) {\n      return {}.hasOwnProperty.call(object, property);\n    };\n\n    __webpack_require__.p = \"\";\n    return __webpack_require__(__webpack_require__.s = 0);\n  }([function (module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n\n    __webpack_require__.d(__webpack_exports__, \"PopupOpenError\", function () {\n      return PopupOpenError;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"create\", function () {\n      return create;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"destroy\", function () {\n      return component_destroy;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"destroyComponents\", function () {\n      return destroyComponents;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"destroyAll\", function () {\n      return destroyAll;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"PROP_TYPE\", function () {\n      return PROP_TYPE;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"PROP_SERIALIZATION\", function () {\n      return PROP_SERIALIZATION;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"CONTEXT\", function () {\n      return CONTEXT;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"EVENT\", function () {\n      return EVENT;\n    });\n\n    function _extends() {\n      return (_extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) ({}).hasOwnProperty.call(source, key) && (target[key] = source[key]);\n        }\n\n        return target;\n      }).apply(this, arguments);\n    }\n\n    function utils_isPromise(item) {\n      try {\n        if (!item) return !1;\n        if (\"undefined\" != typeof Promise && item instanceof Promise) return !0;\n        if (\"undefined\" != typeof window && \"function\" == typeof window.Window && item instanceof window.Window) return !1;\n        if (\"undefined\" != typeof window && \"function\" == typeof window.constructor && item instanceof window.constructor) return !1;\n        var _toString = {}.toString;\n\n        if (_toString) {\n          var name = _toString.call(item);\n\n          if (\"[object Window]\" === name || \"[object global]\" === name || \"[object DOMWindow]\" === name) return !1;\n        }\n\n        if (\"function\" == typeof item.then) return !0;\n      } catch (err) {\n        return !1;\n      }\n\n      return !1;\n    }\n\n    var dispatchedErrors = [];\n    var possiblyUnhandledPromiseHandlers = [];\n    var activeCount = 0;\n    var flushPromise;\n\n    function flushActive() {\n      if (!activeCount && flushPromise) {\n        var promise = flushPromise;\n        flushPromise = null;\n        promise.resolve();\n      }\n    }\n\n    function startActive() {\n      activeCount += 1;\n    }\n\n    function endActive() {\n      activeCount -= 1;\n      flushActive();\n    }\n\n    var promise_ZalgoPromise = function () {\n      function ZalgoPromise(handler) {\n        var _this = this;\n\n        this.resolved = void 0;\n        this.rejected = void 0;\n        this.errorHandled = void 0;\n        this.value = void 0;\n        this.error = void 0;\n        this.handlers = void 0;\n        this.dispatching = void 0;\n        this.stack = void 0;\n        this.resolved = !1;\n        this.rejected = !1;\n        this.errorHandled = !1;\n        this.handlers = [];\n\n        if (handler) {\n          var _result;\n\n          var _error;\n\n          var resolved = !1;\n          var rejected = !1;\n          var isAsync = !1;\n          startActive();\n\n          try {\n            handler(function (res) {\n              if (isAsync) _this.resolve(res);else {\n                resolved = !0;\n                _result = res;\n              }\n            }, function (err) {\n              if (isAsync) _this.reject(err);else {\n                rejected = !0;\n                _error = err;\n              }\n            });\n          } catch (err) {\n            endActive();\n            this.reject(err);\n            return;\n          }\n\n          endActive();\n          isAsync = !0;\n          resolved ? this.resolve(_result) : rejected && this.reject(_error);\n        }\n      }\n\n      var _proto = ZalgoPromise.prototype;\n\n      _proto.resolve = function (result) {\n        if (this.resolved || this.rejected) return this;\n        if (utils_isPromise(result)) throw new Error(\"Can not resolve promise with another promise\");\n        this.resolved = !0;\n        this.value = result;\n        this.dispatch();\n        return this;\n      };\n\n      _proto.reject = function (error) {\n        var _this2 = this;\n\n        if (this.resolved || this.rejected) return this;\n        if (utils_isPromise(error)) throw new Error(\"Can not reject promise with another promise\");\n\n        if (!error) {\n          var _err = error && \"function\" == typeof error.toString ? error.toString() : {}.toString.call(error);\n\n          error = new Error(\"Expected reject to be called with Error, got \" + _err);\n        }\n\n        this.rejected = !0;\n        this.error = error;\n        this.errorHandled || setTimeout(function () {\n          _this2.errorHandled || function (err, promise) {\n            if (-1 === dispatchedErrors.indexOf(err)) {\n              dispatchedErrors.push(err);\n              setTimeout(function () {\n                throw err;\n              }, 1);\n\n              for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) possiblyUnhandledPromiseHandlers[j](err, promise);\n            }\n          }(error, _this2);\n        }, 1);\n        this.dispatch();\n        return this;\n      };\n\n      _proto.asyncReject = function (error) {\n        this.errorHandled = !0;\n        this.reject(error);\n        return this;\n      };\n\n      _proto.dispatch = function () {\n        var resolved = this.resolved,\n            rejected = this.rejected,\n            handlers = this.handlers;\n\n        if (!this.dispatching && (resolved || rejected)) {\n          this.dispatching = !0;\n          startActive();\n\n          var chain = function (firstPromise, secondPromise) {\n            return firstPromise.then(function (res) {\n              secondPromise.resolve(res);\n            }, function (err) {\n              secondPromise.reject(err);\n            });\n          };\n\n          for (var i = 0; i < handlers.length; i++) {\n            var _handlers$i = handlers[i],\n                onSuccess = _handlers$i.onSuccess,\n                onError = _handlers$i.onError,\n                promise = _handlers$i.promise;\n\n            var _result2 = void 0;\n\n            if (resolved) try {\n              _result2 = onSuccess ? onSuccess(this.value) : this.value;\n            } catch (err) {\n              promise.reject(err);\n              continue;\n            } else if (rejected) {\n              if (!onError) {\n                promise.reject(this.error);\n                continue;\n              }\n\n              try {\n                _result2 = onError(this.error);\n              } catch (err) {\n                promise.reject(err);\n                continue;\n              }\n            }\n\n            if (_result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected)) {\n              _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error);\n              _result2.errorHandled = !0;\n            } else utils_isPromise(_result2) ? _result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected) ? _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error) : chain(_result2, promise) : promise.resolve(_result2);\n          }\n\n          handlers.length = 0;\n          this.dispatching = !1;\n          endActive();\n        }\n      };\n\n      _proto.then = function (onSuccess, onError) {\n        if (onSuccess && \"function\" != typeof onSuccess && !onSuccess.call) throw new Error(\"Promise.then expected a function for success handler\");\n        if (onError && \"function\" != typeof onError && !onError.call) throw new Error(\"Promise.then expected a function for error handler\");\n        var promise = new ZalgoPromise();\n        this.handlers.push({\n          promise: promise,\n          onSuccess: onSuccess,\n          onError: onError\n        });\n        this.errorHandled = !0;\n        this.dispatch();\n        return promise;\n      };\n\n      _proto.catch = function (onError) {\n        return this.then(void 0, onError);\n      };\n\n      _proto.finally = function (onFinally) {\n        if (onFinally && \"function\" != typeof onFinally && !onFinally.call) throw new Error(\"Promise.finally expected a function\");\n        return this.then(function (result) {\n          return ZalgoPromise.try(onFinally).then(function () {\n            return result;\n          });\n        }, function (err) {\n          return ZalgoPromise.try(onFinally).then(function () {\n            throw err;\n          });\n        });\n      };\n\n      _proto.timeout = function (time, err) {\n        var _this3 = this;\n\n        if (this.resolved || this.rejected) return this;\n        var timeout = setTimeout(function () {\n          _this3.resolved || _this3.rejected || _this3.reject(err || new Error(\"Promise timed out after \" + time + \"ms\"));\n        }, time);\n        return this.then(function (result) {\n          clearTimeout(timeout);\n          return result;\n        });\n      };\n\n      _proto.toPromise = function () {\n        if (\"undefined\" == typeof Promise) throw new TypeError(\"Could not find Promise\");\n        return Promise.resolve(this);\n      };\n\n      ZalgoPromise.resolve = function (value) {\n        return value instanceof ZalgoPromise ? value : utils_isPromise(value) ? new ZalgoPromise(function (resolve, reject) {\n          return value.then(resolve, reject);\n        }) : new ZalgoPromise().resolve(value);\n      };\n\n      ZalgoPromise.reject = function (error) {\n        return new ZalgoPromise().reject(error);\n      };\n\n      ZalgoPromise.asyncReject = function (error) {\n        return new ZalgoPromise().asyncReject(error);\n      };\n\n      ZalgoPromise.all = function (promises) {\n        var promise = new ZalgoPromise();\n        var count = promises.length;\n        var results = [];\n\n        if (!count) {\n          promise.resolve(results);\n          return promise;\n        }\n\n        var chain = function (i, firstPromise, secondPromise) {\n          return firstPromise.then(function (res) {\n            results[i] = res;\n            0 == (count -= 1) && promise.resolve(results);\n          }, function (err) {\n            secondPromise.reject(err);\n          });\n        };\n\n        for (var i = 0; i < promises.length; i++) {\n          var prom = promises[i];\n\n          if (prom instanceof ZalgoPromise) {\n            if (prom.resolved) {\n              results[i] = prom.value;\n              count -= 1;\n              continue;\n            }\n          } else if (!utils_isPromise(prom)) {\n            results[i] = prom;\n            count -= 1;\n            continue;\n          }\n\n          chain(i, ZalgoPromise.resolve(prom), promise);\n        }\n\n        0 === count && promise.resolve(results);\n        return promise;\n      };\n\n      ZalgoPromise.hash = function (promises) {\n        var result = {};\n        var awaitPromises = [];\n\n        var _loop = function (key) {\n          if (promises.hasOwnProperty(key)) {\n            var value = promises[key];\n            utils_isPromise(value) ? awaitPromises.push(value.then(function (res) {\n              result[key] = res;\n            })) : result[key] = value;\n          }\n        };\n\n        for (var key in promises) _loop(key);\n\n        return ZalgoPromise.all(awaitPromises).then(function () {\n          return result;\n        });\n      };\n\n      ZalgoPromise.map = function (items, method) {\n        return ZalgoPromise.all(items.map(method));\n      };\n\n      ZalgoPromise.onPossiblyUnhandledException = function (handler) {\n        return function (handler) {\n          possiblyUnhandledPromiseHandlers.push(handler);\n          return {\n            cancel: function () {\n              possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n            }\n          };\n        }(handler);\n      };\n\n      ZalgoPromise.try = function (method, context, args) {\n        if (method && \"function\" != typeof method && !method.call) throw new Error(\"Promise.try expected a function\");\n        var result;\n        startActive();\n\n        try {\n          result = method.apply(context, args || []);\n        } catch (err) {\n          endActive();\n          return ZalgoPromise.reject(err);\n        }\n\n        endActive();\n        return ZalgoPromise.resolve(result);\n      };\n\n      ZalgoPromise.delay = function (_delay) {\n        return new ZalgoPromise(function (resolve) {\n          setTimeout(resolve, _delay);\n        });\n      };\n\n      ZalgoPromise.isPromise = function (value) {\n        return !!(value && value instanceof ZalgoPromise) || utils_isPromise(value);\n      };\n\n      ZalgoPromise.flush = function () {\n        return function (Zalgo) {\n          var promise = flushPromise = flushPromise || new Zalgo();\n          flushActive();\n          return promise;\n        }(ZalgoPromise);\n      };\n\n      return ZalgoPromise;\n    }();\n\n    function isRegex(item) {\n      return \"[object RegExp]\" === {}.toString.call(item);\n    }\n\n    var WINDOW_TYPE = {\n      IFRAME: \"iframe\",\n      POPUP: \"popup\"\n    };\n    var IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n\n    function isAboutProtocol(win) {\n      void 0 === win && (win = window);\n      return \"about:\" === win.location.protocol;\n    }\n\n    function utils_getParent(win) {\n      void 0 === win && (win = window);\n      if (win) try {\n        if (win.parent && win.parent !== win) return win.parent;\n      } catch (err) {}\n    }\n\n    function getOpener(win) {\n      void 0 === win && (win = window);\n      if (win && !utils_getParent(win)) try {\n        return win.opener;\n      } catch (err) {}\n    }\n\n    function canReadFromWindow(win) {\n      try {\n        return !0;\n      } catch (err) {}\n\n      return !1;\n    }\n\n    function getActualDomain(win) {\n      void 0 === win && (win = window);\n      var location = win.location;\n      if (!location) throw new Error(\"Can not read window location\");\n      var protocol = location.protocol;\n      if (!protocol) throw new Error(\"Can not read window protocol\");\n      if (\"file:\" === protocol) return \"file://\";\n\n      if (\"about:\" === protocol) {\n        var parent = utils_getParent(win);\n        return parent && canReadFromWindow() ? getActualDomain(parent) : \"about://\";\n      }\n\n      var host = location.host;\n      if (!host) throw new Error(\"Can not read window host\");\n      return protocol + \"//\" + host;\n    }\n\n    function getDomain(win) {\n      void 0 === win && (win = window);\n      var domain = getActualDomain(win);\n      return domain && win.mockDomain && 0 === win.mockDomain.indexOf(\"mock:\") ? win.mockDomain : domain;\n    }\n\n    function isSameDomain(win) {\n      if (!function (win) {\n        try {\n          if (win === window) return !0;\n        } catch (err) {}\n\n        try {\n          var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n          if (desc && !1 === desc.enumerable) return !1;\n        } catch (err) {}\n\n        try {\n          if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n        } catch (err) {}\n\n        try {\n          if (getActualDomain(win) === getActualDomain(window)) return !0;\n        } catch (err) {}\n\n        return !1;\n      }(win)) return !1;\n\n      try {\n        if (win === window) return !0;\n        if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n        if (getDomain(window) === getDomain(win)) return !0;\n      } catch (err) {}\n\n      return !1;\n    }\n\n    function assertSameDomain(win) {\n      if (!isSameDomain(win)) throw new Error(\"Expected window to be same domain\");\n      return win;\n    }\n\n    function isAncestorParent(parent, child) {\n      if (!parent || !child) return !1;\n      var childParent = utils_getParent(child);\n      return childParent ? childParent === parent : -1 !== function (win) {\n        var result = [];\n\n        try {\n          for (; win.parent !== win;) {\n            result.push(win.parent);\n            win = win.parent;\n          }\n        } catch (err) {}\n\n        return result;\n      }(child).indexOf(parent);\n    }\n\n    function getFrames(win) {\n      var result = [];\n      var frames;\n\n      try {\n        frames = win.frames;\n      } catch (err) {\n        frames = win;\n      }\n\n      var len;\n\n      try {\n        len = frames.length;\n      } catch (err) {}\n\n      if (0 === len) return result;\n\n      if (len) {\n        for (var i = 0; i < len; i++) {\n          var frame = void 0;\n\n          try {\n            frame = frames[i];\n          } catch (err) {\n            continue;\n          }\n\n          result.push(frame);\n        }\n\n        return result;\n      }\n\n      for (var _i = 0; _i < 100; _i++) {\n        var _frame = void 0;\n\n        try {\n          _frame = frames[_i];\n        } catch (err) {\n          return result;\n        }\n\n        if (!_frame) return result;\n        result.push(_frame);\n      }\n\n      return result;\n    }\n\n    function getAllChildFrames(win) {\n      var result = [];\n\n      for (var _i3 = 0, _getFrames2 = getFrames(win); _i3 < _getFrames2.length; _i3++) {\n        var frame = _getFrames2[_i3];\n        result.push(frame);\n\n        for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame); _i5 < _getAllChildFrames2.length; _i5++) result.push(_getAllChildFrames2[_i5]);\n      }\n\n      return result;\n    }\n\n    function getTop(win) {\n      void 0 === win && (win = window);\n\n      try {\n        if (win.top) return win.top;\n      } catch (err) {}\n\n      if (utils_getParent(win) === win) return win;\n\n      try {\n        if (isAncestorParent(window, win) && window.top) return window.top;\n      } catch (err) {}\n\n      try {\n        if (isAncestorParent(win, window) && window.top) return window.top;\n      } catch (err) {}\n\n      for (var _i7 = 0, _getAllChildFrames4 = getAllChildFrames(win); _i7 < _getAllChildFrames4.length; _i7++) {\n        var frame = _getAllChildFrames4[_i7];\n\n        try {\n          if (frame.top) return frame.top;\n        } catch (err) {}\n\n        if (utils_getParent(frame) === frame) return frame;\n      }\n    }\n\n    function getAllFramesInWindow(win) {\n      var top = getTop(win);\n      if (!top) throw new Error(\"Can not determine top window\");\n      var result = [].concat(getAllChildFrames(top), [top]);\n      -1 === result.indexOf(win) && (result = [].concat(result, [win], getAllChildFrames(win)));\n      return result;\n    }\n\n    var iframeWindows = [];\n    var iframeFrames = [];\n\n    function isWindowClosed(win, allowMock) {\n      void 0 === allowMock && (allowMock = !0);\n\n      try {\n        if (win === window) return !1;\n      } catch (err) {\n        return !0;\n      }\n\n      try {\n        if (!win) return !0;\n      } catch (err) {\n        return !0;\n      }\n\n      try {\n        if (win.closed) return !0;\n      } catch (err) {\n        return !err || err.message !== IE_WIN_ACCESS_ERROR;\n      }\n\n      if (allowMock && isSameDomain(win)) try {\n        if (win.mockclosed) return !0;\n      } catch (err) {}\n\n      try {\n        if (!win.parent || !win.top) return !0;\n      } catch (err) {}\n\n      var iframeIndex = function (collection, item) {\n        for (var i = 0; i < collection.length; i++) try {\n          if (collection[i] === item) return i;\n        } catch (err) {}\n\n        return -1;\n      }(iframeWindows, win);\n\n      if (-1 !== iframeIndex) {\n        var frame = iframeFrames[iframeIndex];\n        if (frame && function (frame) {\n          if (!frame.contentWindow) return !0;\n          if (!frame.parentNode) return !0;\n          var doc = frame.ownerDocument;\n\n          if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n            var parent = frame;\n\n            for (; parent.parentNode && parent.parentNode !== parent;) parent = parent.parentNode;\n\n            if (!parent.host || !doc.documentElement.contains(parent.host)) return !0;\n          }\n\n          return !1;\n        }(frame)) return !0;\n      }\n\n      return !1;\n    }\n\n    function utils_getUserAgent(win) {\n      return (win = win || window).navigator.mockUserAgent || win.navigator.userAgent;\n    }\n\n    function getFrameByName(win, name) {\n      var winFrames = getFrames(win);\n\n      for (var _i9 = 0; _i9 < winFrames.length; _i9++) {\n        var childFrame = winFrames[_i9];\n\n        try {\n          if (isSameDomain(childFrame) && childFrame.name === name && -1 !== winFrames.indexOf(childFrame)) return childFrame;\n        } catch (err) {}\n      }\n\n      try {\n        if (-1 !== winFrames.indexOf(win.frames[name])) return win.frames[name];\n      } catch (err) {}\n\n      try {\n        if (-1 !== winFrames.indexOf(win[name])) return win[name];\n      } catch (err) {}\n    }\n\n    function isOpener(parent, child) {\n      return parent === getOpener(child);\n    }\n\n    function getAncestor(win) {\n      void 0 === win && (win = window);\n      return getOpener(win = win || window) || utils_getParent(win) || void 0;\n    }\n\n    function anyMatch(collection1, collection2) {\n      for (var _i17 = 0; _i17 < collection1.length; _i17++) {\n        var item1 = collection1[_i17];\n\n        for (var _i19 = 0; _i19 < collection2.length; _i19++) if (item1 === collection2[_i19]) return !0;\n      }\n\n      return !1;\n    }\n\n    function getDistanceFromTop(win) {\n      void 0 === win && (win = window);\n      var distance = 0;\n      var parent = win;\n\n      for (; parent;) (parent = utils_getParent(parent)) && (distance += 1);\n\n      return distance;\n    }\n\n    function isSameTopWindow(win1, win2) {\n      var top1 = getTop(win1) || win1;\n      var top2 = getTop(win2) || win2;\n\n      try {\n        if (top1 && top2) return top1 === top2;\n      } catch (err) {}\n\n      var allFrames1 = getAllFramesInWindow(win1);\n      var allFrames2 = getAllFramesInWindow(win2);\n      if (anyMatch(allFrames1, allFrames2)) return !0;\n      var opener1 = getOpener(top1);\n      var opener2 = getOpener(top2);\n      return opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2) || opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1), !1;\n    }\n\n    function matchDomain(pattern, origin) {\n      if (\"string\" == typeof pattern) {\n        if (\"string\" == typeof origin) return \"*\" === pattern || origin === pattern;\n        if (isRegex(origin)) return !1;\n        if (Array.isArray(origin)) return !1;\n      }\n\n      return isRegex(pattern) ? isRegex(origin) ? pattern.toString() === origin.toString() : !Array.isArray(origin) && Boolean(origin.match(pattern)) : !!Array.isArray(pattern) && (Array.isArray(origin) ? JSON.stringify(pattern) === JSON.stringify(origin) : !isRegex(origin) && pattern.some(function (subpattern) {\n        return matchDomain(subpattern, origin);\n      }));\n    }\n\n    function getDomainFromUrl(url) {\n      return url.match(/^(https?|mock|file):\\/\\//) ? url.split(\"/\").slice(0, 3).join(\"/\") : getDomain();\n    }\n\n    function onCloseWindow(win, callback, delay, maxtime) {\n      void 0 === delay && (delay = 1e3);\n      void 0 === maxtime && (maxtime = 1 / 0);\n      var timeout;\n      !function check() {\n        if (isWindowClosed(win)) {\n          timeout && clearTimeout(timeout);\n          return callback();\n        }\n\n        if (maxtime <= 0) clearTimeout(timeout);else {\n          maxtime -= delay;\n          timeout = setTimeout(check, delay);\n        }\n      }();\n      return {\n        cancel: function () {\n          timeout && clearTimeout(timeout);\n        }\n      };\n    }\n\n    function isWindow(obj) {\n      try {\n        if (obj === window) return !0;\n      } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n      }\n\n      try {\n        if (\"[object Window]\" === {}.toString.call(obj)) return !0;\n      } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n      }\n\n      try {\n        if (window.Window && obj instanceof window.Window) return !0;\n      } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n      }\n\n      try {\n        if (obj && obj.self === obj) return !0;\n      } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n      }\n\n      try {\n        if (obj && obj.parent === obj) return !0;\n      } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n      }\n\n      try {\n        if (obj && obj.top === obj) return !0;\n      } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n      }\n\n      try {\n        if (obj && \"__unlikely_value__\" === obj.__cross_domain_utils_window_check__) return !1;\n      } catch (err) {\n        return !0;\n      }\n\n      try {\n        if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) return !0;\n      } catch (err) {}\n\n      return !1;\n    }\n\n    function normalizeMockUrl(url) {\n      if (!(domain = getDomainFromUrl(url), 0 === domain.indexOf(\"mock:\"))) return url;\n      var domain;\n      throw new Error(\"Mock urls not supported out of test mode\");\n    }\n\n    function closeWindow(win) {\n      try {\n        win.close();\n      } catch (err) {}\n    }\n\n    function util_safeIndexOf(collection, item) {\n      for (var i = 0; i < collection.length; i++) try {\n        if (collection[i] === item) return i;\n      } catch (err) {}\n\n      return -1;\n    }\n\n    var weakmap_CrossDomainSafeWeakMap = function () {\n      function CrossDomainSafeWeakMap() {\n        this.name = void 0;\n        this.weakmap = void 0;\n        this.keys = void 0;\n        this.values = void 0;\n        this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\";\n        if (function () {\n          if (\"undefined\" == typeof WeakMap) return !1;\n          if (void 0 === Object.freeze) return !1;\n\n          try {\n            var testWeakMap = new WeakMap();\n            var testKey = {};\n            Object.freeze(testKey);\n            testWeakMap.set(testKey, \"__testvalue__\");\n            return \"__testvalue__\" === testWeakMap.get(testKey);\n          } catch (err) {\n            return !1;\n          }\n        }()) try {\n          this.weakmap = new WeakMap();\n        } catch (err) {}\n        this.keys = [];\n        this.values = [];\n      }\n\n      var _proto = CrossDomainSafeWeakMap.prototype;\n\n      _proto._cleanupClosedWindows = function () {\n        var weakmap = this.weakmap;\n        var keys = this.keys;\n\n        for (var i = 0; i < keys.length; i++) {\n          var value = keys[i];\n\n          if (isWindow(value) && isWindowClosed(value)) {\n            if (weakmap) try {\n              weakmap.delete(value);\n            } catch (err) {}\n            keys.splice(i, 1);\n            this.values.splice(i, 1);\n            i -= 1;\n          }\n        }\n      };\n\n      _proto.isSafeToReadWrite = function (key) {\n        return !isWindow(key);\n      };\n\n      _proto.set = function (key, value) {\n        if (!key) throw new Error(\"WeakMap expected key\");\n        var weakmap = this.weakmap;\n        if (weakmap) try {\n          weakmap.set(key, value);\n        } catch (err) {\n          delete this.weakmap;\n        }\n        if (this.isSafeToReadWrite(key)) try {\n          var name = this.name;\n          var entry = key[name];\n          entry && entry[0] === key ? entry[1] = value : Object.defineProperty(key, name, {\n            value: [key, value],\n            writable: !0\n          });\n          return;\n        } catch (err) {}\n\n        this._cleanupClosedWindows();\n\n        var keys = this.keys;\n        var values = this.values;\n        var index = util_safeIndexOf(keys, key);\n\n        if (-1 === index) {\n          keys.push(key);\n          values.push(value);\n        } else values[index] = value;\n      };\n\n      _proto.get = function (key) {\n        if (!key) throw new Error(\"WeakMap expected key\");\n        var weakmap = this.weakmap;\n        if (weakmap) try {\n          if (weakmap.has(key)) return weakmap.get(key);\n        } catch (err) {\n          delete this.weakmap;\n        }\n        if (this.isSafeToReadWrite(key)) try {\n          var entry = key[this.name];\n          return entry && entry[0] === key ? entry[1] : void 0;\n        } catch (err) {}\n\n        this._cleanupClosedWindows();\n\n        var index = util_safeIndexOf(this.keys, key);\n        if (-1 !== index) return this.values[index];\n      };\n\n      _proto.delete = function (key) {\n        if (!key) throw new Error(\"WeakMap expected key\");\n        var weakmap = this.weakmap;\n        if (weakmap) try {\n          weakmap.delete(key);\n        } catch (err) {\n          delete this.weakmap;\n        }\n        if (this.isSafeToReadWrite(key)) try {\n          var entry = key[this.name];\n          entry && entry[0] === key && (entry[0] = entry[1] = void 0);\n        } catch (err) {}\n\n        this._cleanupClosedWindows();\n\n        var keys = this.keys;\n        var index = util_safeIndexOf(keys, key);\n\n        if (-1 !== index) {\n          keys.splice(index, 1);\n          this.values.splice(index, 1);\n        }\n      };\n\n      _proto.has = function (key) {\n        if (!key) throw new Error(\"WeakMap expected key\");\n        var weakmap = this.weakmap;\n        if (weakmap) try {\n          if (weakmap.has(key)) return !0;\n        } catch (err) {\n          delete this.weakmap;\n        }\n        if (this.isSafeToReadWrite(key)) try {\n          var entry = key[this.name];\n          return !(!entry || entry[0] !== key);\n        } catch (err) {}\n\n        this._cleanupClosedWindows();\n\n        return -1 !== util_safeIndexOf(this.keys, key);\n      };\n\n      _proto.getOrSet = function (key, getter) {\n        if (this.has(key)) return this.get(key);\n        var value = getter();\n        this.set(key, value);\n        return value;\n      };\n\n      return CrossDomainSafeWeakMap;\n    }();\n\n    function getFunctionName(fn) {\n      return fn.name || fn.__name__ || fn.displayName || \"anonymous\";\n    }\n\n    function setFunctionName(fn, name) {\n      try {\n        delete fn.name;\n        fn.name = name;\n      } catch (err) {}\n\n      fn.__name__ = fn.displayName = name;\n      return fn;\n    }\n\n    function base64encode(str) {\n      if (\"function\" == typeof btoa) return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (m, p1) {\n        return String.fromCharCode(parseInt(p1, 16));\n      }));\n      if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"utf8\").toString(\"base64\");\n      throw new Error(\"Can not find window.btoa or Buffer\");\n    }\n\n    function uniqueID() {\n      var chars = \"0123456789abcdef\";\n      return \"xxxxxxxxxx\".replace(/./g, function () {\n        return chars.charAt(Math.floor(Math.random() * chars.length));\n      }) + \"_\" + base64encode(new Date().toISOString().slice(11, 19).replace(\"T\", \".\")).replace(/[^a-zA-Z0-9]/g, \"\").toLowerCase();\n    }\n\n    var objectIDs;\n\n    function serializeArgs(args) {\n      try {\n        return JSON.stringify([].slice.call(args), function (subkey, val) {\n          return \"function\" == typeof val ? \"memoize[\" + function (obj) {\n            objectIDs = objectIDs || new weakmap_CrossDomainSafeWeakMap();\n            if (null == obj || \"object\" != typeof obj && \"function\" != typeof obj) throw new Error(\"Invalid object\");\n            var uid = objectIDs.get(obj);\n\n            if (!uid) {\n              uid = typeof obj + \":\" + uniqueID();\n              objectIDs.set(obj, uid);\n            }\n\n            return uid;\n          }(val) + \"]\" : val;\n        });\n      } catch (err) {\n        throw new Error(\"Arguments not serializable -- can not be used to memoize\");\n      }\n    }\n\n    var memoizedFunctions = [];\n\n    function memoize(method, options) {\n      var _this = this;\n\n      void 0 === options && (options = {});\n      var cacheMap = new weakmap_CrossDomainSafeWeakMap();\n\n      var memoizedFunction = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n\n        var cache = cacheMap.getOrSet(options.thisNamespace ? this : method, function () {\n          return {};\n        });\n        var key = serializeArgs(args);\n        var cacheTime = options.time;\n        cache[key] && cacheTime && Date.now() - cache[key].time < cacheTime && delete cache[key];\n        if (cache[key]) return cache[key].value;\n        var time = Date.now();\n        var value = method.apply(this, arguments);\n        cache[key] = {\n          time: time,\n          value: value\n        };\n        return cache[key].value;\n      };\n\n      memoizedFunction.reset = function () {\n        cacheMap.delete(options.thisNamespace ? _this : method);\n      };\n\n      memoizedFunctions.push(memoizedFunction);\n      return setFunctionName(memoizedFunction, (options.name || getFunctionName(method)) + \"::memoized\");\n    }\n\n    memoize.clear = function () {\n      for (var _i2 = 0; _i2 < memoizedFunctions.length; _i2++) memoizedFunctions[_i2].reset();\n    };\n\n    function memoizePromise(method) {\n      var cache = {};\n\n      function memoizedPromiseFunction() {\n        var _arguments = arguments,\n            _this2 = this;\n\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n\n        var key = serializeArgs(args);\n        if (cache.hasOwnProperty(key)) return cache[key];\n        cache[key] = promise_ZalgoPromise.try(function () {\n          return method.apply(_this2, _arguments);\n        }).finally(function () {\n          delete cache[key];\n        });\n        return cache[key];\n      }\n\n      memoizedPromiseFunction.reset = function () {\n        cache = {};\n      };\n\n      return setFunctionName(memoizedPromiseFunction, getFunctionName(method) + \"::promiseMemoized\");\n    }\n\n    function inlineMemoize(method, logic, args) {\n      void 0 === args && (args = []);\n      var cache = method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {};\n      var key = serializeArgs(args);\n      return cache.hasOwnProperty(key) ? cache[key] : cache[key] = logic.apply(void 0, args);\n    }\n\n    function src_util_noop() {}\n\n    function once(method) {\n      var called = !1;\n      return setFunctionName(function () {\n        if (!called) {\n          called = !0;\n          return method.apply(this, arguments);\n        }\n      }, getFunctionName(method) + \"::once\");\n    }\n\n    function stringifyError(err, level) {\n      void 0 === level && (level = 1);\n      if (level >= 3) return \"stringifyError stack overflow\";\n\n      try {\n        if (!err) return \"<unknown error: \" + {}.toString.call(err) + \">\";\n        if (\"string\" == typeof err) return err;\n\n        if (err instanceof Error) {\n          var stack = err && err.stack;\n          var message = err && err.message;\n          if (stack && message) return -1 !== stack.indexOf(message) ? stack : message + \"\\n\" + stack;\n          if (stack) return stack;\n          if (message) return message;\n        }\n\n        return err && err.toString && \"function\" == typeof err.toString ? err.toString() : {}.toString.call(err);\n      } catch (newErr) {\n        return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n      }\n    }\n\n    function stringify(item) {\n      return \"string\" == typeof item ? item : item && item.toString && \"function\" == typeof item.toString ? item.toString() : {}.toString.call(item);\n    }\n\n    function extend(obj, source) {\n      if (!source) return obj;\n      if (Object.assign) return Object.assign(obj, source);\n\n      for (var key in source) source.hasOwnProperty(key) && (obj[key] = source[key]);\n\n      return obj;\n    }\n\n    function identity(item) {\n      return item;\n    }\n\n    function safeInterval(method, time) {\n      var timeout;\n      !function loop() {\n        timeout = setTimeout(function () {\n          method();\n          loop();\n        }, time);\n      }();\n      return {\n        cancel: function () {\n          clearTimeout(timeout);\n        }\n      };\n    }\n\n    function defineLazyProp(obj, key, getter) {\n      if (Array.isArray(obj)) {\n        if (\"number\" != typeof key) throw new TypeError(\"Array key must be number\");\n      } else if (\"object\" == typeof obj && null !== obj && \"string\" != typeof key) throw new TypeError(\"Object key must be string\");\n\n      Object.defineProperty(obj, key, {\n        configurable: !0,\n        enumerable: !0,\n        get: function () {\n          delete obj[key];\n          var value = getter();\n          obj[key] = value;\n          return value;\n        },\n        set: function (value) {\n          delete obj[key];\n          obj[key] = value;\n        }\n      });\n    }\n\n    function arrayFrom(item) {\n      return [].slice.call(item);\n    }\n\n    function isObjectObject(obj) {\n      return \"object\" == typeof (item = obj) && null !== item && \"[object Object]\" === {}.toString.call(obj);\n      var item;\n    }\n\n    function isPlainObject(obj) {\n      if (!isObjectObject(obj)) return !1;\n      var constructor = obj.constructor;\n      if (\"function\" != typeof constructor) return !1;\n      var prototype = constructor.prototype;\n      return !!isObjectObject(prototype) && !!prototype.hasOwnProperty(\"isPrototypeOf\");\n    }\n\n    function replaceObject(item, replacer, fullKey) {\n      void 0 === fullKey && (fullKey = \"\");\n\n      if (Array.isArray(item)) {\n        var length = item.length;\n        var result = [];\n\n        var _loop2 = function (i) {\n          defineLazyProp(result, i, function () {\n            var itemKey = fullKey ? fullKey + \".\" + i : \"\" + i;\n            var child = replacer(item[i], i, itemKey);\n            (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n            return child;\n          });\n        };\n\n        for (var i = 0; i < length; i++) _loop2(i);\n\n        return result;\n      }\n\n      if (isPlainObject(item)) {\n        var _result = {};\n\n        var _loop3 = function (key) {\n          if (!item.hasOwnProperty(key)) return \"continue\";\n          defineLazyProp(_result, key, function () {\n            var itemKey = fullKey ? fullKey + \".\" + key : \"\" + key;\n            var child = replacer(item[key], key, itemKey);\n            (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n            return child;\n          });\n        };\n\n        for (var key in item) _loop3(key);\n\n        return _result;\n      }\n\n      throw new Error(\"Pass an object or array\");\n    }\n\n    function isDefined(value) {\n      return null != value;\n    }\n\n    function util_isRegex(item) {\n      return \"[object RegExp]\" === {}.toString.call(item);\n    }\n\n    function util_getOrSet(obj, key, getter) {\n      if (obj.hasOwnProperty(key)) return obj[key];\n      var val = getter();\n      obj[key] = val;\n      return val;\n    }\n\n    function cleanup(obj) {\n      var tasks = [];\n      var cleaned = !1;\n      return {\n        set: function (name, item) {\n          if (!cleaned) {\n            obj[name] = item;\n            this.register(function () {\n              delete obj[name];\n            });\n          }\n\n          return item;\n        },\n        register: function (method) {\n          cleaned ? method() : tasks.push(once(method));\n        },\n        all: function () {\n          var results = [];\n          cleaned = !0;\n\n          for (; tasks.length;) {\n            var task = tasks.shift();\n            results.push(task());\n          }\n\n          return promise_ZalgoPromise.all(results).then(src_util_noop);\n        }\n      };\n    }\n\n    function assertExists(name, thing) {\n      if (null == thing) throw new Error(\"Expected \" + name + \" to be present\");\n      return thing;\n    }\n\n    memoize(function (obj) {\n      var result = [];\n\n      for (var key in obj) obj.hasOwnProperty(key) && result.push(obj[key]);\n\n      return result;\n    });\n\n    function isDocumentReady() {\n      return Boolean(document.body) && \"complete\" === document.readyState;\n    }\n\n    function isDocumentInteractive() {\n      return Boolean(document.body) && \"interactive\" === document.readyState;\n    }\n\n    function urlEncode(str) {\n      return str.replace(/\\?/g, \"%3F\").replace(/&/g, \"%26\").replace(/#/g, \"%23\").replace(/\\+/g, \"%2B\");\n    }\n\n    memoize(function () {\n      return new promise_ZalgoPromise(function (resolve) {\n        if (isDocumentReady() || isDocumentInteractive()) return resolve();\n        var interval = setInterval(function () {\n          if (isDocumentReady() || isDocumentInteractive()) {\n            clearInterval(interval);\n            return resolve();\n          }\n        }, 10);\n      });\n    });\n\n    function parseQuery(queryString) {\n      return inlineMemoize(parseQuery, function () {\n        var params = {};\n        if (!queryString) return params;\n        if (-1 === queryString.indexOf(\"=\")) return params;\n\n        for (var _i2 = 0, _queryString$split2 = queryString.split(\"&\"); _i2 < _queryString$split2.length; _i2++) {\n          var pair = _queryString$split2[_i2];\n          (pair = pair.split(\"=\"))[0] && pair[1] && (params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]));\n        }\n\n        return params;\n      }, [queryString]);\n    }\n\n    function extendQuery(originalQuery, props) {\n      void 0 === props && (props = {});\n      return props && Object.keys(props).length ? function (obj) {\n        void 0 === obj && (obj = {});\n        return Object.keys(obj).filter(function (key) {\n          return \"string\" == typeof obj[key];\n        }).map(function (key) {\n          return urlEncode(key) + \"=\" + urlEncode(obj[key]);\n        }).join(\"&\");\n      }(_extends({}, parseQuery(originalQuery), props)) : originalQuery;\n    }\n\n    function appendChild(container, child) {\n      container.appendChild(child);\n    }\n\n    function isElement(element) {\n      return element instanceof window.Element || null !== element && \"object\" == typeof element && 1 === element.nodeType && \"object\" == typeof element.style && \"object\" == typeof element.ownerDocument;\n    }\n\n    function getElementSafe(id, doc) {\n      void 0 === doc && (doc = document);\n      return isElement(id) ? id : \"string\" == typeof id ? doc.querySelector(id) : void 0;\n    }\n\n    function elementReady(id) {\n      return new promise_ZalgoPromise(function (resolve, reject) {\n        var name = stringify(id);\n        var el = getElementSafe(id);\n        if (el) return resolve(el);\n        if (isDocumentReady()) return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n        var interval = setInterval(function () {\n          if (el = getElementSafe(id)) {\n            clearInterval(interval);\n            return resolve(el);\n          }\n\n          if (isDocumentReady()) {\n            clearInterval(interval);\n            return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n          }\n        }, 10);\n      });\n    }\n\n    function PopupOpenError(message) {\n      this.message = message;\n    }\n\n    PopupOpenError.prototype = Object.create(Error.prototype);\n    var awaitFrameLoadPromises;\n\n    function awaitFrameLoad(frame) {\n      if ((awaitFrameLoadPromises = awaitFrameLoadPromises || new weakmap_CrossDomainSafeWeakMap()).has(frame)) {\n        var _promise = awaitFrameLoadPromises.get(frame);\n\n        if (_promise) return _promise;\n      }\n\n      var promise = new promise_ZalgoPromise(function (resolve, reject) {\n        frame.addEventListener(\"load\", function () {\n          !function (frame) {\n            !function () {\n              for (var i = 0; i < iframeWindows.length; i++) {\n                var closed = !1;\n\n                try {\n                  closed = iframeWindows[i].closed;\n                } catch (err) {}\n\n                if (closed) {\n                  iframeFrames.splice(i, 1);\n                  iframeWindows.splice(i, 1);\n                }\n              }\n            }();\n            if (frame && frame.contentWindow) try {\n              iframeWindows.push(frame.contentWindow);\n              iframeFrames.push(frame);\n            } catch (err) {}\n          }(frame);\n          resolve(frame);\n        });\n        frame.addEventListener(\"error\", function (err) {\n          frame.contentWindow ? resolve(frame) : reject(err);\n        });\n      });\n      awaitFrameLoadPromises.set(frame, promise);\n      return promise;\n    }\n\n    function awaitFrameWindow(frame) {\n      return awaitFrameLoad(frame).then(function (loadedFrame) {\n        if (!loadedFrame.contentWindow) throw new Error(\"Could not find window in iframe\");\n        return loadedFrame.contentWindow;\n      });\n    }\n\n    function dom_iframe(options, container) {\n      void 0 === options && (options = {});\n      var style = options.style || {};\n\n      var frame = function (tag, options, container) {\n        void 0 === tag && (tag = \"div\");\n        void 0 === options && (options = {});\n        tag = tag.toLowerCase();\n        var element = document.createElement(tag);\n        options.style && extend(element.style, options.style);\n        options.class && (element.className = options.class.join(\" \"));\n        options.id && element.setAttribute(\"id\", options.id);\n        if (options.attributes) for (var _i10 = 0, _Object$keys2 = Object.keys(options.attributes); _i10 < _Object$keys2.length; _i10++) {\n          var key = _Object$keys2[_i10];\n          element.setAttribute(key, options.attributes[key]);\n        }\n        options.styleSheet && function (el, styleText, doc) {\n          void 0 === doc && (doc = window.document);\n          el.styleSheet ? el.styleSheet.cssText = styleText : el.appendChild(doc.createTextNode(styleText));\n        }(element, options.styleSheet);\n\n        if (options.html) {\n          if (\"iframe\" === tag) throw new Error(\"Iframe html can not be written unless container provided and iframe in DOM\");\n          element.innerHTML = options.html;\n        }\n\n        return element;\n      }(\"iframe\", {\n        attributes: _extends({\n          allowTransparency: \"true\"\n        }, options.attributes || {}),\n        style: _extends({\n          backgroundColor: \"transparent\",\n          border: \"none\"\n        }, style),\n        html: options.html,\n        class: options.class\n      });\n\n      var isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n      frame.hasAttribute(\"id\") || frame.setAttribute(\"id\", uniqueID());\n      awaitFrameLoad(frame);\n      container && function (id, doc) {\n        void 0 === doc && (doc = document);\n        var element = getElementSafe(id, doc);\n        if (element) return element;\n        throw new Error(\"Can not find element: \" + stringify(id));\n      }(container).appendChild(frame);\n      (options.url || isIE) && frame.setAttribute(\"src\", options.url || \"about:blank\");\n      return frame;\n    }\n\n    function addEventListener(obj, event, handler) {\n      obj.addEventListener(event, handler);\n      return {\n        cancel: function () {\n          obj.removeEventListener(event, handler);\n        }\n      };\n    }\n\n    function showElement(element) {\n      element.style.setProperty(\"display\", \"\");\n    }\n\n    function hideElement(element) {\n      element.style.setProperty(\"display\", \"none\", \"important\");\n    }\n\n    function destroyElement(element) {\n      element && element.parentNode && element.parentNode.removeChild(element);\n    }\n\n    function isElementClosed(el) {\n      return !el || !el.parentNode;\n    }\n\n    function onResize(el, handler, _temp) {\n      var _ref2 = void 0 === _temp ? {} : _temp,\n          _ref2$width = _ref2.width,\n          width = void 0 === _ref2$width || _ref2$width,\n          _ref2$height = _ref2.height,\n          height = void 0 === _ref2$height || _ref2$height,\n          _ref2$interval = _ref2.interval,\n          interval = void 0 === _ref2$interval ? 100 : _ref2$interval,\n          _ref2$win = _ref2.win,\n          win = void 0 === _ref2$win ? window : _ref2$win;\n\n      var currentWidth = el.offsetWidth;\n      var currentHeight = el.offsetHeight;\n      handler({\n        width: currentWidth,\n        height: currentHeight\n      });\n\n      var check = function () {\n        var newWidth = el.offsetWidth;\n        var newHeight = el.offsetHeight;\n        (width && newWidth !== currentWidth || height && newHeight !== currentHeight) && handler({\n          width: newWidth,\n          height: newHeight\n        });\n        currentWidth = newWidth;\n        currentHeight = newHeight;\n      };\n\n      var observer;\n      var timeout;\n      win.addEventListener(\"resize\", check);\n\n      if (void 0 !== win.ResizeObserver) {\n        (observer = new win.ResizeObserver(check)).observe(el);\n        timeout = safeInterval(check, 10 * interval);\n      } else if (void 0 !== win.MutationObserver) {\n        (observer = new win.MutationObserver(check)).observe(el, {\n          attributes: !0,\n          childList: !0,\n          subtree: !0,\n          characterData: !1\n        });\n        timeout = safeInterval(check, 10 * interval);\n      } else timeout = safeInterval(check, interval);\n\n      return {\n        cancel: function () {\n          observer.disconnect();\n          window.removeEventListener(\"resize\", check);\n          timeout.cancel();\n        }\n      };\n    }\n\n    function isShadowElement(element) {\n      for (; element.parentNode;) element = element.parentNode;\n\n      return \"[object ShadowRoot]\" === element.toString();\n    }\n\n    function isPerc(str) {\n      return \"string\" == typeof str && /^[0-9]+%$/.test(str);\n    }\n\n    function toNum(val) {\n      if (\"number\" == typeof val) return val;\n      var match = val.match(/^([0-9]+)(px|%)$/);\n      if (!match) throw new Error(\"Could not match css value from \" + val);\n      return parseInt(match[1], 10);\n    }\n\n    function toPx(val) {\n      return toNum(val) + \"px\";\n    }\n\n    function toCSS(val) {\n      return \"number\" == typeof val ? toPx(val) : isPerc(val) ? val : toPx(val);\n    }\n\n    function normalizeDimension(dim, max) {\n      if (\"number\" == typeof dim) return dim;\n      if (isPerc(dim)) return parseInt(max * toNum(dim) / 100, 10);\n      if (\"string\" == typeof (str = dim) && /^[0-9]+px$/.test(str)) return toNum(dim);\n      var str;\n      throw new Error(\"Can not normalize dimension: \" + dim);\n    }\n\n    function global_getGlobal(win) {\n      void 0 === win && (win = window);\n      return win !== window ? win.__post_robot_10_0_39__ : win.__post_robot_10_0_39__ = win.__post_robot_10_0_39__ || {};\n    }\n\n    var getObj = function () {\n      return {};\n    };\n\n    function globalStore(key, defStore) {\n      void 0 === key && (key = \"store\");\n      void 0 === defStore && (defStore = getObj);\n      return util_getOrSet(global_getGlobal(), key, function () {\n        var store = defStore();\n        return {\n          has: function (storeKey) {\n            return store.hasOwnProperty(storeKey);\n          },\n          get: function (storeKey, defVal) {\n            return store.hasOwnProperty(storeKey) ? store[storeKey] : defVal;\n          },\n          set: function (storeKey, val) {\n            store[storeKey] = val;\n            return val;\n          },\n          del: function (storeKey) {\n            delete store[storeKey];\n          },\n          getOrSet: function (storeKey, getter) {\n            return util_getOrSet(store, storeKey, getter);\n          },\n          reset: function () {\n            store = defStore();\n          },\n          keys: function () {\n            return Object.keys(store);\n          }\n        };\n      });\n    }\n\n    var WildCard = function () {};\n\n    function getWildcard() {\n      var global = global_getGlobal();\n      global.WINDOW_WILDCARD = global.WINDOW_WILDCARD || new WildCard();\n      return global.WINDOW_WILDCARD;\n    }\n\n    function windowStore(key, defStore) {\n      void 0 === key && (key = \"store\");\n      void 0 === defStore && (defStore = getObj);\n      return globalStore(\"windowStore\").getOrSet(key, function () {\n        var winStore = new weakmap_CrossDomainSafeWeakMap();\n\n        var getStore = function (win) {\n          return winStore.getOrSet(win, defStore);\n        };\n\n        return {\n          has: function (win) {\n            return getStore(win).hasOwnProperty(key);\n          },\n          get: function (win, defVal) {\n            var store = getStore(win);\n            return store.hasOwnProperty(key) ? store[key] : defVal;\n          },\n          set: function (win, val) {\n            getStore(win)[key] = val;\n            return val;\n          },\n          del: function (win) {\n            delete getStore(win)[key];\n          },\n          getOrSet: function (win, getter) {\n            return util_getOrSet(getStore(win), key, getter);\n          }\n        };\n      });\n    }\n\n    function getInstanceID() {\n      return globalStore(\"instance\").getOrSet(\"instanceID\", uniqueID);\n    }\n\n    function resolveHelloPromise(win, _ref) {\n      var domain = _ref.domain;\n      var helloPromises = windowStore(\"helloPromises\");\n      var existingPromise = helloPromises.get(win);\n      existingPromise && existingPromise.resolve({\n        domain: domain\n      });\n      var newPromise = promise_ZalgoPromise.resolve({\n        domain: domain\n      });\n      helloPromises.set(win, newPromise);\n      return newPromise;\n    }\n\n    function sayHello(win, _ref4) {\n      return (0, _ref4.send)(win, \"postrobot_hello\", {\n        instanceID: getInstanceID()\n      }, {\n        domain: \"*\",\n        timeout: -1\n      }).then(function (_ref5) {\n        var origin = _ref5.origin,\n            instanceID = _ref5.data.instanceID;\n        resolveHelloPromise(win, {\n          domain: origin\n        });\n        return {\n          win: win,\n          domain: origin,\n          instanceID: instanceID\n        };\n      });\n    }\n\n    function getWindowInstanceID(win, _ref6) {\n      var send = _ref6.send;\n      return windowStore(\"windowInstanceIDPromises\").getOrSet(win, function () {\n        return sayHello(win, {\n          send: send\n        }).then(function (_ref7) {\n          return _ref7.instanceID;\n        });\n      });\n    }\n\n    function awaitWindowHello(win, timeout, name) {\n      void 0 === timeout && (timeout = 5e3);\n      void 0 === name && (name = \"Window\");\n\n      var promise = function (win) {\n        return windowStore(\"helloPromises\").getOrSet(win, function () {\n          return new promise_ZalgoPromise();\n        });\n      }(win);\n\n      -1 !== timeout && (promise = promise.timeout(timeout, new Error(name + \" did not load after \" + timeout + \"ms\")));\n      return promise;\n    }\n\n    function markWindowKnown(win) {\n      windowStore(\"knownWindows\").set(win, !0);\n    }\n\n    function isSerializedType(item) {\n      return \"object\" == typeof item && null !== item && \"string\" == typeof item.__type__;\n    }\n\n    function determineType(val) {\n      return void 0 === val ? \"undefined\" : null === val ? \"null\" : Array.isArray(val) ? \"array\" : \"function\" == typeof val ? \"function\" : \"object\" == typeof val ? val instanceof Error ? \"error\" : \"function\" == typeof val.then ? \"promise\" : \"[object RegExp]\" === {}.toString.call(val) ? \"regex\" : \"[object Date]\" === {}.toString.call(val) ? \"date\" : \"object\" : \"string\" == typeof val ? \"string\" : \"number\" == typeof val ? \"number\" : \"boolean\" == typeof val ? \"boolean\" : void 0;\n    }\n\n    function serializeType(type, val) {\n      return {\n        __type__: type,\n        __val__: val\n      };\n    }\n\n    var _SERIALIZER;\n\n    var SERIALIZER = ((_SERIALIZER = {}).function = function () {}, _SERIALIZER.error = function (_ref) {\n      return serializeType(\"error\", {\n        message: _ref.message,\n        stack: _ref.stack,\n        code: _ref.code,\n        data: _ref.data\n      });\n    }, _SERIALIZER.promise = function () {}, _SERIALIZER.regex = function (val) {\n      return serializeType(\"regex\", val.source);\n    }, _SERIALIZER.date = function (val) {\n      return serializeType(\"date\", val.toJSON());\n    }, _SERIALIZER.array = function (val) {\n      return val;\n    }, _SERIALIZER.object = function (val) {\n      return val;\n    }, _SERIALIZER.string = function (val) {\n      return val;\n    }, _SERIALIZER.number = function (val) {\n      return val;\n    }, _SERIALIZER.boolean = function (val) {\n      return val;\n    }, _SERIALIZER.null = function (val) {\n      return val;\n    }, _SERIALIZER);\n    var defaultSerializers = {};\n\n    var _DESERIALIZER;\n\n    var DESERIALIZER = ((_DESERIALIZER = {}).function = function () {\n      throw new Error(\"Function serialization is not implemented; nothing to deserialize\");\n    }, _DESERIALIZER.error = function (_ref2) {\n      var stack = _ref2.stack,\n          code = _ref2.code,\n          data = _ref2.data;\n      var error = new Error(_ref2.message);\n      error.code = code;\n      data && (error.data = data);\n      error.stack = stack + \"\\n\\n\" + error.stack;\n      return error;\n    }, _DESERIALIZER.promise = function () {\n      throw new Error(\"Promise serialization is not implemented; nothing to deserialize\");\n    }, _DESERIALIZER.regex = function (val) {\n      return new RegExp(val);\n    }, _DESERIALIZER.date = function (val) {\n      return new Date(val);\n    }, _DESERIALIZER.array = function (val) {\n      return val;\n    }, _DESERIALIZER.object = function (val) {\n      return val;\n    }, _DESERIALIZER.string = function (val) {\n      return val;\n    }, _DESERIALIZER.number = function (val) {\n      return val;\n    }, _DESERIALIZER.boolean = function (val) {\n      return val;\n    }, _DESERIALIZER.null = function (val) {\n      return val;\n    }, _DESERIALIZER);\n    var defaultDeserializers = {};\n\n    function needsBridgeForBrowser() {\n      return !!utils_getUserAgent(window).match(/MSIE|trident|edge\\/12|edge\\/13/i);\n    }\n\n    function needsBridgeForWin(win) {\n      return !isSameTopWindow(window, win);\n    }\n\n    function needsBridgeForDomain(domain, win) {\n      if (domain) {\n        if (getDomain() !== getDomainFromUrl(domain)) return !0;\n      } else if (win && !isSameDomain(win)) return !0;\n\n      return !1;\n    }\n\n    function needsBridge(_ref) {\n      var win = _ref.win,\n          domain = _ref.domain;\n      return !(!needsBridgeForBrowser() || domain && !needsBridgeForDomain(domain, win) || win && !needsBridgeForWin(win));\n    }\n\n    function getBridgeName(domain) {\n      return \"__postrobot_bridge___\" + (domain = domain || getDomainFromUrl(domain)).replace(/[^a-zA-Z0-9]+/g, \"_\");\n    }\n\n    function isBridge() {\n      return Boolean(window.name && window.name === getBridgeName(getDomain()));\n    }\n\n    var documentBodyReady = new promise_ZalgoPromise(function (resolve) {\n      if (window.document && window.document.body) return resolve(window.document.body);\n      var interval = setInterval(function () {\n        if (window.document && window.document.body) {\n          clearInterval(interval);\n          return resolve(window.document.body);\n        }\n      }, 10);\n    });\n\n    function registerRemoteWindow(win) {\n      windowStore(\"remoteWindowPromises\").getOrSet(win, function () {\n        return new promise_ZalgoPromise();\n      });\n    }\n\n    function findRemoteWindow(win) {\n      var remoteWinPromise = windowStore(\"remoteWindowPromises\").get(win);\n      if (!remoteWinPromise) throw new Error(\"Remote window promise not found\");\n      return remoteWinPromise;\n    }\n\n    function registerRemoteSendMessage(win, domain, sendMessage) {\n      findRemoteWindow(win).resolve(function (remoteWin, remoteDomain, message) {\n        if (remoteWin !== win) throw new Error(\"Remote window does not match window\");\n        if (!matchDomain(remoteDomain, domain)) throw new Error(\"Remote domain \" + remoteDomain + \" does not match domain \" + domain);\n        sendMessage.fireAndForget(message);\n      });\n    }\n\n    function rejectRemoteSendMessage(win, err) {\n      findRemoteWindow(win).reject(err).catch(src_util_noop);\n    }\n\n    function linkWindow(_ref3) {\n      var win = _ref3.win,\n          name = _ref3.name,\n          domain = _ref3.domain;\n      var popupWindowsByName = globalStore(\"popupWindowsByName\");\n      var popupWindowsByWin = windowStore(\"popupWindowsByWin\");\n\n      for (var _i2 = 0, _popupWindowsByName$k2 = popupWindowsByName.keys(); _i2 < _popupWindowsByName$k2.length; _i2++) {\n        var winName = _popupWindowsByName$k2[_i2];\n\n        var _details = popupWindowsByName.get(winName);\n\n        _details && !isWindowClosed(_details.win) || popupWindowsByName.del(winName);\n      }\n\n      if (isWindowClosed(win)) return {\n        win: win,\n        name: name,\n        domain: domain\n      };\n      var details = popupWindowsByWin.getOrSet(win, function () {\n        return name ? popupWindowsByName.getOrSet(name, function () {\n          return {\n            win: win,\n            name: name\n          };\n        }) : {\n          win: win\n        };\n      });\n      if (details.win && details.win !== win) throw new Error(\"Different window already linked for window: \" + (name || \"undefined\"));\n\n      if (name) {\n        details.name = name;\n        popupWindowsByName.set(name, details);\n      }\n\n      if (domain) {\n        details.domain = domain;\n        registerRemoteWindow(win);\n      }\n\n      popupWindowsByWin.set(win, details);\n      return details;\n    }\n\n    function setupBridge(_ref) {\n      var on = _ref.on,\n          send = _ref.send,\n          receiveMessage = _ref.receiveMessage;\n      windowOpen = window.open, window.open = function (url, name, options, last) {\n        var win = windowOpen.call(this, normalizeMockUrl(url), name, options, last);\n        if (!win) return win;\n        linkWindow({\n          win: win,\n          name: name,\n          domain: url ? getDomainFromUrl(url) : null\n        });\n        return win;\n      };\n      var windowOpen;\n      !function (_ref) {\n        var on = _ref.on,\n            send = _ref.send,\n            receiveMessage = _ref.receiveMessage;\n        var popupWindowsByName = globalStore(\"popupWindowsByName\");\n        on(\"postrobot_open_tunnel\", function (_ref2) {\n          var source = _ref2.source,\n              origin = _ref2.origin,\n              data = _ref2.data;\n          var bridgePromise = globalStore(\"bridges\").get(origin);\n          if (!bridgePromise) throw new Error(\"Can not find bridge promise for domain \" + origin);\n          return bridgePromise.then(function (bridge) {\n            if (source !== bridge) throw new Error(\"Message source does not matched registered bridge for domain \" + origin);\n            if (!data.name) throw new Error(\"Register window expected to be passed window name\");\n            if (!data.sendMessage) throw new Error(\"Register window expected to be passed sendMessage method\");\n            if (!popupWindowsByName.has(data.name)) throw new Error(\"Window with name \" + data.name + \" does not exist, or was not opened by this window\");\n\n            var getWindowDetails = function () {\n              return popupWindowsByName.get(data.name);\n            };\n\n            if (!getWindowDetails().domain) throw new Error(\"We do not have a registered domain for window \" + data.name);\n            if (getWindowDetails().domain !== origin) throw new Error(\"Message origin \" + origin + \" does not matched registered window origin \" + (getWindowDetails().domain || \"unknown\"));\n            registerRemoteSendMessage(getWindowDetails().win, origin, data.sendMessage);\n            return {\n              sendMessage: function (message) {\n                if (window && !window.closed && getWindowDetails()) {\n                  var domain = getWindowDetails().domain;\n                  if (domain) try {\n                    receiveMessage({\n                      data: message,\n                      origin: domain,\n                      source: getWindowDetails().win\n                    }, {\n                      on: on,\n                      send: send\n                    });\n                  } catch (err) {\n                    promise_ZalgoPromise.reject(err);\n                  }\n                }\n              }\n            };\n          });\n        });\n      }({\n        on: on,\n        send: send,\n        receiveMessage: receiveMessage\n      });\n      !function (_ref2) {\n        var send = _ref2.send;\n\n        global_getGlobal(window).openTunnelToParent = function (_ref3) {\n          var name = _ref3.name,\n              source = _ref3.source,\n              canary = _ref3.canary,\n              sendMessage = _ref3.sendMessage;\n          var tunnelWindows = globalStore(\"tunnelWindows\");\n          var parentWindow = utils_getParent(window);\n          if (!parentWindow) throw new Error(\"No parent window found to open tunnel to\");\n\n          var id = function (_ref) {\n            var name = _ref.name,\n                source = _ref.source,\n                canary = _ref.canary,\n                sendMessage = _ref.sendMessage;\n            !function () {\n              var tunnelWindows = globalStore(\"tunnelWindows\");\n\n              for (var _i2 = 0, _tunnelWindows$keys2 = tunnelWindows.keys(); _i2 < _tunnelWindows$keys2.length; _i2++) {\n                var key = _tunnelWindows$keys2[_i2];\n                isWindowClosed(tunnelWindows[key].source) && tunnelWindows.del(key);\n              }\n            }();\n            var id = uniqueID();\n            globalStore(\"tunnelWindows\").set(id, {\n              name: name,\n              source: source,\n              canary: canary,\n              sendMessage: sendMessage\n            });\n            return id;\n          }({\n            name: name,\n            source: source,\n            canary: canary,\n            sendMessage: sendMessage\n          });\n\n          return send(parentWindow, \"postrobot_open_tunnel\", {\n            name: name,\n            sendMessage: function () {\n              var tunnelWindow = tunnelWindows.get(id);\n\n              if (tunnelWindow && tunnelWindow.source && !isWindowClosed(tunnelWindow.source)) {\n                try {\n                  tunnelWindow.canary();\n                } catch (err) {\n                  return;\n                }\n\n                tunnelWindow.sendMessage.apply(this, arguments);\n              }\n            }\n          }, {\n            domain: \"*\"\n          });\n        };\n      }({\n        send: send\n      });\n      !function (_ref) {\n        var on = _ref.on,\n            send = _ref.send,\n            receiveMessage = _ref.receiveMessage;\n        promise_ZalgoPromise.try(function () {\n          var opener = getOpener(window);\n\n          if (opener && needsBridge({\n            win: opener\n          })) {\n            registerRemoteWindow(opener);\n            return (win = opener, windowStore(\"remoteBridgeAwaiters\").getOrSet(win, function () {\n              return promise_ZalgoPromise.try(function () {\n                var frame = getFrameByName(win, getBridgeName(getDomain()));\n                if (frame) return isSameDomain(frame) && global_getGlobal(assertSameDomain(frame)) ? frame : new promise_ZalgoPromise(function (resolve) {\n                  var interval;\n                  var timeout;\n                  interval = setInterval(function () {\n                    if (frame && isSameDomain(frame) && global_getGlobal(assertSameDomain(frame))) {\n                      clearInterval(interval);\n                      clearTimeout(timeout);\n                      return resolve(frame);\n                    }\n                  }, 100);\n                  timeout = setTimeout(function () {\n                    clearInterval(interval);\n                    return resolve();\n                  }, 2e3);\n                });\n              });\n            })).then(function (bridge) {\n              return bridge ? window.name ? global_getGlobal(assertSameDomain(bridge)).openTunnelToParent({\n                name: window.name,\n                source: window,\n                canary: function () {},\n                sendMessage: function (message) {\n                  try {\n                    window;\n                  } catch (err) {\n                    return;\n                  }\n\n                  if (window && !window.closed) try {\n                    receiveMessage({\n                      data: message,\n                      origin: this.origin,\n                      source: this.source\n                    }, {\n                      on: on,\n                      send: send\n                    });\n                  } catch (err) {\n                    promise_ZalgoPromise.reject(err);\n                  }\n                }\n              }).then(function (_ref2) {\n                var source = _ref2.source,\n                    origin = _ref2.origin,\n                    data = _ref2.data;\n                if (source !== opener) throw new Error(\"Source does not match opener\");\n                registerRemoteSendMessage(source, origin, data.sendMessage);\n              }).catch(function (err) {\n                rejectRemoteSendMessage(opener, err);\n                throw err;\n              }) : rejectRemoteSendMessage(opener, new Error(\"Can not register with opener: window does not have a name\")) : rejectRemoteSendMessage(opener, new Error(\"Can not register with opener: no bridge found in opener\"));\n            });\n            var win;\n          }\n        });\n      }({\n        on: on,\n        send: send,\n        receiveMessage: receiveMessage\n      });\n    }\n\n    function cleanupProxyWindows() {\n      var idToProxyWindow = globalStore(\"idToProxyWindow\");\n\n      for (var _i2 = 0, _idToProxyWindow$keys2 = idToProxyWindow.keys(); _i2 < _idToProxyWindow$keys2.length; _i2++) {\n        var id = _idToProxyWindow$keys2[_i2];\n        idToProxyWindow.get(id).shouldClean() && idToProxyWindow.del(id);\n      }\n    }\n\n    function getSerializedWindow(winPromise, _ref) {\n      var send = _ref.send,\n          _ref$id = _ref.id,\n          id = void 0 === _ref$id ? uniqueID() : _ref$id;\n      var windowNamePromise = winPromise.then(function (win) {\n        if (isSameDomain(win)) return assertSameDomain(win).name;\n      });\n      var windowTypePromise = winPromise.then(function (window) {\n        if (isWindowClosed(window)) throw new Error(\"Window is closed, can not determine type\");\n        return getOpener(window) ? WINDOW_TYPE.POPUP : WINDOW_TYPE.IFRAME;\n      });\n      windowNamePromise.catch(src_util_noop);\n      windowTypePromise.catch(src_util_noop);\n      return {\n        id: id,\n        getType: function () {\n          return windowTypePromise;\n        },\n        getInstanceID: memoizePromise(function () {\n          return winPromise.then(function (win) {\n            return getWindowInstanceID(win, {\n              send: send\n            });\n          });\n        }),\n        close: function () {\n          return winPromise.then(closeWindow);\n        },\n        getName: function () {\n          return winPromise.then(function (win) {\n            if (!isWindowClosed(win)) return isSameDomain(win) ? assertSameDomain(win).name : windowNamePromise;\n          });\n        },\n        focus: function () {\n          return winPromise.then(function (win) {\n            win.focus();\n          });\n        },\n        isClosed: function () {\n          return winPromise.then(function (win) {\n            return isWindowClosed(win);\n          });\n        },\n        setLocation: function (href) {\n          return winPromise.then(function (win) {\n            var domain = window.location.protocol + \"//\" + window.location.host;\n            if (0 === href.indexOf(\"/\")) href = \"\" + domain + href;else if (!href.match(/^https?:\\/\\//) && 0 !== href.indexOf(domain)) throw new Error(\"Expected url to be http or https url, or absolute path, got \" + JSON.stringify(href));\n            if (isSameDomain(win)) try {\n              if (win.location && \"function\" == typeof win.location.replace) {\n                win.location.replace(href);\n                return;\n              }\n            } catch (err) {}\n            win.location = href;\n          });\n        },\n        setName: function (name) {\n          return winPromise.then(function (win) {\n            linkWindow({\n              win: win,\n              name: name\n            });\n            var sameDomain = isSameDomain(win);\n\n            var frame = function (win) {\n              if (isSameDomain(win)) return assertSameDomain(win).frameElement;\n\n              for (var _i21 = 0, _document$querySelect2 = document.querySelectorAll(\"iframe\"); _i21 < _document$querySelect2.length; _i21++) {\n                var frame = _document$querySelect2[_i21];\n                if (frame && frame.contentWindow && frame.contentWindow === win) return frame;\n              }\n            }(win);\n\n            if (!sameDomain) throw new Error(\"Can not set name for cross-domain window: \" + name);\n            assertSameDomain(win).name = name;\n            frame && frame.setAttribute(\"name\", name);\n            windowNamePromise = promise_ZalgoPromise.resolve(name);\n          });\n        }\n      };\n    }\n\n    var window_ProxyWindow = function () {\n      function ProxyWindow(_ref2) {\n        var send = _ref2.send,\n            win = _ref2.win,\n            serializedWindow = _ref2.serializedWindow;\n        this.id = void 0;\n        this.isProxyWindow = !0;\n        this.serializedWindow = void 0;\n        this.actualWindow = void 0;\n        this.actualWindowPromise = void 0;\n        this.send = void 0;\n        this.name = void 0;\n        this.actualWindowPromise = new promise_ZalgoPromise();\n        this.serializedWindow = serializedWindow || getSerializedWindow(this.actualWindowPromise, {\n          send: send\n        });\n        globalStore(\"idToProxyWindow\").set(this.getID(), this);\n        win && this.setWindow(win, {\n          send: send\n        });\n      }\n\n      var _proto = ProxyWindow.prototype;\n\n      _proto.getID = function () {\n        return this.serializedWindow.id;\n      };\n\n      _proto.getType = function () {\n        return this.serializedWindow.getType();\n      };\n\n      _proto.isPopup = function () {\n        return this.getType().then(function (type) {\n          return type === WINDOW_TYPE.POPUP;\n        });\n      };\n\n      _proto.setLocation = function (href) {\n        var _this = this;\n\n        return this.serializedWindow.setLocation(href).then(function () {\n          return _this;\n        });\n      };\n\n      _proto.getName = function () {\n        return this.serializedWindow.getName();\n      };\n\n      _proto.setName = function (name) {\n        var _this2 = this;\n\n        return this.serializedWindow.setName(name).then(function () {\n          return _this2;\n        });\n      };\n\n      _proto.close = function () {\n        var _this3 = this;\n\n        return this.serializedWindow.close().then(function () {\n          return _this3;\n        });\n      };\n\n      _proto.focus = function () {\n        var _this4 = this;\n\n        var isPopupPromise = this.isPopup();\n        var getNamePromise = this.getName();\n        var reopenPromise = promise_ZalgoPromise.hash({\n          isPopup: isPopupPromise,\n          name: getNamePromise\n        }).then(function (_ref3) {\n          var name = _ref3.name;\n          _ref3.isPopup && name && window.open(\"\", name);\n        });\n        var focusPromise = this.serializedWindow.focus();\n        return promise_ZalgoPromise.all([reopenPromise, focusPromise]).then(function () {\n          return _this4;\n        });\n      };\n\n      _proto.isClosed = function () {\n        return this.serializedWindow.isClosed();\n      };\n\n      _proto.getWindow = function () {\n        return this.actualWindow;\n      };\n\n      _proto.setWindow = function (win, _ref4) {\n        var send = _ref4.send;\n        this.actualWindow = win;\n        this.actualWindowPromise.resolve(this.actualWindow);\n        this.serializedWindow = getSerializedWindow(this.actualWindowPromise, {\n          send: send,\n          id: this.getID()\n        });\n        windowStore(\"winToProxyWindow\").set(win, this);\n      };\n\n      _proto.awaitWindow = function () {\n        return this.actualWindowPromise;\n      };\n\n      _proto.matchWindow = function (win, _ref5) {\n        var _this5 = this;\n\n        var send = _ref5.send;\n        return promise_ZalgoPromise.try(function () {\n          return _this5.actualWindow ? win === _this5.actualWindow : promise_ZalgoPromise.hash({\n            proxyInstanceID: _this5.getInstanceID(),\n            knownWindowInstanceID: getWindowInstanceID(win, {\n              send: send\n            })\n          }).then(function (_ref6) {\n            var match = _ref6.proxyInstanceID === _ref6.knownWindowInstanceID;\n            match && _this5.setWindow(win, {\n              send: send\n            });\n            return match;\n          });\n        });\n      };\n\n      _proto.unwrap = function () {\n        return this.actualWindow || this;\n      };\n\n      _proto.getInstanceID = function () {\n        return this.serializedWindow.getInstanceID();\n      };\n\n      _proto.shouldClean = function () {\n        return Boolean(this.actualWindow && isWindowClosed(this.actualWindow));\n      };\n\n      _proto.serialize = function () {\n        return this.serializedWindow;\n      };\n\n      ProxyWindow.unwrap = function (win) {\n        return ProxyWindow.isProxyWindow(win) ? win.unwrap() : win;\n      };\n\n      ProxyWindow.serialize = function (win, _ref7) {\n        var send = _ref7.send;\n        cleanupProxyWindows();\n        return ProxyWindow.toProxyWindow(win, {\n          send: send\n        }).serialize();\n      };\n\n      ProxyWindow.deserialize = function (serializedWindow, _ref8) {\n        var send = _ref8.send;\n        cleanupProxyWindows();\n        return globalStore(\"idToProxyWindow\").get(serializedWindow.id) || new ProxyWindow({\n          serializedWindow: serializedWindow,\n          send: send\n        });\n      };\n\n      ProxyWindow.isProxyWindow = function (obj) {\n        return Boolean(obj && !isWindow(obj) && obj.isProxyWindow);\n      };\n\n      ProxyWindow.toProxyWindow = function (win, _ref9) {\n        var send = _ref9.send;\n        cleanupProxyWindows();\n        if (ProxyWindow.isProxyWindow(win)) return win;\n        var actualWindow = win;\n        return windowStore(\"winToProxyWindow\").get(actualWindow) || new ProxyWindow({\n          win: actualWindow,\n          send: send\n        });\n      };\n\n      return ProxyWindow;\n    }();\n\n    function addMethod(id, val, name, source, domain) {\n      var methodStore = windowStore(\"methodStore\");\n      var proxyWindowMethods = globalStore(\"proxyWindowMethods\");\n      if (window_ProxyWindow.isProxyWindow(source)) proxyWindowMethods.set(id, {\n        val: val,\n        name: name,\n        domain: domain,\n        source: source\n      });else {\n        proxyWindowMethods.del(id);\n        methodStore.getOrSet(source, function () {\n          return {};\n        })[id] = {\n          domain: domain,\n          name: name,\n          val: val,\n          source: source\n        };\n      }\n    }\n\n    function lookupMethod(source, id) {\n      var methodStore = windowStore(\"methodStore\");\n      var proxyWindowMethods = globalStore(\"proxyWindowMethods\");\n      return methodStore.getOrSet(source, function () {\n        return {};\n      })[id] || proxyWindowMethods.get(id);\n    }\n\n    function function_serializeFunction(destination, domain, val, key, _ref3) {\n      on = (_ref = {\n        on: _ref3.on,\n        send: _ref3.send\n      }).on, send = _ref.send, globalStore(\"builtinListeners\").getOrSet(\"functionCalls\", function () {\n        return on(\"postrobot_method\", {\n          domain: \"*\"\n        }, function (_ref2) {\n          var source = _ref2.source,\n              origin = _ref2.origin,\n              data = _ref2.data;\n          var id = data.id,\n              name = data.name;\n          var meth = lookupMethod(source, id);\n          if (!meth) throw new Error(\"Could not find method '\" + name + \"' with id: \" + data.id + \" in \" + getDomain(window));\n          var methodSource = meth.source,\n              domain = meth.domain,\n              val = meth.val;\n          return promise_ZalgoPromise.try(function () {\n            if (!matchDomain(domain, origin)) throw new Error(\"Method '\" + data.name + \"' domain \" + JSON.stringify(util_isRegex(meth.domain) ? meth.domain.source : meth.domain) + \" does not match origin \" + origin + \" in \" + getDomain(window));\n            if (window_ProxyWindow.isProxyWindow(methodSource)) return methodSource.matchWindow(source, {\n              send: send\n            }).then(function (match) {\n              if (!match) throw new Error(\"Method call '\" + data.name + \"' failed - proxy window does not match source in \" + getDomain(window));\n            });\n          }).then(function () {\n            return val.apply({\n              source: source,\n              origin: origin\n            }, data.args);\n          }, function (err) {\n            return promise_ZalgoPromise.try(function () {\n              if (val.onError) return val.onError(err);\n            }).then(function () {\n              err.stack && (err.stack = \"Remote call to \" + name + \"(\" + function (args) {\n                void 0 === args && (args = []);\n                return arrayFrom(args).map(function (arg) {\n                  return \"string\" == typeof arg ? \"'\" + arg + \"'\" : void 0 === arg ? \"undefined\" : null === arg ? \"null\" : \"boolean\" == typeof arg ? arg.toString() : Array.isArray(arg) ? \"[ ... ]\" : \"object\" == typeof arg ? \"{ ... }\" : \"function\" == typeof arg ? \"() => { ... }\" : \"<\" + typeof arg + \">\";\n                }).join(\", \");\n              }(data.args) + \") failed\\n\\n\" + err.stack);\n              throw err;\n            });\n          }).then(function (result) {\n            return {\n              result: result,\n              id: id,\n              name: name\n            };\n          });\n        });\n      });\n\n      var _ref, on, send;\n\n      var id = val.__id__ || uniqueID();\n      destination = window_ProxyWindow.unwrap(destination);\n      var name = val.__name__ || val.name || key;\n      \"string\" == typeof name && \"function\" == typeof name.indexOf && 0 === name.indexOf(\"anonymous::\") && (name = name.replace(\"anonymous::\", key + \"::\"));\n\n      if (window_ProxyWindow.isProxyWindow(destination)) {\n        addMethod(id, val, name, destination, domain);\n        destination.awaitWindow().then(function (win) {\n          addMethod(id, val, name, win, domain);\n        });\n      } else addMethod(id, val, name, destination, domain);\n\n      return serializeType(\"cross_domain_function\", {\n        id: id,\n        name: name\n      });\n    }\n\n    function serializeMessage(destination, domain, obj, _ref) {\n      var _serialize;\n\n      var on = _ref.on,\n          send = _ref.send;\n      return function (obj, serializers) {\n        void 0 === serializers && (serializers = defaultSerializers);\n        var result = JSON.stringify(obj, function (key) {\n          var val = this[key];\n          if (isSerializedType(this)) return val;\n          var type = determineType(val);\n          if (!type) return val;\n          var serializer = serializers[type] || SERIALIZER[type];\n          return serializer ? serializer(val, key) : val;\n        });\n        return void 0 === result ? \"undefined\" : result;\n      }(obj, ((_serialize = {}).promise = function (val, key) {\n        return function (destination, domain, val, key, _ref) {\n          return serializeType(\"cross_domain_zalgo_promise\", {\n            then: function_serializeFunction(destination, domain, function (resolve, reject) {\n              return val.then(resolve, reject);\n            }, key, {\n              on: _ref.on,\n              send: _ref.send\n            })\n          });\n        }(destination, domain, val, key, {\n          on: on,\n          send: send\n        });\n      }, _serialize.function = function (val, key) {\n        return function_serializeFunction(destination, domain, val, key, {\n          on: on,\n          send: send\n        });\n      }, _serialize.object = function (val) {\n        return isWindow(val) || window_ProxyWindow.isProxyWindow(val) ? serializeType(\"cross_domain_window\", window_ProxyWindow.serialize(val, {\n          send: send\n        })) : val;\n      }, _serialize));\n    }\n\n    function deserializeMessage(source, origin, message, _ref2) {\n      var _deserialize;\n\n      var send = _ref2.send;\n      return function (str, deserializers) {\n        void 0 === deserializers && (deserializers = defaultDeserializers);\n        if (\"undefined\" !== str) return JSON.parse(str, function (key, val) {\n          if (isSerializedType(this)) return val;\n          var type;\n          var value;\n\n          if (isSerializedType(val)) {\n            type = val.__type__;\n            value = val.__val__;\n          } else {\n            type = determineType(val);\n            value = val;\n          }\n\n          if (!type) return value;\n          var deserializer = deserializers[type] || DESERIALIZER[type];\n          return deserializer ? deserializer(value, key) : value;\n        });\n      }(message, ((_deserialize = {}).cross_domain_zalgo_promise = function (serializedPromise) {\n        return function (source, origin, _ref2) {\n          return new promise_ZalgoPromise(_ref2.then);\n        }(0, 0, serializedPromise);\n      }, _deserialize.cross_domain_function = function (serializedFunction) {\n        return function (source, origin, _ref4, _ref5) {\n          var id = _ref4.id,\n              name = _ref4.name;\n          var send = _ref5.send;\n\n          var getDeserializedFunction = function (opts) {\n            void 0 === opts && (opts = {});\n\n            function crossDomainFunctionWrapper() {\n              var _arguments = arguments;\n              return window_ProxyWindow.toProxyWindow(source, {\n                send: send\n              }).awaitWindow().then(function (win) {\n                var meth = lookupMethod(win, id);\n                if (meth && meth.val !== crossDomainFunctionWrapper) return meth.val.apply({\n                  source: window,\n                  origin: getDomain()\n                }, _arguments);\n\n                var _args = [].slice.call(_arguments);\n\n                return opts.fireAndForget ? send(win, \"postrobot_method\", {\n                  id: id,\n                  name: name,\n                  args: _args\n                }, {\n                  domain: origin,\n                  fireAndForget: !0\n                }) : send(win, \"postrobot_method\", {\n                  id: id,\n                  name: name,\n                  args: _args\n                }, {\n                  domain: origin,\n                  fireAndForget: !1\n                }).then(function (res) {\n                  return res.data.result;\n                });\n              }).catch(function (err) {\n                throw err;\n              });\n            }\n\n            crossDomainFunctionWrapper.__name__ = name;\n            crossDomainFunctionWrapper.__origin__ = origin;\n            crossDomainFunctionWrapper.__source__ = source;\n            crossDomainFunctionWrapper.__id__ = id;\n            crossDomainFunctionWrapper.origin = origin;\n            return crossDomainFunctionWrapper;\n          };\n\n          var crossDomainFunctionWrapper = getDeserializedFunction();\n          crossDomainFunctionWrapper.fireAndForget = getDeserializedFunction({\n            fireAndForget: !0\n          });\n          return crossDomainFunctionWrapper;\n        }(source, origin, serializedFunction, {\n          send: send\n        });\n      }, _deserialize.cross_domain_window = function (serializedWindow) {\n        return window_ProxyWindow.deserialize(serializedWindow, {\n          send: send\n        });\n      }, _deserialize));\n    }\n\n    var SEND_MESSAGE_STRATEGIES = {};\n\n    SEND_MESSAGE_STRATEGIES.postrobot_post_message = function (win, serializedMessage, domain) {\n      0 === domain.indexOf(\"file:\") && (domain = \"*\");\n      win.postMessage(serializedMessage, domain);\n    };\n\n    SEND_MESSAGE_STRATEGIES.postrobot_bridge = function (win, serializedMessage, domain) {\n      if (!needsBridgeForBrowser() && !isBridge()) throw new Error(\"Bridge not needed for browser\");\n      if (isSameDomain(win)) throw new Error(\"Post message through bridge disabled between same domain windows\");\n      if (!1 !== isSameTopWindow(window, win)) throw new Error(\"Can only use bridge to communicate between two different windows, not between frames\");\n      !function (win, domain, message) {\n        var messagingChild = isOpener(window, win);\n        var messagingParent = isOpener(win, window);\n        if (!messagingChild && !messagingParent) throw new Error(\"Can only send messages to and from parent and popup windows\");\n        findRemoteWindow(win).then(function (sendMessage) {\n          return sendMessage(win, domain, message);\n        });\n      }(win, domain, serializedMessage);\n    };\n\n    SEND_MESSAGE_STRATEGIES.postrobot_global = function (win, serializedMessage) {\n      if (!utils_getUserAgent(window).match(/MSIE|rv:11|trident|edge\\/12|edge\\/13/i)) throw new Error(\"Global messaging not needed for browser\");\n      if (!isSameDomain(win)) throw new Error(\"Post message through global disabled between different domain windows\");\n      if (!1 !== isSameTopWindow(window, win)) throw new Error(\"Can only use global to communicate between two different windows, not between frames\");\n      var foreignGlobal = global_getGlobal(win);\n      if (!foreignGlobal) throw new Error(\"Can not find postRobot global on foreign window\");\n      foreignGlobal.receiveMessage({\n        source: window,\n        origin: getDomain(),\n        data: serializedMessage\n      });\n    };\n\n    function send_sendMessage(win, domain, message, _ref2) {\n      var on = _ref2.on,\n          send = _ref2.send;\n      return promise_ZalgoPromise.try(function () {\n        var domainBuffer = windowStore().getOrSet(win, function () {\n          return {};\n        });\n        domainBuffer.buffer = domainBuffer.buffer || [];\n        domainBuffer.buffer.push(message);\n        domainBuffer.flush = domainBuffer.flush || promise_ZalgoPromise.flush().then(function () {\n          if (isWindowClosed(win)) throw new Error(\"Window is closed\");\n          var serializedMessage = serializeMessage(win, domain, ((_ref = {}).__post_robot_10_0_39__ = domainBuffer.buffer || [], _ref), {\n            on: on,\n            send: send\n          });\n\n          var _ref;\n\n          delete domainBuffer.buffer;\n          var strategies = Object.keys(SEND_MESSAGE_STRATEGIES);\n          var errors = [];\n\n          for (var _i2 = 0; _i2 < strategies.length; _i2++) {\n            var strategyName = strategies[_i2];\n\n            try {\n              SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n            } catch (err) {\n              errors.push(err);\n            }\n          }\n\n          if (errors.length === strategies.length) throw new Error(\"All post-robot messaging strategies failed:\\n\\n\" + errors.map(function (err, i) {\n            return i + \". \" + stringifyError(err);\n          }).join(\"\\n\\n\"));\n        });\n        return domainBuffer.flush.then(function () {\n          delete domainBuffer.flush;\n        });\n      }).then(src_util_noop);\n    }\n\n    function getResponseListener(hash) {\n      return globalStore(\"responseListeners\").get(hash);\n    }\n\n    function deleteResponseListener(hash) {\n      globalStore(\"responseListeners\").del(hash);\n    }\n\n    function isResponseListenerErrored(hash) {\n      return globalStore(\"erroredResponseListeners\").has(hash);\n    }\n\n    function getRequestListener(_ref) {\n      var name = _ref.name,\n          win = _ref.win,\n          domain = _ref.domain;\n      var requestListeners = windowStore(\"requestListeners\");\n      \"*\" === win && (win = null);\n      \"*\" === domain && (domain = null);\n      if (!name) throw new Error(\"Name required to get request listener\");\n\n      for (var _i4 = 0, _ref3 = [win, getWildcard()]; _i4 < _ref3.length; _i4++) {\n        var winQualifier = _ref3[_i4];\n\n        if (winQualifier) {\n          var nameListeners = requestListeners.get(winQualifier);\n\n          if (nameListeners) {\n            var domainListeners = nameListeners[name];\n\n            if (domainListeners) {\n              if (domain && \"string\" == typeof domain) {\n                if (domainListeners[domain]) return domainListeners[domain];\n                if (domainListeners.__domain_regex__) for (var _i6 = 0, _domainListeners$__DO2 = domainListeners.__domain_regex__; _i6 < _domainListeners$__DO2.length; _i6++) {\n                  var _domainListeners$__DO3 = _domainListeners$__DO2[_i6],\n                      listener = _domainListeners$__DO3.listener;\n                  if (matchDomain(_domainListeners$__DO3.regex, domain)) return listener;\n                }\n              }\n\n              if (domainListeners[\"*\"]) return domainListeners[\"*\"];\n            }\n          }\n        }\n      }\n    }\n\n    var _RECEIVE_MESSAGE_TYPE;\n\n    var RECEIVE_MESSAGE_TYPES = ((_RECEIVE_MESSAGE_TYPE = {}).postrobot_message_request = function (source, origin, message, _ref) {\n      var on = _ref.on,\n          send = _ref.send;\n      var options = getRequestListener({\n        name: message.name,\n        win: source,\n        domain: origin\n      });\n      var logName = \"postrobot_method\" === message.name && message.data && \"string\" == typeof message.data.name ? message.data.name + \"()\" : message.name;\n\n      function sendResponse(ack, data, error) {\n        return promise_ZalgoPromise.flush().then(function () {\n          if (!message.fireAndForget && !isWindowClosed(source)) try {\n            return send_sendMessage(source, origin, {\n              id: uniqueID(),\n              origin: getDomain(window),\n              type: \"postrobot_message_response\",\n              hash: message.hash,\n              name: message.name,\n              ack: ack,\n              data: data,\n              error: error\n            }, {\n              on: on,\n              send: send\n            });\n          } catch (err) {\n            throw new Error(\"Send response message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n          }\n        });\n      }\n\n      return promise_ZalgoPromise.all([promise_ZalgoPromise.flush().then(function () {\n        if (!message.fireAndForget && !isWindowClosed(source)) try {\n          return send_sendMessage(source, origin, {\n            id: uniqueID(),\n            origin: getDomain(window),\n            type: \"postrobot_message_ack\",\n            hash: message.hash,\n            name: message.name\n          }, {\n            on: on,\n            send: send\n          });\n        } catch (err) {\n          throw new Error(\"Send ack message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n        }\n      }), promise_ZalgoPromise.try(function () {\n        if (!options) throw new Error(\"No handler found for post message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n        if (!matchDomain(options.domain, origin)) throw new Error(\"Request origin \" + origin + \" does not match domain \" + options.domain.toString());\n        return options.handler({\n          source: source,\n          origin: origin,\n          data: message.data\n        });\n      }).then(function (data) {\n        return sendResponse(\"success\", data);\n      }, function (error) {\n        return sendResponse(\"error\", null, error);\n      })]).then(src_util_noop).catch(function (err) {\n        if (options && options.handleError) return options.handleError(err);\n        throw err;\n      });\n    }, _RECEIVE_MESSAGE_TYPE.postrobot_message_ack = function (source, origin, message) {\n      if (!isResponseListenerErrored(message.hash)) {\n        var options = getResponseListener(message.hash);\n        if (!options) throw new Error(\"No handler found for post message ack for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n\n        try {\n          if (!matchDomain(options.domain, origin)) throw new Error(\"Ack origin \" + origin + \" does not match domain \" + options.domain.toString());\n          if (source !== options.win) throw new Error(\"Ack source does not match registered window\");\n        } catch (err) {\n          options.promise.reject(err);\n        }\n\n        options.ack = !0;\n      }\n    }, _RECEIVE_MESSAGE_TYPE.postrobot_message_response = function (source, origin, message) {\n      if (!isResponseListenerErrored(message.hash)) {\n        var options = getResponseListener(message.hash);\n        if (!options) throw new Error(\"No handler found for post message response for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n        if (!matchDomain(options.domain, origin)) throw new Error(\"Response origin \" + origin + \" does not match domain \" + (pattern = options.domain, Array.isArray(pattern) ? \"(\" + pattern.join(\" | \") + \")\" : isRegex(pattern) ? \"RegExp(\" + pattern.toString() : pattern.toString()));\n        var pattern;\n        if (source !== options.win) throw new Error(\"Response source does not match registered window\");\n        deleteResponseListener(message.hash);\n        \"error\" === message.ack ? options.promise.reject(message.error) : \"success\" === message.ack && options.promise.resolve({\n          source: source,\n          origin: origin,\n          data: message.data\n        });\n      }\n    }, _RECEIVE_MESSAGE_TYPE);\n\n    function receive_receiveMessage(event, _ref2) {\n      var on = _ref2.on,\n          send = _ref2.send;\n      var receivedMessages = globalStore(\"receivedMessages\");\n\n      try {\n        if (!window || window.closed || !event.source) return;\n      } catch (err) {\n        return;\n      }\n\n      var source = event.source,\n          origin = event.origin;\n\n      var messages = function (message, source, origin, _ref) {\n        var on = _ref.on,\n            send = _ref.send;\n        var parsedMessage;\n\n        try {\n          parsedMessage = deserializeMessage(source, origin, message, {\n            on: on,\n            send: send\n          });\n        } catch (err) {\n          return;\n        }\n\n        if (parsedMessage && \"object\" == typeof parsedMessage && null !== parsedMessage) {\n          var parseMessages = parsedMessage.__post_robot_10_0_39__;\n          if (Array.isArray(parseMessages)) return parseMessages;\n        }\n      }(event.data, source, origin, {\n        on: on,\n        send: send\n      });\n\n      if (messages) {\n        markWindowKnown(source);\n\n        for (var _i2 = 0; _i2 < messages.length; _i2++) {\n          var message = messages[_i2];\n          if (receivedMessages.has(message.id)) return;\n          receivedMessages.set(message.id, !0);\n          if (isWindowClosed(source) && !message.fireAndForget) return;\n          0 === message.origin.indexOf(\"file:\") && (origin = \"file://\");\n\n          try {\n            \"postrobot_message_request\" === message.type ? RECEIVE_MESSAGE_TYPES.postrobot_message_request(source, origin, message, {\n              on: on,\n              send: send\n            }) : \"postrobot_message_response\" === message.type ? RECEIVE_MESSAGE_TYPES.postrobot_message_response(source, origin, message) : \"postrobot_message_ack\" === message.type && RECEIVE_MESSAGE_TYPES.postrobot_message_ack(source, origin, message);\n          } catch (err) {\n            setTimeout(function () {\n              throw err;\n            }, 0);\n          }\n        }\n      }\n    }\n\n    function on_on(name, options, handler) {\n      if (!name) throw new Error(\"Expected name\");\n\n      if (\"function\" == typeof (options = options || {})) {\n        handler = options;\n        options = {};\n      }\n\n      if (!handler) throw new Error(\"Expected handler\");\n      (options = options || {}).name = name;\n      options.handler = handler || options.handler;\n      var win = options.window;\n      var domain = options.domain;\n\n      var requestListener = function addRequestListener(_ref4, listener) {\n        var name = _ref4.name,\n            win = _ref4.win,\n            domain = _ref4.domain;\n        var requestListeners = windowStore(\"requestListeners\");\n        if (!name || \"string\" != typeof name) throw new Error(\"Name required to add request listener\");\n\n        if (Array.isArray(win)) {\n          var listenersCollection = [];\n\n          for (var _i8 = 0, _win2 = win; _i8 < _win2.length; _i8++) listenersCollection.push(addRequestListener({\n            name: name,\n            domain: domain,\n            win: _win2[_i8]\n          }, listener));\n\n          return {\n            cancel: function () {\n              for (var _i10 = 0; _i10 < listenersCollection.length; _i10++) listenersCollection[_i10].cancel();\n            }\n          };\n        }\n\n        if (Array.isArray(domain)) {\n          var _listenersCollection = [];\n\n          for (var _i12 = 0, _domain2 = domain; _i12 < _domain2.length; _i12++) _listenersCollection.push(addRequestListener({\n            name: name,\n            win: win,\n            domain: _domain2[_i12]\n          }, listener));\n\n          return {\n            cancel: function () {\n              for (var _i14 = 0; _i14 < _listenersCollection.length; _i14++) _listenersCollection[_i14].cancel();\n            }\n          };\n        }\n\n        var existingListener = getRequestListener({\n          name: name,\n          win: win,\n          domain: domain\n        });\n        win && \"*\" !== win || (win = getWildcard());\n        domain = domain || \"*\";\n        if (existingListener) throw win && domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString() + \" for \" + (win === getWildcard() ? \"wildcard\" : \"specified\") + \" window\") : win ? new Error(\"Request listener already exists for \" + name + \" for \" + (win === getWildcard() ? \"wildcard\" : \"specified\") + \" window\") : domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString()) : new Error(\"Request listener already exists for \" + name);\n        var nameListeners = requestListeners.getOrSet(win, function () {\n          return {};\n        });\n        var domainListeners = util_getOrSet(nameListeners, name, function () {\n          return {};\n        });\n        var strDomain = domain.toString();\n        var regexListeners;\n        var regexListener;\n        util_isRegex(domain) ? (regexListeners = util_getOrSet(domainListeners, \"__domain_regex__\", function () {\n          return [];\n        })).push(regexListener = {\n          regex: domain,\n          listener: listener\n        }) : domainListeners[strDomain] = listener;\n        return {\n          cancel: function () {\n            delete domainListeners[strDomain];\n\n            if (regexListener) {\n              regexListeners.splice(regexListeners.indexOf(regexListener, 1));\n              regexListeners.length || delete domainListeners.__domain_regex__;\n            }\n\n            Object.keys(domainListeners).length || delete nameListeners[name];\n            win && !Object.keys(nameListeners).length && requestListeners.del(win);\n          }\n        };\n      }({\n        name: name,\n        win: win,\n        domain: domain\n      }, {\n        handler: options.handler,\n        handleError: options.errorHandler || function (err) {\n          throw err;\n        },\n        window: win,\n        domain: domain || \"*\",\n        name: name\n      });\n\n      return {\n        cancel: function () {\n          requestListener.cancel();\n        }\n      };\n    }\n\n    var send_send = function send(win, name, data, options) {\n      var domainMatcher = (options = options || {}).domain || \"*\";\n      var responseTimeout = options.timeout || -1;\n      var childTimeout = options.timeout || 5e3;\n      var fireAndForget = options.fireAndForget || !1;\n      return promise_ZalgoPromise.try(function () {\n        !function (name, win, domain) {\n          if (!name) throw new Error(\"Expected name\");\n          if (domain && \"string\" != typeof domain && !Array.isArray(domain) && !util_isRegex(domain)) throw new TypeError(\"Can not send \" + name + \". Expected domain \" + JSON.stringify(domain) + \" to be a string, array, or regex\");\n          if (isWindowClosed(win)) throw new Error(\"Can not send \" + name + \". Target window is closed\");\n        }(name, win, domainMatcher);\n        if (function (parent, child) {\n          var actualParent = getAncestor(child);\n          if (actualParent) return actualParent === parent;\n          if (child === parent) return !1;\n          if (getTop(child) === child) return !1;\n\n          for (var _i15 = 0, _getFrames8 = getFrames(parent); _i15 < _getFrames8.length; _i15++) if (_getFrames8[_i15] === child) return !0;\n\n          return !1;\n        }(window, win)) return awaitWindowHello(win, childTimeout);\n      }).then(function (_temp) {\n        return function (win, targetDomain, actualDomain, _ref) {\n          var send = _ref.send;\n          return promise_ZalgoPromise.try(function () {\n            return \"string\" == typeof targetDomain ? targetDomain : promise_ZalgoPromise.try(function () {\n              return actualDomain || sayHello(win, {\n                send: send\n              }).then(function (_ref2) {\n                return _ref2.domain;\n              });\n            }).then(function (normalizedDomain) {\n              if (!matchDomain(targetDomain, targetDomain)) throw new Error(\"Domain \" + stringify(targetDomain) + \" does not match \" + stringify(targetDomain));\n              return normalizedDomain;\n            });\n          });\n        }(win, domainMatcher, (void 0 === _temp ? {} : _temp).domain, {\n          send: send\n        });\n      }).then(function (targetDomain) {\n        var domain = targetDomain;\n        var logName = \"postrobot_method\" === name && data && \"string\" == typeof data.name ? data.name + \"()\" : name;\n        var promise = new promise_ZalgoPromise();\n        var hash = name + \"_\" + uniqueID();\n\n        if (!fireAndForget) {\n          var responseListener = {\n            name: name,\n            win: win,\n            domain: domain,\n            promise: promise\n          };\n          !function (hash, listener) {\n            globalStore(\"responseListeners\").set(hash, listener);\n          }(hash, responseListener);\n          var reqPromises = windowStore(\"requestPromises\").getOrSet(win, function () {\n            return [];\n          });\n          reqPromises.push(promise);\n          promise.catch(function () {\n            !function (hash) {\n              globalStore(\"erroredResponseListeners\").set(hash, !0);\n            }(hash);\n            deleteResponseListener(hash);\n          });\n          var totalAckTimeout = function (win) {\n            return windowStore(\"knownWindows\").get(win, !1);\n          }(win) ? 1e4 : 2e3;\n          var totalResTimeout = responseTimeout;\n          var ackTimeout = totalAckTimeout;\n          var resTimeout = totalResTimeout;\n          var interval = safeInterval(function () {\n            if (isWindowClosed(win)) return promise.reject(new Error(\"Window closed for \" + name + \" before \" + (responseListener.ack ? \"response\" : \"ack\")));\n            if (responseListener.cancelled) return promise.reject(new Error(\"Response listener was cancelled for \" + name));\n            ackTimeout = Math.max(ackTimeout - 500, 0);\n            -1 !== resTimeout && (resTimeout = Math.max(resTimeout - 500, 0));\n            return responseListener.ack || 0 !== ackTimeout ? 0 === resTimeout ? promise.reject(new Error(\"No response for postMessage \" + logName + \" in \" + getDomain() + \" in \" + totalResTimeout + \"ms\")) : void 0 : promise.reject(new Error(\"No ack for postMessage \" + logName + \" in \" + getDomain() + \" in \" + totalAckTimeout + \"ms\"));\n          }, 500);\n          promise.finally(function () {\n            interval.cancel();\n            reqPromises.splice(reqPromises.indexOf(promise, 1));\n          }).catch(src_util_noop);\n        }\n\n        return send_sendMessage(win, domain, {\n          id: uniqueID(),\n          origin: getDomain(window),\n          type: \"postrobot_message_request\",\n          hash: hash,\n          name: name,\n          data: data,\n          fireAndForget: fireAndForget\n        }, {\n          on: on_on,\n          send: send\n        }).then(function () {\n          return fireAndForget ? promise.resolve() : promise;\n        }, function (err) {\n          throw new Error(\"Send request message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n        });\n      });\n    };\n\n    function setup_serializeMessage(destination, domain, obj) {\n      return serializeMessage(destination, domain, obj, {\n        on: on_on,\n        send: send_send\n      });\n    }\n\n    function setup_deserializeMessage(source, origin, message) {\n      return deserializeMessage(source, origin, message, {\n        on: on_on,\n        send: send_send\n      });\n    }\n\n    function setup_toProxyWindow(win) {\n      return window_ProxyWindow.toProxyWindow(win, {\n        send: send_send\n      });\n    }\n\n    function cleanUpWindow(win) {\n      for (var _i2 = 0, _requestPromises$get2 = windowStore(\"requestPromises\").get(win, []); _i2 < _requestPromises$get2.length; _i2++) _requestPromises$get2[_i2].reject(new Error(\"Window \" + (isWindowClosed(win) ? \"closed\" : \"cleaned up\") + \" before response\")).catch(src_util_noop);\n    }\n\n    var src_bridge;\n    src_bridge = {\n      setupBridge: setupBridge,\n      openBridge: function (url, domain) {\n        var bridges = globalStore(\"bridges\");\n        var bridgeFrames = globalStore(\"bridgeFrames\");\n        domain = domain || getDomainFromUrl(url);\n        return bridges.getOrSet(domain, function () {\n          return promise_ZalgoPromise.try(function () {\n            if (getDomain() === domain) throw new Error(\"Can not open bridge on the same domain as current domain: \" + domain);\n            var name = getBridgeName(domain);\n            if (getFrameByName(window, name)) throw new Error(\"Frame with name \" + name + \" already exists on page\");\n\n            var iframe = function (name, url) {\n              var iframe = document.createElement(\"iframe\");\n              iframe.setAttribute(\"name\", name);\n              iframe.setAttribute(\"id\", name);\n              iframe.setAttribute(\"style\", \"display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;\");\n              iframe.setAttribute(\"frameborder\", \"0\");\n              iframe.setAttribute(\"border\", \"0\");\n              iframe.setAttribute(\"scrolling\", \"no\");\n              iframe.setAttribute(\"allowTransparency\", \"true\");\n              iframe.setAttribute(\"tabindex\", \"-1\");\n              iframe.setAttribute(\"hidden\", \"true\");\n              iframe.setAttribute(\"title\", \"\");\n              iframe.setAttribute(\"role\", \"presentation\");\n              iframe.src = url;\n              return iframe;\n            }(name, url);\n\n            bridgeFrames.set(domain, iframe);\n            return documentBodyReady.then(function (body) {\n              body.appendChild(iframe);\n              var bridge = iframe.contentWindow;\n              return new promise_ZalgoPromise(function (resolve, reject) {\n                iframe.addEventListener(\"load\", resolve);\n                iframe.addEventListener(\"error\", reject);\n              }).then(function () {\n                return awaitWindowHello(bridge, 5e3, \"Bridge \" + url);\n              }).then(function () {\n                return bridge;\n              });\n            });\n          });\n        });\n      },\n      linkWindow: linkWindow,\n      linkUrl: function (win, url) {\n        linkWindow({\n          win: win,\n          domain: getDomainFromUrl(url)\n        });\n      },\n      isBridge: isBridge,\n      needsBridge: needsBridge,\n      needsBridgeForBrowser: needsBridgeForBrowser,\n      hasBridge: function (url, domain) {\n        return globalStore(\"bridges\").has(domain || getDomainFromUrl(url));\n      },\n      needsBridgeForWin: needsBridgeForWin,\n      needsBridgeForDomain: needsBridgeForDomain,\n      destroyBridges: function () {\n        var bridges = globalStore(\"bridges\");\n        var bridgeFrames = globalStore(\"bridgeFrames\");\n\n        for (var _i4 = 0, _bridgeFrames$keys2 = bridgeFrames.keys(); _i4 < _bridgeFrames$keys2.length; _i4++) {\n          var frame = bridgeFrames.get(_bridgeFrames$keys2[_i4]);\n          frame && frame.parentNode && frame.parentNode.removeChild(frame);\n        }\n\n        bridgeFrames.reset();\n        bridges.reset();\n      }\n    };\n\n    function lib_global_getGlobal(win) {\n      void 0 === win && (win = window);\n      if (!isSameDomain(win)) throw new Error(\"Can not get global for window on different domain\");\n      win.__zoid_9_0_58__ || (win.__zoid_9_0_58__ = {});\n      return win.__zoid_9_0_58__;\n    }\n\n    function getProxyObject(obj) {\n      return {\n        get: function () {\n          var _this = this;\n\n          return promise_ZalgoPromise.try(function () {\n            if (_this.source && _this.source !== window) throw new Error(\"Can not call get on proxy object from a remote window\");\n            return obj;\n          });\n        }\n      };\n    }\n\n    var PROP_TYPE = {\n      STRING: \"string\",\n      OBJECT: \"object\",\n      FUNCTION: \"function\",\n      BOOLEAN: \"boolean\",\n      NUMBER: \"number\",\n      ARRAY: \"array\"\n    };\n    var PROP_SERIALIZATION = {\n      JSON: \"json\",\n      DOTIFY: \"dotify\",\n      BASE64: \"base64\"\n    };\n    var CONTEXT = WINDOW_TYPE;\n    var EVENT = {\n      RENDER: \"zoid-render\",\n      RENDERED: \"zoid-rendered\",\n      DISPLAY: \"zoid-display\",\n      ERROR: \"zoid-error\",\n      CLOSE: \"zoid-close\",\n      DESTROY: \"zoid-destroy\",\n      PROPS: \"zoid-props\",\n      RESIZE: \"zoid-resize\",\n      FOCUS: \"zoid-focus\"\n    };\n\n    function normalizeChildProp(propsDef, props, key, value, helpers) {\n      if (!propsDef.hasOwnProperty(key)) return value;\n      var prop = propsDef[key];\n      return \"function\" == typeof prop.childDecorate ? prop.childDecorate({\n        value: value,\n        uid: helpers.uid,\n        close: helpers.close,\n        focus: helpers.focus,\n        onError: helpers.onError,\n        onProps: helpers.onProps,\n        resize: helpers.resize,\n        getParent: helpers.getParent,\n        getParentDomain: helpers.getParentDomain,\n        show: helpers.show,\n        hide: helpers.hide\n      }) : value;\n    }\n\n    function parseChildWindowName(windowName) {\n      return inlineMemoize(parseChildWindowName, function () {\n        if (!windowName) throw new Error(\"No window name\");\n\n        var _windowName$split = windowName.split(\"__\"),\n            zoidcomp = _windowName$split[1],\n            name = _windowName$split[2],\n            encodedPayload = _windowName$split[3];\n\n        if (\"zoid\" !== zoidcomp) throw new Error(\"Window not rendered by zoid - got \" + zoidcomp);\n        if (!name) throw new Error(\"Expected component name\");\n        if (!encodedPayload) throw new Error(\"Expected encoded payload\");\n\n        try {\n          return JSON.parse(function (str) {\n            if (\"function\" == typeof atob) return decodeURIComponent([].map.call(atob(str), function (c) {\n              return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n            }).join(\"\"));\n            if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"base64\").toString(\"utf8\");\n            throw new Error(\"Can not find window.atob or Buffer\");\n          }(encodedPayload));\n        } catch (err) {\n          throw new Error(\"Can not decode window name payload: \" + encodedPayload + \": \" + stringifyError(err));\n        }\n      }, [windowName]);\n    }\n\n    function getChildPayload() {\n      try {\n        return parseChildWindowName(window.name);\n      } catch (err) {}\n    }\n\n    function child_focus() {\n      return promise_ZalgoPromise.try(function () {\n        window.focus();\n      });\n    }\n\n    function child_destroy() {\n      return promise_ZalgoPromise.try(function () {\n        window.close();\n      });\n    }\n\n    function props_getQueryParam(prop, key, value) {\n      return promise_ZalgoPromise.try(function () {\n        return \"function\" == typeof prop.queryParam ? prop.queryParam({\n          value: value\n        }) : \"string\" == typeof prop.queryParam ? prop.queryParam : key;\n      });\n    }\n\n    function getQueryValue(prop, key, value) {\n      return promise_ZalgoPromise.try(function () {\n        return \"function\" == typeof prop.queryValue && isDefined(value) ? prop.queryValue({\n          value: value\n        }) : value;\n      });\n    }\n\n    function parentComponent(options, overrides, parentWin) {\n      void 0 === overrides && (overrides = {});\n      void 0 === parentWin && (parentWin = window);\n      var propsDef = options.propsDef,\n          containerTemplate = options.containerTemplate,\n          prerenderTemplate = options.prerenderTemplate,\n          tag = options.tag,\n          name = options.name,\n          attributes = options.attributes,\n          dimensions = options.dimensions,\n          autoResize = options.autoResize,\n          url = options.url,\n          domainMatch = options.domain;\n      var initPromise = new promise_ZalgoPromise();\n      var handledErrors = [];\n      var clean = cleanup();\n      var state = {};\n      var internalState = {\n        visible: !0\n      };\n      var event = overrides.event ? overrides.event : (triggered = {}, handlers = {}, {\n        on: function (eventName, handler) {\n          var handlerList = handlers[eventName] = handlers[eventName] || [];\n          handlerList.push(handler);\n          var cancelled = !1;\n          return {\n            cancel: function () {\n              if (!cancelled) {\n                cancelled = !0;\n                handlerList.splice(handlerList.indexOf(handler), 1);\n              }\n            }\n          };\n        },\n        once: function (eventName, handler) {\n          var listener = this.on(eventName, function () {\n            listener.cancel();\n            handler();\n          });\n          return listener;\n        },\n        trigger: function (eventName) {\n          for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) args[_key3 - 1] = arguments[_key3];\n\n          var handlerList = handlers[eventName];\n          var promises = [];\n\n          if (handlerList) {\n            var _loop = function (_i4) {\n              var handler = handlerList[_i4];\n              promises.push(promise_ZalgoPromise.try(function () {\n                return handler.apply(void 0, args);\n              }));\n            };\n\n            for (var _i4 = 0; _i4 < handlerList.length; _i4++) _loop(_i4);\n          }\n\n          return promise_ZalgoPromise.all(promises).then(src_util_noop);\n        },\n        triggerOnce: function (eventName) {\n          if (triggered[eventName]) return promise_ZalgoPromise.resolve();\n          triggered[eventName] = !0;\n\n          for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) args[_key4 - 1] = arguments[_key4];\n\n          return this.trigger.apply(this, [eventName].concat(args));\n        },\n        reset: function () {\n          handlers = {};\n        }\n      });\n      var triggered, handlers;\n      var props = overrides.props ? overrides.props : {};\n      var currentProxyWin;\n      var currentProxyContainer;\n      var childComponent;\n      var onErrorOverride = overrides.onError;\n      var getProxyContainerOverride = overrides.getProxyContainer;\n      var showOverride = overrides.show;\n      var hideOverride = overrides.hide;\n      var closeOverride = overrides.close;\n      var renderContainerOverride = overrides.renderContainer;\n      var getProxyWindowOverride = overrides.getProxyWindow;\n      var setProxyWinOverride = overrides.setProxyWin;\n      var openFrameOverride = overrides.openFrame;\n      var openPrerenderFrameOverride = overrides.openPrerenderFrame;\n      var prerenderOverride = overrides.prerender;\n      var openOverride = overrides.open;\n      var openPrerenderOverride = overrides.openPrerender;\n      var watchForUnloadOverride = overrides.watchForUnload;\n      var getInternalStateOverride = overrides.getInternalState;\n      var setInternalStateOverride = overrides.setInternalState;\n\n      var getPropsForChild = function (domain) {\n        var result = {};\n\n        for (var _i2 = 0, _Object$keys2 = Object.keys(props); _i2 < _Object$keys2.length; _i2++) {\n          var key = _Object$keys2[_i2];\n          var prop = propsDef[key];\n          prop && !1 === prop.sendToChild || prop && prop.sameDomain && !matchDomain(domain, getDomain(window)) || (result[key] = props[key]);\n        }\n\n        return promise_ZalgoPromise.hash(result);\n      };\n\n      var getInternalState = function () {\n        return promise_ZalgoPromise.try(function () {\n          return getInternalStateOverride ? getInternalStateOverride() : internalState;\n        });\n      };\n\n      var setInternalState = function (newInternalState) {\n        return promise_ZalgoPromise.try(function () {\n          return setInternalStateOverride ? setInternalStateOverride(newInternalState) : internalState = _extends({}, internalState, newInternalState);\n        });\n      };\n\n      var getProxyWindow = function () {\n        return getProxyWindowOverride ? getProxyWindowOverride() : promise_ZalgoPromise.try(function () {\n          var windowProp = props.window;\n\n          if (windowProp) {\n            var _proxyWin = setup_toProxyWindow(windowProp);\n\n            clean.register(function () {\n              return windowProp.close();\n            });\n            return _proxyWin;\n          }\n\n          return new window_ProxyWindow({\n            send: send_send\n          });\n        });\n      };\n\n      var getProxyContainer = function (container) {\n        return getProxyContainerOverride ? getProxyContainerOverride(container) : promise_ZalgoPromise.try(function () {\n          return elementReady(container);\n        }).then(function (containerElement) {\n          isShadowElement(containerElement) && (containerElement = function (element) {\n            var shadowHost = function (element) {\n              var shadowRoot = function (element) {\n                for (; element.parentNode;) element = element.parentNode;\n\n                if (isShadowElement(element)) return element;\n              }(element);\n\n              if (shadowRoot.host) return shadowRoot.host;\n            }(element);\n\n            if (!shadowHost) throw new Error(\"Element is not in shadow dom\");\n            if (isShadowElement(shadowHost)) throw new Error(\"Host element is also in shadow dom\");\n            var slotName = \"shadow-slot-\" + uniqueID();\n            var slot = document.createElement(\"slot\");\n            slot.setAttribute(\"name\", slotName);\n            element.appendChild(slot);\n            var slotProvider = document.createElement(\"div\");\n            slotProvider.setAttribute(\"slot\", slotName);\n            shadowHost.appendChild(slotProvider);\n            return slotProvider;\n          }(containerElement));\n          return getProxyObject(containerElement);\n        });\n      };\n\n      var setProxyWin = function (proxyWin) {\n        return setProxyWinOverride ? setProxyWinOverride(proxyWin) : promise_ZalgoPromise.try(function () {\n          currentProxyWin = proxyWin;\n        });\n      };\n\n      var show = function () {\n        return showOverride ? showOverride() : promise_ZalgoPromise.hash({\n          setState: setInternalState({\n            visible: !0\n          }),\n          showElement: currentProxyContainer ? currentProxyContainer.get().then(showElement) : null\n        }).then(src_util_noop);\n      };\n\n      var hide = function () {\n        return hideOverride ? hideOverride() : promise_ZalgoPromise.hash({\n          setState: setInternalState({\n            visible: !1\n          }),\n          showElement: currentProxyContainer ? currentProxyContainer.get().then(hideElement) : null\n        }).then(src_util_noop);\n      };\n\n      var getUrl = function () {\n        return \"function\" == typeof url ? url({\n          props: props\n        }) : url;\n      };\n\n      var getAttributes = function () {\n        return \"function\" == typeof attributes ? attributes({\n          props: props\n        }) : attributes;\n      };\n\n      var getChildDomain = function () {\n        return domainMatch && \"string\" == typeof domainMatch ? domainMatch : getDomainFromUrl(getUrl());\n      };\n\n      var getDomainMatcher = function () {\n        return domainMatch && util_isRegex(domainMatch) ? domainMatch : getChildDomain();\n      };\n\n      var openFrame = function (context, _ref) {\n        var windowName = _ref.windowName;\n        return openFrameOverride ? openFrameOverride(context, {\n          windowName: windowName\n        }) : promise_ZalgoPromise.try(function () {\n          if (context === CONTEXT.IFRAME) return getProxyObject(dom_iframe({\n            attributes: _extends({\n              name: windowName,\n              title: name\n            }, getAttributes().iframe)\n          }));\n        });\n      };\n\n      var openPrerenderFrame = function (context) {\n        return openPrerenderFrameOverride ? openPrerenderFrameOverride(context) : promise_ZalgoPromise.try(function () {\n          if (context === CONTEXT.IFRAME) return getProxyObject(dom_iframe({\n            attributes: _extends({\n              name: \"__zoid_prerender_frame__\" + name + \"_\" + uniqueID() + \"__\",\n              title: \"prerender__\" + name\n            }, getAttributes().iframe)\n          }));\n        });\n      };\n\n      var openPrerender = function (context, proxyWin, proxyPrerenderFrame) {\n        return openPrerenderOverride ? openPrerenderOverride(context, proxyWin, proxyPrerenderFrame) : promise_ZalgoPromise.try(function () {\n          if (context === CONTEXT.IFRAME) {\n            if (!proxyPrerenderFrame) throw new Error(\"Expected proxy frame to be passed\");\n            return proxyPrerenderFrame.get().then(function (prerenderFrame) {\n              clean.register(function () {\n                return destroyElement(prerenderFrame);\n              });\n              return awaitFrameWindow(prerenderFrame).then(function (prerenderFrameWindow) {\n                return assertSameDomain(prerenderFrameWindow);\n              }).then(function (win) {\n                return setup_toProxyWindow(win);\n              });\n            });\n          }\n\n          if (context === CONTEXT.POPUP) return proxyWin;\n          throw new Error(\"No render context available for \" + context);\n        });\n      };\n\n      var focus = function () {\n        return promise_ZalgoPromise.try(function () {\n          if (currentProxyWin) return promise_ZalgoPromise.all([event.trigger(EVENT.FOCUS), currentProxyWin.focus()]).then(src_util_noop);\n        });\n      };\n\n      var getWindowRef = function (target, domain, uid, context) {\n        if (domain === getDomain(window)) {\n          var global = lib_global_getGlobal(window);\n          global.windows = global.windows || {};\n          global.windows[uid] = window;\n          clean.register(function () {\n            delete global.windows[uid];\n          });\n          return {\n            type: \"global\",\n            uid: uid\n          };\n        }\n\n        return context === CONTEXT.POPUP ? {\n          type: \"opener\"\n        } : {\n          type: \"parent\",\n          distance: getDistanceFromTop(window)\n        };\n      };\n\n      var initChild = function (childExports) {\n        return promise_ZalgoPromise.try(function () {\n          childComponent = childExports;\n          initPromise.resolve();\n          clean.register(function () {\n            return childExports.close.fireAndForget().catch(src_util_noop);\n          });\n        });\n      };\n\n      var resize = function (_ref2) {\n        var width = _ref2.width,\n            height = _ref2.height;\n        return promise_ZalgoPromise.try(function () {\n          event.trigger(EVENT.RESIZE, {\n            width: width,\n            height: height\n          });\n        });\n      };\n\n      var destroy = function (err) {\n        return promise_ZalgoPromise.try(function () {\n          return event.trigger(EVENT.DESTROY);\n        }).catch(src_util_noop).then(function () {\n          return clean.all();\n        }).then(function () {\n          initPromise.asyncReject(err || new Error(\"Component destroyed\"));\n        });\n      };\n\n      var close = function () {\n        return closeOverride ? closeOverride() : promise_ZalgoPromise.try(function () {\n          return event.trigger(EVENT.CLOSE);\n        }).then(function () {\n          return destroy(new Error(\"Window closed\"));\n        });\n      };\n\n      var open = function (context, _ref3) {\n        var proxyWin = _ref3.proxyWin,\n            proxyFrame = _ref3.proxyFrame,\n            windowName = _ref3.windowName;\n        return openOverride ? openOverride(context, {\n          proxyWin: proxyWin,\n          proxyFrame: proxyFrame,\n          windowName: windowName\n        }) : promise_ZalgoPromise.try(function () {\n          if (context === CONTEXT.IFRAME) {\n            if (!proxyFrame) throw new Error(\"Expected proxy frame to be passed\");\n            return proxyFrame.get().then(function (frame) {\n              return awaitFrameWindow(frame).then(function (win) {\n                var frameWatcher = function (element, handler) {\n                  handler = once(handler);\n                  var interval;\n                  isElementClosed(element) ? handler() : interval = safeInterval(function () {\n                    if (isElementClosed(element)) {\n                      interval.cancel();\n                      handler();\n                    }\n                  }, 50);\n                  return {\n                    cancel: function () {\n                      interval && interval.cancel();\n                    }\n                  };\n                }(frame, close);\n\n                clean.register(function () {\n                  return frameWatcher.cancel();\n                });\n                clean.register(function () {\n                  return destroyElement(frame);\n                });\n                clean.register(function () {\n                  return cleanUpWindow(win);\n                });\n                return win;\n              });\n            });\n          }\n\n          if (context === CONTEXT.POPUP) {\n            var width = dimensions.width,\n                height = dimensions.height;\n            width = normalizeDimension(width, window.outerWidth);\n            height = normalizeDimension(height, window.outerWidth);\n\n            var win = function (url, options) {\n              var width = (options = options || {}).width,\n                  height = options.height;\n              var top = 0;\n              var left = 0;\n              width && (window.outerWidth ? left = Math.round((window.outerWidth - width) / 2) + window.screenX : window.screen.width && (left = Math.round((window.screen.width - width) / 2)));\n              height && (window.outerHeight ? top = Math.round((window.outerHeight - height) / 2) + window.screenY : window.screen.height && (top = Math.round((window.screen.height - height) / 2)));\n              width && height && (options = _extends({\n                top: top,\n                left: left,\n                width: width,\n                height: height,\n                status: 1,\n                toolbar: 0,\n                menubar: 0,\n                resizable: 1,\n                scrollbars: 1\n              }, options));\n              var name = options.name || \"\";\n              delete options.name;\n              var params = Object.keys(options).map(function (key) {\n                if (null != options[key]) return key + \"=\" + stringify(options[key]);\n              }).filter(Boolean).join(\",\");\n              var win;\n\n              try {\n                win = window.open(\"\", name, params, !0);\n              } catch (err) {\n                throw new PopupOpenError(\"Can not open popup window - \" + (err.stack || err.message));\n              }\n\n              if (isWindowClosed(win)) {\n                var err;\n                throw new PopupOpenError(\"Can not open popup window - blocked\");\n              }\n\n              window.addEventListener(\"unload\", function () {\n                return win.close();\n              });\n              return win;\n            }(0, _extends({\n              name: windowName,\n              width: width,\n              height: height\n            }, getAttributes().popup));\n\n            clean.register(function () {\n              return closeWindow(win);\n            });\n            clean.register(function () {\n              return cleanUpWindow(win);\n            });\n            return win;\n          }\n\n          throw new Error(\"No render context available for \" + context);\n        }).then(function (win) {\n          proxyWin.setWindow(win, {\n            send: send_send\n          });\n          return proxyWin;\n        });\n      };\n\n      var watchForUnload = function () {\n        return promise_ZalgoPromise.try(function () {\n          var unloadWindowListener = addEventListener(window, \"unload\", once(function () {\n            destroy(new Error(\"Window navigated away\"));\n          }));\n          var closeParentWindowListener = onCloseWindow(parentWin, destroy, 3e3);\n          clean.register(closeParentWindowListener.cancel);\n          clean.register(unloadWindowListener.cancel);\n          if (watchForUnloadOverride) return watchForUnloadOverride();\n        });\n      };\n\n      var checkWindowClose = function (proxyWin) {\n        var closed = !1;\n        return proxyWin.isClosed().then(function (isClosed) {\n          if (isClosed) {\n            closed = !0;\n            return close();\n          }\n\n          return promise_ZalgoPromise.delay(200).then(function () {\n            return proxyWin.isClosed();\n          }).then(function (secondIsClosed) {\n            if (secondIsClosed) {\n              closed = !0;\n              return close();\n            }\n          });\n        }).then(function () {\n          return closed;\n        });\n      };\n\n      var onError = function (err) {\n        return onErrorOverride ? onErrorOverride(err) : promise_ZalgoPromise.try(function () {\n          if (-1 === handledErrors.indexOf(err)) {\n            handledErrors.push(err);\n            initPromise.asyncReject(err);\n            return event.trigger(EVENT.ERROR, err);\n          }\n        });\n      };\n\n      initChild.onError = onError;\n\n      var renderTemplate = function (renderer, _ref6) {\n        return renderer({\n          container: _ref6.container,\n          context: _ref6.context,\n          uid: _ref6.uid,\n          doc: _ref6.doc,\n          frame: _ref6.frame,\n          prerenderFrame: _ref6.prerenderFrame,\n          focus: focus,\n          close: close,\n          state: state,\n          props: props,\n          tag: tag,\n          dimensions: dimensions,\n          event: event\n        });\n      };\n\n      var prerender = function (proxyPrerenderWin, _ref7) {\n        var context = _ref7.context,\n            uid = _ref7.uid;\n        return prerenderOverride ? prerenderOverride(proxyPrerenderWin, {\n          context: context,\n          uid: uid\n        }) : promise_ZalgoPromise.try(function () {\n          if (prerenderTemplate) {\n            var prerenderWindow = proxyPrerenderWin.getWindow();\n\n            if (prerenderWindow && isSameDomain(prerenderWindow) && function (win) {\n              try {\n                if (!win.location.href) return !0;\n                if (\"about:blank\" === win.location.href) return !0;\n              } catch (err) {}\n\n              return !1;\n            }(prerenderWindow)) {\n              var doc = (prerenderWindow = assertSameDomain(prerenderWindow)).document;\n              var el = renderTemplate(prerenderTemplate, {\n                context: context,\n                uid: uid,\n                doc: doc\n              });\n\n              if (el) {\n                if (el.ownerDocument !== doc) throw new Error(\"Expected prerender template to have been created with document from child window\");\n                !function (win, el) {\n                  var tag = el.tagName.toLowerCase();\n                  if (\"html\" !== tag) throw new Error(\"Expected element to be html, got \" + tag);\n                  var documentElement = win.document.documentElement;\n\n                  for (var _i6 = 0, _arrayFrom2 = arrayFrom(documentElement.children); _i6 < _arrayFrom2.length; _i6++) documentElement.removeChild(_arrayFrom2[_i6]);\n\n                  for (var _i8 = 0, _arrayFrom4 = arrayFrom(el.children); _i8 < _arrayFrom4.length; _i8++) documentElement.appendChild(_arrayFrom4[_i8]);\n                }(prerenderWindow, el);\n                var _autoResize$width = autoResize.width,\n                    width = void 0 !== _autoResize$width && _autoResize$width,\n                    _autoResize$height = autoResize.height,\n                    height = void 0 !== _autoResize$height && _autoResize$height,\n                    _autoResize$element = autoResize.element,\n                    element = void 0 === _autoResize$element ? \"body\" : _autoResize$element;\n\n                if ((element = getElementSafe(element, doc)) && (width || height)) {\n                  var prerenderResizeListener = onResize(element, function (_ref8) {\n                    resize({\n                      width: width ? _ref8.width : void 0,\n                      height: height ? _ref8.height : void 0\n                    });\n                  }, {\n                    width: width,\n                    height: height,\n                    win: prerenderWindow\n                  });\n                  event.on(EVENT.RENDERED, prerenderResizeListener.cancel);\n                }\n              }\n            }\n          }\n        });\n      };\n\n      var renderContainer = function (proxyContainer, _ref9) {\n        var proxyFrame = _ref9.proxyFrame,\n            proxyPrerenderFrame = _ref9.proxyPrerenderFrame,\n            context = _ref9.context,\n            uid = _ref9.uid;\n        return renderContainerOverride ? renderContainerOverride(proxyContainer, {\n          proxyFrame: proxyFrame,\n          proxyPrerenderFrame: proxyPrerenderFrame,\n          context: context,\n          uid: uid\n        }) : promise_ZalgoPromise.hash({\n          container: proxyContainer.get(),\n          frame: proxyFrame ? proxyFrame.get() : null,\n          prerenderFrame: proxyPrerenderFrame ? proxyPrerenderFrame.get() : null,\n          internalState: getInternalState()\n        }).then(function (_ref10) {\n          var container = _ref10.container,\n              visible = _ref10.internalState.visible;\n          var innerContainer = renderTemplate(containerTemplate, {\n            context: context,\n            uid: uid,\n            container: container,\n            frame: _ref10.frame,\n            prerenderFrame: _ref10.prerenderFrame,\n            doc: document\n          });\n\n          if (innerContainer) {\n            visible || hideElement(innerContainer);\n            appendChild(container, innerContainer);\n            clean.register(function () {\n              return destroyElement(innerContainer);\n            });\n            return currentProxyContainer = getProxyObject(innerContainer);\n          }\n        });\n      };\n\n      var getHelpers = function () {\n        return {\n          state: state,\n          event: event,\n          close: close,\n          focus: focus,\n          resize: resize,\n          onError: onError,\n          updateProps: updateProps,\n          show: show,\n          hide: hide\n        };\n      };\n\n      var setProps = function (newProps, isUpdate) {\n        void 0 === isUpdate && (isUpdate = !1);\n        var helpers = getHelpers();\n        !function (propsDef, props, inputProps, helpers, isUpdate) {\n          void 0 === isUpdate && (isUpdate = !1);\n          extend(props, inputProps = inputProps || {});\n          var propNames = isUpdate ? [] : [].concat(Object.keys(propsDef));\n\n          for (var _i2 = 0, _Object$keys2 = Object.keys(inputProps); _i2 < _Object$keys2.length; _i2++) {\n            var key = _Object$keys2[_i2];\n            -1 === propNames.indexOf(key) && propNames.push(key);\n          }\n\n          var aliases = [];\n          var state = helpers.state,\n              close = helpers.close,\n              focus = helpers.focus,\n              event = helpers.event,\n              onError = helpers.onError;\n\n          for (var _i4 = 0; _i4 < propNames.length; _i4++) {\n            var _key = propNames[_i4];\n            var propDef = propsDef[_key];\n            var value = inputProps[_key];\n\n            if (propDef) {\n              var alias = propDef.alias;\n\n              if (alias) {\n                !isDefined(value) && isDefined(inputProps[alias]) && (value = inputProps[alias]);\n                aliases.push(alias);\n              }\n\n              propDef.value && (value = propDef.value({\n                props: props,\n                state: state,\n                close: close,\n                focus: focus,\n                event: event,\n                onError: onError\n              }));\n              !isDefined(value) && propDef.default && (value = propDef.default({\n                props: props,\n                state: state,\n                close: close,\n                focus: focus,\n                event: event,\n                onError: onError\n              }));\n              if (isDefined(value) && (\"array\" === propDef.type ? !Array.isArray(value) : typeof value !== propDef.type)) throw new TypeError(\"Prop is not of type \" + propDef.type + \": \" + _key);\n              props[_key] = value;\n            }\n          }\n\n          for (var _i6 = 0; _i6 < aliases.length; _i6++) delete props[aliases[_i6]];\n\n          for (var _i8 = 0, _Object$keys4 = Object.keys(props); _i8 < _Object$keys4.length; _i8++) {\n            var _key2 = _Object$keys4[_i8];\n            var _propDef = propsDef[_key2];\n            var _value = props[_key2];\n            _propDef && isDefined(_value) && _propDef.decorate && (props[_key2] = _propDef.decorate({\n              value: _value,\n              props: props,\n              state: state,\n              close: close,\n              focus: focus,\n              event: event,\n              onError: onError\n            }));\n          }\n\n          for (var _i10 = 0, _Object$keys6 = Object.keys(propsDef); _i10 < _Object$keys6.length; _i10++) {\n            var _key3 = _Object$keys6[_i10];\n            if (!1 !== propsDef[_key3].required && !isDefined(props[_key3])) throw new Error('Expected prop \"' + _key3 + '\" to be defined');\n          }\n        }(propsDef, props, newProps, helpers, isUpdate);\n      };\n\n      var updateProps = function (newProps) {\n        setProps(newProps, !0);\n        return initPromise.then(function () {\n          var child = childComponent;\n          var proxyWin = currentProxyWin;\n          if (child && proxyWin) return getPropsForChild(getDomainMatcher()).then(function (childProps) {\n            return child.updateProps(childProps).catch(function (err) {\n              return checkWindowClose(proxyWin).then(function (closed) {\n                if (!closed) throw err;\n              });\n            });\n          });\n        });\n      };\n\n      return {\n        init: function () {\n          !function () {\n            event.on(EVENT.RENDER, function () {\n              return props.onRender();\n            });\n            event.on(EVENT.DISPLAY, function () {\n              return props.onDisplay();\n            });\n            event.on(EVENT.RENDERED, function () {\n              return props.onRendered();\n            });\n            event.on(EVENT.CLOSE, function () {\n              return props.onClose();\n            });\n            event.on(EVENT.DESTROY, function () {\n              return props.onDestroy();\n            });\n            event.on(EVENT.RESIZE, function () {\n              return props.onResize();\n            });\n            event.on(EVENT.FOCUS, function () {\n              return props.onFocus();\n            });\n            event.on(EVENT.PROPS, function (newProps) {\n              return props.onProps(newProps);\n            });\n            event.on(EVENT.ERROR, function (err) {\n              return props && props.onError ? props.onError(err) : initPromise.reject(err).then(function () {\n                setTimeout(function () {\n                  throw err;\n                }, 1);\n              });\n            });\n            clean.register(event.reset);\n          }();\n        },\n        render: function (target, container, context) {\n          return promise_ZalgoPromise.try(function () {\n            var uid = \"zoid-\" + tag + \"-\" + uniqueID();\n            var domain = getDomainMatcher();\n            var childDomain = getChildDomain();\n            !function (target, domain, container) {\n              if (target !== window) {\n                if (!isSameTopWindow(window, target)) throw new Error(\"Can only renderTo an adjacent frame\");\n                var origin = getDomain();\n                if (!matchDomain(domain, origin) && !isSameDomain(target)) throw new Error(\"Can not render remotely to \" + domain.toString() + \" - can only render to \" + origin);\n                if (container && \"string\" != typeof container) throw new Error(\"Container passed to renderTo must be a string selector, got \" + typeof container + \" }\");\n              }\n            }(target, domain, container);\n            var delegatePromise = promise_ZalgoPromise.try(function () {\n              if (target !== window) return function (context, target) {\n                var delegateProps = {};\n\n                for (var _i4 = 0, _Object$keys4 = Object.keys(props); _i4 < _Object$keys4.length; _i4++) {\n                  var propName = _Object$keys4[_i4];\n                  var propDef = propsDef[propName];\n                  propDef && propDef.allowDelegate && (delegateProps[propName] = props[propName]);\n                }\n\n                var childOverridesPromise = send_send(target, \"zoid_delegate_\" + name, {\n                  overrides: {\n                    props: delegateProps,\n                    event: event,\n                    close: close,\n                    onError: onError,\n                    getInternalState: getInternalState,\n                    setInternalState: setInternalState\n                  }\n                }).then(function (_ref11) {\n                  var parent = _ref11.data.parent;\n                  clean.register(function () {\n                    if (!isWindowClosed(target)) return parent.destroy();\n                  });\n                  return parent.getDelegateOverrides();\n                }).catch(function (err) {\n                  throw new Error(\"Unable to delegate rendering. Possibly the component is not loaded in the target window.\\n\\n\" + stringifyError(err));\n                });\n\n                getProxyContainerOverride = function () {\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n\n                  return childOverridesPromise.then(function (childOverrides) {\n                    return childOverrides.getProxyContainer.apply(childOverrides, args);\n                  });\n                };\n\n                renderContainerOverride = function () {\n                  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n\n                  return childOverridesPromise.then(function (childOverrides) {\n                    return childOverrides.renderContainer.apply(childOverrides, args);\n                  });\n                };\n\n                showOverride = function () {\n                  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];\n\n                  return childOverridesPromise.then(function (childOverrides) {\n                    return childOverrides.show.apply(childOverrides, args);\n                  });\n                };\n\n                hideOverride = function () {\n                  for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) args[_key4] = arguments[_key4];\n\n                  return childOverridesPromise.then(function (childOverrides) {\n                    return childOverrides.hide.apply(childOverrides, args);\n                  });\n                };\n\n                watchForUnloadOverride = function () {\n                  for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];\n\n                  return childOverridesPromise.then(function (childOverrides) {\n                    return childOverrides.watchForUnload.apply(childOverrides, args);\n                  });\n                };\n\n                if (context === CONTEXT.IFRAME) {\n                  getProxyWindowOverride = function () {\n                    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) args[_key6] = arguments[_key6];\n\n                    return childOverridesPromise.then(function (childOverrides) {\n                      return childOverrides.getProxyWindow.apply(childOverrides, args);\n                    });\n                  };\n\n                  openFrameOverride = function () {\n                    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) args[_key7] = arguments[_key7];\n\n                    return childOverridesPromise.then(function (childOverrides) {\n                      return childOverrides.openFrame.apply(childOverrides, args);\n                    });\n                  };\n\n                  openPrerenderFrameOverride = function () {\n                    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) args[_key8] = arguments[_key8];\n\n                    return childOverridesPromise.then(function (childOverrides) {\n                      return childOverrides.openPrerenderFrame.apply(childOverrides, args);\n                    });\n                  };\n\n                  prerenderOverride = function () {\n                    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) args[_key9] = arguments[_key9];\n\n                    return childOverridesPromise.then(function (childOverrides) {\n                      return childOverrides.prerender.apply(childOverrides, args);\n                    });\n                  };\n\n                  openOverride = function () {\n                    for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) args[_key10] = arguments[_key10];\n\n                    return childOverridesPromise.then(function (childOverrides) {\n                      return childOverrides.open.apply(childOverrides, args);\n                    });\n                  };\n\n                  openPrerenderOverride = function () {\n                    for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) args[_key11] = arguments[_key11];\n\n                    return childOverridesPromise.then(function (childOverrides) {\n                      return childOverrides.openPrerender.apply(childOverrides, args);\n                    });\n                  };\n                } else context === CONTEXT.POPUP && (setProxyWinOverride = function () {\n                  for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) args[_key12] = arguments[_key12];\n\n                  return childOverridesPromise.then(function (childOverrides) {\n                    return childOverrides.setProxyWin.apply(childOverrides, args);\n                  });\n                });\n\n                return childOverridesPromise;\n              }(context, target);\n            });\n            var windowProp = props.window;\n            var watchForUnloadPromise = watchForUnload();\n\n            var buildUrlPromise = function (propsDef, props) {\n              var params = {};\n              var keys = Object.keys(props);\n              return promise_ZalgoPromise.all(keys.map(function (key) {\n                var prop = propsDef[key];\n                if (prop) return promise_ZalgoPromise.resolve().then(function () {\n                  var value = props[key];\n                  if (value && prop.queryParam) return value;\n                }).then(function (value) {\n                  if (null != value) return promise_ZalgoPromise.all([props_getQueryParam(prop, key, value), getQueryValue(prop, 0, value)]).then(function (_ref) {\n                    var queryParam = _ref[0],\n                        queryValue = _ref[1];\n                    var result;\n                    if (\"boolean\" == typeof queryValue) result = queryValue.toString();else if (\"string\" == typeof queryValue) result = queryValue.toString();else if (\"object\" == typeof queryValue && null !== queryValue) {\n                      if (prop.serialization === PROP_SERIALIZATION.JSON) result = JSON.stringify(queryValue);else if (prop.serialization === PROP_SERIALIZATION.BASE64) result = btoa(JSON.stringify(queryValue));else if (prop.serialization === PROP_SERIALIZATION.DOTIFY || !prop.serialization) {\n                        result = function dotify(obj, prefix, newobj) {\n                          void 0 === prefix && (prefix = \"\");\n                          void 0 === newobj && (newobj = {});\n                          prefix = prefix ? prefix + \".\" : prefix;\n\n                          for (var key in obj) obj.hasOwnProperty(key) && null != obj[key] && \"function\" != typeof obj[key] && (obj[key] && Array.isArray(obj[key]) && obj[key].length && obj[key].every(function (val) {\n                            return \"object\" != typeof val;\n                          }) ? newobj[\"\" + prefix + key + \"[]\"] = obj[key].join(\",\") : obj[key] && \"object\" == typeof obj[key] ? newobj = dotify(obj[key], \"\" + prefix + key, newobj) : newobj[\"\" + prefix + key] = obj[key].toString());\n\n                          return newobj;\n                        }(queryValue, key);\n\n                        for (var _i12 = 0, _Object$keys8 = Object.keys(result); _i12 < _Object$keys8.length; _i12++) {\n                          var dotkey = _Object$keys8[_i12];\n                          params[dotkey] = result[dotkey];\n                        }\n\n                        return;\n                      }\n                    } else \"number\" == typeof queryValue && (result = queryValue.toString());\n                    params[queryParam] = result;\n                  });\n                });\n              })).then(function () {\n                return params;\n              });\n            }(propsDef, props).then(function (query) {\n              return function (url, options) {\n                var query = options.query || {};\n                var hash = options.hash || {};\n                var originalUrl;\n                var originalHash;\n\n                var _url$split = url.split(\"#\");\n\n                originalHash = _url$split[1];\n\n                var _originalUrl$split = (originalUrl = _url$split[0]).split(\"?\");\n\n                originalUrl = _originalUrl$split[0];\n                var queryString = extendQuery(_originalUrl$split[1], query);\n                var hashString = extendQuery(originalHash, hash);\n                queryString && (originalUrl = originalUrl + \"?\" + queryString);\n                hashString && (originalUrl = originalUrl + \"#\" + hashString);\n                return originalUrl;\n              }(normalizeMockUrl(getUrl()), {\n                query: query\n              });\n            });\n\n            var onRenderPromise = event.trigger(EVENT.RENDER);\n            var getProxyContainerPromise = getProxyContainer(container);\n            var getProxyWindowPromise = getProxyWindow();\n            var buildWindowNamePromise = getProxyWindowPromise.then(function (proxyWin) {\n              return function (_temp) {\n                var _ref4 = void 0 === _temp ? {} : _temp,\n                    proxyWin = _ref4.proxyWin,\n                    childDomain = _ref4.childDomain,\n                    domain = _ref4.domain,\n                    context = (void 0 === _ref4.target && window, _ref4.context),\n                    uid = _ref4.uid;\n\n                return function (proxyWin, childDomain, domain, uid) {\n                  return getPropsForChild(domain).then(function (childProps) {\n                    var value = setup_serializeMessage(proxyWin, domain, childProps);\n                    var propRef = childDomain === getDomain() ? {\n                      type: \"uid\",\n                      uid: uid\n                    } : {\n                      type: \"raw\",\n                      value: value\n                    };\n\n                    if (\"uid\" === propRef.type) {\n                      var global = lib_global_getGlobal(window);\n                      global.props = global.props || {};\n                      global.props[uid] = value;\n                      clean.register(function () {\n                        delete global.props[uid];\n                      });\n                    }\n\n                    return propRef;\n                  });\n                }(proxyWin, childDomain, domain, uid).then(function (propsRef) {\n                  return {\n                    uid: uid,\n                    context: context,\n                    tag: tag,\n                    version: \"9_0_58\",\n                    childDomain: childDomain,\n                    parentDomain: getDomain(window),\n                    parent: getWindowRef(0, childDomain, uid, context),\n                    props: propsRef,\n                    exports: setup_serializeMessage(proxyWin, domain, (win = proxyWin, {\n                      init: initChild,\n                      close: close,\n                      checkClose: function () {\n                        return checkWindowClose(win);\n                      },\n                      resize: resize,\n                      onError: onError,\n                      show: show,\n                      hide: hide\n                    }))\n                  };\n                  var win;\n                });\n              }({\n                proxyWin: (_ref5 = {\n                  proxyWin: proxyWin,\n                  childDomain: childDomain,\n                  domain: domain,\n                  target: target,\n                  context: context,\n                  uid: uid\n                }).proxyWin,\n                childDomain: _ref5.childDomain,\n                domain: _ref5.domain,\n                target: _ref5.target,\n                context: _ref5.context,\n                uid: _ref5.uid\n              }).then(function (childPayload) {\n                return \"__zoid__\" + name + \"__\" + base64encode(JSON.stringify(childPayload)) + \"__\";\n              });\n\n              var _ref5;\n            });\n            var openFramePromise = buildWindowNamePromise.then(function (windowName) {\n              return openFrame(context, {\n                windowName: windowName\n              });\n            });\n            var openPrerenderFramePromise = openPrerenderFrame(context);\n            var renderContainerPromise = promise_ZalgoPromise.hash({\n              proxyContainer: getProxyContainerPromise,\n              proxyFrame: openFramePromise,\n              proxyPrerenderFrame: openPrerenderFramePromise\n            }).then(function (_ref12) {\n              return renderContainer(_ref12.proxyContainer, {\n                context: context,\n                uid: uid,\n                proxyFrame: _ref12.proxyFrame,\n                proxyPrerenderFrame: _ref12.proxyPrerenderFrame\n              });\n            }).then(function (proxyContainer) {\n              return proxyContainer;\n            });\n            var openPromise = promise_ZalgoPromise.hash({\n              windowName: buildWindowNamePromise,\n              proxyFrame: openFramePromise,\n              proxyWin: getProxyWindowPromise\n            }).then(function (_ref13) {\n              var proxyWin = _ref13.proxyWin;\n              return windowProp ? proxyWin : open(context, {\n                windowName: _ref13.windowName,\n                proxyWin: proxyWin,\n                proxyFrame: _ref13.proxyFrame\n              });\n            });\n            var openPrerenderPromise = promise_ZalgoPromise.hash({\n              proxyWin: openPromise,\n              proxyPrerenderFrame: openPrerenderFramePromise\n            }).then(function (_ref14) {\n              return openPrerender(context, _ref14.proxyWin, _ref14.proxyPrerenderFrame);\n            });\n            var setStatePromise = openPromise.then(function (proxyWin) {\n              currentProxyWin = proxyWin;\n              return setProxyWin(proxyWin);\n            });\n            var prerenderPromise = promise_ZalgoPromise.hash({\n              proxyPrerenderWin: openPrerenderPromise,\n              state: setStatePromise\n            }).then(function (_ref15) {\n              return prerender(_ref15.proxyPrerenderWin, {\n                context: context,\n                uid: uid\n              });\n            });\n            var setWindowNamePromise = promise_ZalgoPromise.hash({\n              proxyWin: openPromise,\n              windowName: buildWindowNamePromise\n            }).then(function (_ref16) {\n              if (windowProp) return _ref16.proxyWin.setName(_ref16.windowName);\n            });\n            var loadUrlPromise = promise_ZalgoPromise.hash({\n              proxyWin: openPromise,\n              builtUrl: buildUrlPromise,\n              windowName: setWindowNamePromise,\n              prerender: prerenderPromise\n            }).then(function (_ref17) {\n              return _ref17.proxyWin.setLocation(_ref17.builtUrl);\n            });\n            var watchForClosePromise = openPromise.then(function (proxyWin) {\n              !function watchForClose(proxyWin) {\n                var cancelled = !1;\n                clean.register(function () {\n                  cancelled = !0;\n                });\n                return promise_ZalgoPromise.delay(2e3).then(function () {\n                  return proxyWin.isClosed();\n                }).then(function (isClosed) {\n                  return isClosed ? close() : cancelled ? void 0 : watchForClose(proxyWin);\n                });\n              }(proxyWin);\n            });\n            var onDisplayPromise = promise_ZalgoPromise.hash({\n              container: renderContainerPromise,\n              prerender: prerenderPromise\n            }).then(function () {\n              return event.trigger(EVENT.DISPLAY);\n            });\n            var openBridgePromise = openPromise.then(function (proxyWin) {\n              return function (proxyWin, domain, context) {\n                return promise_ZalgoPromise.try(function () {\n                  return proxyWin.awaitWindow();\n                }).then(function (win) {\n                  if (src_bridge && src_bridge.needsBridge({\n                    win: win,\n                    domain: domain\n                  }) && !src_bridge.hasBridge(domain, domain)) {\n                    var bridgeUrl = \"function\" == typeof options.bridgeUrl ? options.bridgeUrl({\n                      props: props\n                    }) : options.bridgeUrl;\n                    if (!bridgeUrl) throw new Error(\"Bridge needed to render \" + context);\n                    var bridgeDomain = getDomainFromUrl(bridgeUrl);\n                    src_bridge.linkUrl(win, domain);\n                    return src_bridge.openBridge(normalizeMockUrl(bridgeUrl), bridgeDomain);\n                  }\n                });\n              }(proxyWin, childDomain, context);\n            });\n            var runTimeoutPromise = loadUrlPromise.then(function () {\n              return promise_ZalgoPromise.try(function () {\n                var timeout = props.timeout;\n                if (timeout) return initPromise.timeout(timeout, new Error(\"Loading component timed out after \" + timeout + \" milliseconds\"));\n              });\n            });\n            var onRenderedPromise = initPromise.then(function () {\n              return event.trigger(EVENT.RENDERED);\n            });\n            return promise_ZalgoPromise.hash({\n              initPromise: initPromise,\n              buildUrlPromise: buildUrlPromise,\n              onRenderPromise: onRenderPromise,\n              getProxyContainerPromise: getProxyContainerPromise,\n              openFramePromise: openFramePromise,\n              openPrerenderFramePromise: openPrerenderFramePromise,\n              renderContainerPromise: renderContainerPromise,\n              openPromise: openPromise,\n              openPrerenderPromise: openPrerenderPromise,\n              setStatePromise: setStatePromise,\n              prerenderPromise: prerenderPromise,\n              loadUrlPromise: loadUrlPromise,\n              buildWindowNamePromise: buildWindowNamePromise,\n              setWindowNamePromise: setWindowNamePromise,\n              watchForClosePromise: watchForClosePromise,\n              onDisplayPromise: onDisplayPromise,\n              openBridgePromise: openBridgePromise,\n              runTimeoutPromise: runTimeoutPromise,\n              onRenderedPromise: onRenderedPromise,\n              delegatePromise: delegatePromise,\n              watchForUnloadPromise: watchForUnloadPromise\n            });\n          }).catch(function (err) {\n            return promise_ZalgoPromise.all([onError(err), destroy(err)]).then(function () {\n              throw err;\n            }, function () {\n              throw err;\n            });\n          }).then(src_util_noop);\n        },\n        destroy: destroy,\n        setProps: setProps,\n        getHelpers: getHelpers,\n        getDelegateOverrides: function () {\n          return promise_ZalgoPromise.try(function () {\n            return {\n              getProxyContainer: getProxyContainer,\n              show: show,\n              hide: hide,\n              renderContainer: renderContainer,\n              getProxyWindow: getProxyWindow,\n              watchForUnload: watchForUnload,\n              openFrame: openFrame,\n              openPrerenderFrame: openPrerenderFrame,\n              prerender: prerender,\n              open: open,\n              openPrerender: openPrerender,\n              setProxyWin: setProxyWin\n            };\n          });\n        }\n      };\n    }\n\n    var react = {\n      register: function (tag, propsDef, init, _ref) {\n        var React = _ref.React,\n            ReactDOM = _ref.ReactDOM;\n        return function (_React$Component) {\n          !function (subClass, superClass) {\n            subClass.prototype = Object.create(superClass.prototype);\n            subClass.prototype.constructor = subClass;\n            subClass.__proto__ = superClass;\n          }(_class, _React$Component);\n\n          function _class() {\n            return _React$Component.apply(this, arguments) || this;\n          }\n\n          var _proto = _class.prototype;\n\n          _proto.render = function () {\n            return React.createElement(\"div\", null);\n          };\n\n          _proto.componentDidMount = function () {\n            var el = ReactDOM.findDOMNode(this);\n            var parent = init(extend({}, this.props));\n            parent.render(el, CONTEXT.IFRAME);\n            this.setState({\n              parent: parent\n            });\n          };\n\n          _proto.componentDidUpdate = function () {\n            this.state && this.state.parent && this.state.parent.updateProps(extend({}, this.props)).catch(src_util_noop);\n          };\n\n          return _class;\n        }(React.Component);\n      }\n    };\n    var vue = {\n      register: function (tag, propsDef, init, Vue) {\n        return Vue.component(tag, {\n          render: function (createElement) {\n            return createElement(\"div\");\n          },\n          inheritAttrs: !1,\n          mounted: function () {\n            var el = this.$el;\n            this.parent = init(_extends({}, this.$attrs));\n            this.parent.render(el, CONTEXT.IFRAME);\n          },\n          watch: {\n            $attrs: {\n              handler: function () {\n                this.parent && this.$attrs && this.parent.updateProps(_extends({}, this.$attrs)).catch(src_util_noop);\n              },\n              deep: !0\n            }\n          }\n        });\n      }\n    };\n    var angular = {\n      register: function (tag, propsDef, init, ng) {\n        return ng.module(tag, []).directive(tag.replace(/-([a-z])/g, function (g) {\n          return g[1].toUpperCase();\n        }), function () {\n          var scope = {};\n\n          for (var _i2 = 0, _Object$keys2 = Object.keys(propsDef); _i2 < _Object$keys2.length; _i2++) scope[_Object$keys2[_i2]] = \"=\";\n\n          scope.props = \"=\";\n          return {\n            scope: scope,\n            restrict: \"E\",\n            controller: [\"$scope\", \"$element\", function ($scope, $element) {\n              function safeApply() {\n                if (\"$apply\" !== $scope.$root.$$phase && \"$digest\" !== $scope.$root.$$phase) try {\n                  $scope.$apply();\n                } catch (err) {}\n              }\n\n              var getProps = function () {\n                return replaceObject($scope.props, function (item) {\n                  return \"function\" == typeof item ? function () {\n                    var result = item.apply(this, arguments);\n                    safeApply();\n                    return result;\n                  } : item;\n                });\n              };\n\n              var instance = init(getProps());\n              instance.render($element[0], CONTEXT.IFRAME);\n              $scope.$watch(function () {\n                instance.updateProps(getProps()).catch(src_util_noop);\n              });\n            }]\n          };\n        });\n      }\n    };\n    var angular2 = {\n      register: function (tag, propsDef, init, _ref) {\n        var NgModule = _ref.NgModule,\n            ElementRef = _ref.ElementRef,\n            NgZone = _ref.NgZone;\n\n        var getProps = function (component) {\n          return replaceObject(_extends({}, component.internalProps, component.props), function (item) {\n            return \"function\" == typeof item ? function () {\n              var _arguments = arguments,\n                  _this = this;\n\n              return component.zone.run(function () {\n                return item.apply(_this, _arguments);\n              });\n            } : item;\n          });\n        };\n\n        var ComponentInstance = (0, _ref.Component)({\n          selector: tag,\n          template: \"<div></div>\",\n          inputs: [\"props\"]\n        }).Class({\n          constructor: [ElementRef, NgZone, function (elementRef, zone) {\n            this._props = {};\n            this.elementRef = elementRef;\n            this.zone = zone;\n          }],\n          ngOnInit: function () {\n            var targetElement = this.elementRef.nativeElement;\n            this.parent = init(getProps(this));\n            this.parent.render(targetElement, CONTEXT.IFRAME);\n          },\n          ngDoCheck: function () {\n            if (this.parent && !function (obj1, obj2) {\n              var checked = {};\n\n              for (var key in obj1) if (obj1.hasOwnProperty(key)) {\n                checked[key] = !0;\n                if (obj1[key] !== obj2[key]) return !1;\n              }\n\n              for (var _key in obj2) if (!checked[_key]) return !1;\n\n              return !0;\n            }(this._props, this.props)) {\n              this._props = _extends({}, this.props);\n              this.parent.updateProps(getProps(this));\n            }\n          }\n        });\n        return NgModule({\n          declarations: [ComponentInstance],\n          exports: [ComponentInstance]\n        }).Class({\n          constructor: function () {}\n        });\n      }\n    };\n\n    function defaultContainerTemplate(_ref) {\n      var uid = _ref.uid,\n          frame = _ref.frame,\n          prerenderFrame = _ref.prerenderFrame,\n          doc = _ref.doc,\n          props = _ref.props,\n          event = _ref.event,\n          _ref$dimensions = _ref.dimensions,\n          width = _ref$dimensions.width,\n          height = _ref$dimensions.height;\n\n      if (frame && prerenderFrame) {\n        var div = doc.createElement(\"div\");\n        div.setAttribute(\"id\", uid);\n        var style = doc.createElement(\"style\");\n        props.cspNonce && style.setAttribute(\"nonce\", props.cspNonce);\n        style.appendChild(doc.createTextNode(\"\\n            #\" + uid + \" {\\n                display: inline-block;\\n                position: relative;\\n                width: \" + width + \";\\n                height: \" + height + \";\\n            }\\n\\n            #\" + uid + \" > iframe {\\n                display: inline-block;\\n                position: absolute;\\n                width: 100%;\\n                height: 100%;\\n                top: 0;\\n                left: 0;\\n                transition: opacity .2s ease-in-out;\\n            }\\n\\n            #\" + uid + \" > iframe.zoid-invisible {\\n                opacity: 0;\\n            }\\n\\n            #\" + uid + \" > iframe.zoid-visible {\\n                opacity: 1;\\n        }\\n        \"));\n        div.appendChild(frame);\n        div.appendChild(prerenderFrame);\n        div.appendChild(style);\n        prerenderFrame.classList.add(\"zoid-visible\");\n        frame.classList.add(\"zoid-invisible\");\n        event.on(EVENT.RENDERED, function () {\n          prerenderFrame.classList.remove(\"zoid-visible\");\n          prerenderFrame.classList.add(\"zoid-invisible\");\n          frame.classList.remove(\"zoid-invisible\");\n          frame.classList.add(\"zoid-visible\");\n          setTimeout(function () {\n            destroyElement(prerenderFrame);\n          }, 1);\n        });\n        event.on(EVENT.RESIZE, function (_ref2) {\n          var newWidth = _ref2.width,\n              newHeight = _ref2.height;\n          \"number\" == typeof newWidth && (div.style.width = toCSS(newWidth));\n          \"number\" == typeof newHeight && (div.style.height = toCSS(newHeight));\n        });\n        return div;\n      }\n    }\n\n    function defaultPrerenderTemplate(_ref) {\n      var doc = _ref.doc,\n          props = _ref.props;\n      var html = doc.createElement(\"html\");\n      var body = doc.createElement(\"body\");\n      var style = doc.createElement(\"style\");\n      var spinner = doc.createElement(\"div\");\n      spinner.classList.add(\"spinner\");\n      props.cspNonce && style.setAttribute(\"nonce\", props.cspNonce);\n      html.appendChild(body);\n      body.appendChild(spinner);\n      body.appendChild(style);\n      style.appendChild(doc.createTextNode(\"\\n            html, body {\\n                width: 100%;\\n                height: 100%;\\n            }\\n\\n            .spinner {\\n                position: fixed;\\n                max-height: 60vmin;\\n                max-width: 60vmin;\\n                height: 40px;\\n                width: 40px;\\n                top: 50%;\\n                left: 50%;\\n                box-sizing: border-box;\\n                border: 3px solid rgba(0, 0, 0, .2);\\n                border-top-color: rgba(33, 128, 192, 0.8);\\n                border-radius: 100%;\\n                animation: rotation .7s infinite linear;\\n            }\\n\\n            @keyframes rotation {\\n                from {\\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\\n                }\\n                to {\\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\\n                }\\n            }\\n        \"));\n      return html;\n    }\n\n    var props_defaultNoop = function () {\n      return src_util_noop;\n    };\n\n    var props_decorateOnce = function (_ref) {\n      return once(_ref.value);\n    };\n\n    var component_clean = cleanup();\n\n    function component_component(opts) {\n      var options = function (options) {\n        var tag = options.tag,\n            url = options.url,\n            domain = options.domain,\n            bridgeUrl = options.bridgeUrl,\n            _options$props = options.props,\n            propsDef = void 0 === _options$props ? {} : _options$props,\n            _options$dimensions = options.dimensions,\n            dimensions = void 0 === _options$dimensions ? {} : _options$dimensions,\n            _options$autoResize = options.autoResize,\n            autoResize = void 0 === _options$autoResize ? {} : _options$autoResize,\n            _options$allowedParen = options.allowedParentDomains,\n            allowedParentDomains = void 0 === _options$allowedParen ? \"*\" : _options$allowedParen,\n            _options$attributes = options.attributes,\n            attributes = void 0 === _options$attributes ? {} : _options$attributes,\n            _options$defaultConte = options.defaultContext,\n            defaultContext = void 0 === _options$defaultConte ? CONTEXT.IFRAME : _options$defaultConte,\n            _options$containerTem = options.containerTemplate,\n            containerTemplate = void 0 === _options$containerTem ? defaultContainerTemplate : _options$containerTem,\n            _options$prerenderTem = options.prerenderTemplate,\n            prerenderTemplate = void 0 === _options$prerenderTem ? defaultPrerenderTemplate : _options$prerenderTem,\n            validate = options.validate,\n            _options$eligible = options.eligible,\n            eligible = void 0 === _options$eligible ? function () {\n          return {\n            eligible: !0\n          };\n        } : _options$eligible,\n            _options$logger = options.logger,\n            logger = void 0 === _options$logger ? {\n          info: src_util_noop\n        } : _options$logger;\n        var name = tag.replace(/-/g, \"_\");\n        var _dimensions$width = dimensions.width,\n            width = void 0 === _dimensions$width ? \"300px\" : _dimensions$width,\n            _dimensions$height = dimensions.height,\n            height = void 0 === _dimensions$height ? \"150px\" : _dimensions$height;\n        propsDef = _extends({}, {\n          window: {\n            type: \"object\",\n            sendToChild: !1,\n            required: !1,\n            allowDelegate: !0,\n            validate: function (_ref2) {\n              var value = _ref2.value;\n              if (!isWindow(value) && !window_ProxyWindow.isProxyWindow(value)) throw new Error(\"Expected Window or ProxyWindow\");\n\n              if (isWindow(value)) {\n                if (isWindowClosed(value)) throw new Error(\"Window is closed\");\n                if (!isSameDomain(value)) throw new Error(\"Window is not same domain\");\n              }\n            },\n            decorate: function (_ref3) {\n              return setup_toProxyWindow(_ref3.value);\n            }\n          },\n          timeout: {\n            type: \"number\",\n            required: !1,\n            sendToChild: !1\n          },\n          close: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref4) {\n              return _ref4.close;\n            }\n          },\n          focus: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref5) {\n              return _ref5.focus;\n            }\n          },\n          resize: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref6) {\n              return _ref6.resize;\n            }\n          },\n          uid: {\n            type: \"string\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref7) {\n              return _ref7.uid;\n            }\n          },\n          cspNonce: {\n            type: \"string\",\n            required: !1\n          },\n          getParent: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref8) {\n              return _ref8.getParent;\n            }\n          },\n          getParentDomain: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref9) {\n              return _ref9.getParentDomain;\n            }\n          },\n          show: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref10) {\n              return _ref10.show;\n            }\n          },\n          hide: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref11) {\n              return _ref11.hide;\n            }\n          },\n          onDisplay: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            allowDelegate: !0,\n            default: props_defaultNoop,\n            decorate: props_decorateOnce\n          },\n          onRendered: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            default: props_defaultNoop,\n            decorate: props_decorateOnce\n          },\n          onRender: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            default: props_defaultNoop,\n            decorate: props_decorateOnce\n          },\n          onClose: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            allowDelegate: !0,\n            default: props_defaultNoop,\n            decorate: props_decorateOnce\n          },\n          onDestroy: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            allowDelegate: !0,\n            default: props_defaultNoop,\n            decorate: props_decorateOnce\n          },\n          onResize: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            allowDelegate: !0,\n            default: props_defaultNoop\n          },\n          onFocus: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            allowDelegate: !0,\n            default: props_defaultNoop\n          },\n          onError: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            childDecorate: function (_ref12) {\n              return _ref12.onError;\n            }\n          },\n          onProps: {\n            type: \"function\",\n            required: !1,\n            sendToChild: !1,\n            default: props_defaultNoop,\n            childDecorate: function (_ref13) {\n              return _ref13.onProps;\n            }\n          }\n        }, propsDef);\n        if (!containerTemplate) throw new Error(\"Container template required\");\n        return {\n          name: name,\n          tag: tag,\n          url: url,\n          domain: domain,\n          bridgeUrl: bridgeUrl,\n          propsDef: propsDef,\n          dimensions: {\n            width: width,\n            height: height\n          },\n          autoResize: autoResize,\n          allowedParentDomains: allowedParentDomains,\n          attributes: attributes,\n          defaultContext: defaultContext,\n          containerTemplate: containerTemplate,\n          prerenderTemplate: prerenderTemplate,\n          validate: validate,\n          logger: logger,\n          eligible: eligible\n        };\n      }(opts);\n\n      var name = options.name,\n          tag = options.tag,\n          defaultContext = options.defaultContext,\n          propsDef = options.propsDef,\n          eligible = options.eligible;\n      var global = lib_global_getGlobal();\n      var driverCache = {};\n      var instances = [];\n\n      var isChild = function () {\n        var payload = getChildPayload();\n        return Boolean(payload && payload.tag === tag && payload.childDomain === getDomain());\n      };\n\n      var registerChild = memoize(function () {\n        if (isChild()) {\n          if (window.xprops) {\n            delete global.components[tag];\n            throw new Error(\"Can not register \" + name + \" as child - child already registered\");\n          }\n\n          var child = function (options) {\n            var propsDef = options.propsDef,\n                autoResize = options.autoResize,\n                allowedParentDomains = options.allowedParentDomains;\n            var onPropHandlers = [];\n            var childPayload = getChildPayload();\n            var props;\n            if (!childPayload) throw new Error(\"No child payload found\");\n            if (\"9_0_58\" !== childPayload.version) throw new Error(\"Parent window has zoid version \" + childPayload.version + \", child window has version 9_0_58\");\n            var uid = childPayload.uid,\n                parentDomain = childPayload.parentDomain,\n                exports = childPayload.exports,\n                context = childPayload.context,\n                propsRef = childPayload.props;\n\n            var parentComponentWindow = function (ref) {\n              var type = ref.type;\n              if (\"opener\" === type) return assertExists(\"opener\", getOpener(window));\n              if (\"parent\" === type && \"number\" == typeof ref.distance) return assertExists(\"parent\", function (win, n) {\n                void 0 === n && (n = 1);\n                return function (win, n) {\n                  void 0 === n && (n = 1);\n                  var parent = win;\n\n                  for (var i = 0; i < n; i++) {\n                    if (!parent) return;\n                    parent = utils_getParent(parent);\n                  }\n\n                  return parent;\n                }(win, getDistanceFromTop(win) - n);\n              }(window, ref.distance));\n\n              if (\"global\" === type && ref.uid && \"string\" == typeof ref.uid) {\n                var uid = ref.uid;\n                var ancestor = getAncestor(window);\n                if (!ancestor) throw new Error(\"Can not find ancestor window\");\n\n                for (var _i2 = 0, _getAllFramesInWindow2 = getAllFramesInWindow(ancestor); _i2 < _getAllFramesInWindow2.length; _i2++) {\n                  var frame = _getAllFramesInWindow2[_i2];\n\n                  if (isSameDomain(frame)) {\n                    var global = lib_global_getGlobal(frame);\n                    if (global && global.windows && global.windows[uid]) return global.windows[uid];\n                  }\n                }\n              }\n\n              throw new Error(\"Unable to find \" + type + \" parent component window\");\n            }(childPayload.parent);\n\n            var parent = setup_deserializeMessage(parentComponentWindow, parentDomain, exports);\n            var show = parent.show,\n                hide = parent.hide,\n                close = parent.close;\n\n            var getParent = function () {\n              return parentComponentWindow;\n            };\n\n            var getParentDomain = function () {\n              return parentDomain;\n            };\n\n            var onProps = function (handler) {\n              onPropHandlers.push(handler);\n            };\n\n            var onError = function (err) {\n              return promise_ZalgoPromise.try(function () {\n                if (parent && parent.onError) return parent.onError(err);\n                throw err;\n              });\n            };\n\n            var resize = function (_ref2) {\n              return parent.resize.fireAndForget({\n                width: _ref2.width,\n                height: _ref2.height\n              });\n            };\n\n            var setProps = function (newProps, origin, isUpdate) {\n              void 0 === isUpdate && (isUpdate = !1);\n\n              var normalizedProps = function (parentComponentWindow, propsDef, props, origin, helpers, isUpdate) {\n                void 0 === isUpdate && (isUpdate = !1);\n                var result = {};\n\n                for (var _i2 = 0, _Object$keys2 = Object.keys(props); _i2 < _Object$keys2.length; _i2++) {\n                  var key = _Object$keys2[_i2];\n                  var prop = propsDef[key];\n\n                  if (!prop || !prop.sameDomain || origin === getDomain(window) && isSameDomain(parentComponentWindow)) {\n                    var value = normalizeChildProp(propsDef, 0, key, props[key], helpers);\n                    result[key] = value;\n                    prop && prop.alias && !result[prop.alias] && (result[prop.alias] = value);\n                  }\n                }\n\n                if (!isUpdate) for (var _i4 = 0, _Object$keys4 = Object.keys(propsDef); _i4 < _Object$keys4.length; _i4++) {\n                  var _key = _Object$keys4[_i4];\n                  props.hasOwnProperty(_key) || (result[_key] = normalizeChildProp(propsDef, 0, _key, void 0, helpers));\n                }\n                return result;\n              }(parentComponentWindow, propsDef, newProps, origin, {\n                show: show,\n                hide: hide,\n                close: close,\n                focus: child_focus,\n                onError: onError,\n                resize: resize,\n                onProps: onProps,\n                getParent: getParent,\n                getParentDomain: getParentDomain,\n                uid: uid\n              }, isUpdate);\n\n              props ? extend(props, normalizedProps) : props = normalizedProps;\n\n              for (var _i4 = 0; _i4 < onPropHandlers.length; _i4++) (0, onPropHandlers[_i4])(props);\n            };\n\n            var updateProps = function (newProps) {\n              return promise_ZalgoPromise.try(function () {\n                return setProps(newProps, parentDomain, !0);\n              });\n            };\n\n            return {\n              init: function () {\n                return promise_ZalgoPromise.try(function () {\n                  !function (allowedParentDomains, domain) {\n                    if (!matchDomain(allowedParentDomains, domain)) throw new Error(\"Can not be rendered by domain: \" + domain);\n                  }(allowedParentDomains, parentDomain);\n                  markWindowKnown(parentComponentWindow);\n                  !function () {\n                    window.addEventListener(\"beforeunload\", function () {\n                      parent.checkClose.fireAndForget();\n                    });\n                    window.addEventListener(\"unload\", function () {\n                      parent.checkClose.fireAndForget();\n                    });\n                    onCloseWindow(parentComponentWindow, function () {\n                      child_destroy();\n                    });\n                  }();\n                  return parent.init({\n                    updateProps: updateProps,\n                    close: child_destroy\n                  });\n                }).then(function () {\n                  return (_autoResize$width = autoResize.width, width = void 0 !== _autoResize$width && _autoResize$width, _autoResize$height = autoResize.height, height = void 0 !== _autoResize$height && _autoResize$height, _autoResize$element = autoResize.element, elementReady(void 0 === _autoResize$element ? \"body\" : _autoResize$element).catch(src_util_noop).then(function (element) {\n                    return {\n                      width: width,\n                      height: height,\n                      element: element\n                    };\n                  })).then(function (_ref3) {\n                    var width = _ref3.width,\n                        height = _ref3.height,\n                        element = _ref3.element;\n                    element && (width || height) && context !== CONTEXT.POPUP && onResize(element, function (_ref4) {\n                      resize({\n                        width: width ? _ref4.width : void 0,\n                        height: height ? _ref4.height : void 0\n                      });\n                    }, {\n                      width: width,\n                      height: height\n                    });\n                  });\n\n                  var _autoResize$width, width, _autoResize$height, height, _autoResize$element;\n                }).catch(function (err) {\n                  onError(err);\n                });\n              },\n              getProps: function () {\n                if (props) return props;\n                setProps(function (parentComponentWindow, domain, _ref) {\n                  var type = _ref.type,\n                      uid = _ref.uid;\n                  var props;\n                  if (\"raw\" === type) props = _ref.value;else if (\"uid\" === type) {\n                    if (!isSameDomain(parentComponentWindow)) throw new Error(\"Parent component window is on a different domain - expected \" + getDomain() + \" - can not retrieve props\");\n                    var global = lib_global_getGlobal(parentComponentWindow);\n                    props = assertExists(\"props\", global && global.props[uid]);\n                  }\n                  if (!props) throw new Error(\"Could not find props\");\n                  return setup_deserializeMessage(parentComponentWindow, domain, props);\n                }(parentComponentWindow, parentDomain, propsRef), parentDomain);\n                return props;\n              }\n            };\n          }(options);\n\n          child.init();\n          return child;\n        }\n      });\n\n      var init = function init(props) {\n        var instance;\n\n        var _eligible = eligible({\n          props: props = props || {}\n        }),\n            eligibility = _eligible.eligible,\n            reason = _eligible.reason;\n\n        var onDestroy = props.onDestroy;\n\n        props.onDestroy = function () {\n          instance && eligibility && instances.splice(instances.indexOf(instance), 1);\n          if (onDestroy) return onDestroy.apply(void 0, arguments);\n        };\n\n        var parent = parentComponent(options);\n        parent.init();\n        eligibility ? parent.setProps(props) : props.onDestroy && props.onDestroy();\n        component_clean.register(function () {\n          parent.destroy(new Error(\"zoid destroyed all components\"));\n        });\n\n        var _render = function (target, container, context) {\n          return promise_ZalgoPromise.try(function () {\n            if (!eligibility) return parent.destroy().then(function () {\n              throw new Error(reason || name + \" component is not eligible\");\n            });\n            if (!isWindow(target)) throw new Error(\"Must pass window to renderTo\");\n            return function (props, context) {\n              return promise_ZalgoPromise.try(function () {\n                if (props.window) return setup_toProxyWindow(props.window).getType();\n\n                if (context) {\n                  if (context !== CONTEXT.IFRAME && context !== CONTEXT.POPUP) throw new Error(\"Unrecognized context: \" + context);\n                  return context;\n                }\n\n                return defaultContext;\n              });\n            }(props, context);\n          }).then(function (finalContext) {\n            container = function (context, container) {\n              if (container) {\n                if (\"string\" != typeof container && !isElement(container)) throw new TypeError(\"Expected string or element selector to be passed\");\n                return container;\n              }\n\n              if (context === CONTEXT.POPUP) return \"body\";\n              throw new Error(\"Expected element to be passed to render iframe\");\n            }(finalContext, container);\n\n            return parent.render(target, container, finalContext);\n          }).catch(function (err) {\n            return parent.destroy(err).then(function () {\n              throw err;\n            });\n          });\n        };\n\n        instance = _extends({}, parent.getHelpers(), {\n          isEligible: function () {\n            return eligibility;\n          },\n          clone: function (_temp) {\n            var _ref3$decorate = (void 0 === _temp ? {} : _temp).decorate;\n            return init((void 0 === _ref3$decorate ? identity : _ref3$decorate)(props));\n          },\n          render: function (container, context) {\n            return _render(window, container, context);\n          },\n          renderTo: function (target, container, context) {\n            return _render(target, container, context);\n          }\n        });\n        eligibility && instances.push(instance);\n        return instance;\n      };\n\n      registerChild();\n      !function () {\n        on_on(\"zoid_allow_delegate_\" + name, function () {\n          return !0;\n        });\n        on_on(\"zoid_delegate_\" + name, function (_ref) {\n          return {\n            parent: parentComponent(options, _ref.data.overrides, _ref.source)\n          };\n        });\n      }();\n      global.components = global.components || {};\n      if (global.components[tag]) throw new Error(\"Can not register multiple components with the same tag: \" + tag);\n      global.components[tag] = !0;\n      return {\n        init: init,\n        instances: instances,\n        driver: function (driverName, dep) {\n          var drivers = {\n            react: react,\n            angular: angular,\n            vue: vue,\n            angular2: angular2\n          };\n          if (!drivers[driverName]) throw new Error(\"Could not find driver for framework: \" + driverName);\n          driverCache[driverName] || (driverCache[driverName] = drivers[driverName].register(tag, propsDef, init, dep));\n          return driverCache[driverName];\n        },\n        isChild: isChild,\n        canRenderTo: function (win) {\n          return send_send(win, \"zoid_allow_delegate_\" + name).then(function (_ref2) {\n            return _ref2.data;\n          }).catch(function () {\n            return !1;\n          });\n        },\n        registerChild: registerChild\n      };\n    }\n\n    function create(options) {\n      !function () {\n        if (!global_getGlobal().initialized) {\n          global_getGlobal().initialized = !0;\n          on = (_ref3 = {\n            on: on_on,\n            send: send_send\n          }).on, send = _ref3.send, (global = global_getGlobal()).receiveMessage = global.receiveMessage || function (message) {\n            return receive_receiveMessage(message, {\n              on: on,\n              send: send\n            });\n          };\n          !function (_ref5) {\n            var on = _ref5.on,\n                send = _ref5.send;\n            globalStore().getOrSet(\"postMessageListener\", function () {\n              return addEventListener(window, \"message\", function (event) {\n                !function (event, _ref4) {\n                  var on = _ref4.on,\n                      send = _ref4.send;\n                  promise_ZalgoPromise.try(function () {\n                    var source = event.source || event.sourceElement;\n                    var origin = event.origin || event.originalEvent && event.originalEvent.origin;\n                    var data = event.data;\n                    \"null\" === origin && (origin = \"file://\");\n\n                    if (source) {\n                      if (!origin) throw new Error(\"Post message did not have origin domain\");\n                      receive_receiveMessage({\n                        source: source,\n                        origin: origin,\n                        data: data\n                      }, {\n                        on: on,\n                        send: send\n                      });\n                    }\n                  });\n                }(event, {\n                  on: on,\n                  send: send\n                });\n              });\n            });\n          }({\n            on: on_on,\n            send: send_send\n          });\n          setupBridge({\n            on: on_on,\n            send: send_send,\n            receiveMessage: receive_receiveMessage\n          });\n          !function (_ref8) {\n            var on = _ref8.on,\n                send = _ref8.send;\n            globalStore(\"builtinListeners\").getOrSet(\"helloListener\", function () {\n              var listener = on(\"postrobot_hello\", {\n                domain: \"*\"\n              }, function (_ref3) {\n                resolveHelloPromise(_ref3.source, {\n                  domain: _ref3.origin\n                });\n                return {\n                  instanceID: getInstanceID()\n                };\n              });\n              var parent = getAncestor();\n              parent && sayHello(parent, {\n                send: send\n              }).catch(function (err) {});\n              return listener;\n            });\n          }({\n            on: on_on,\n            send: send_send\n          });\n        }\n\n        var _ref3, on, send, global;\n      }();\n      var comp = component_component(options);\n\n      var init = function (props) {\n        return comp.init(props);\n      };\n\n      init.driver = function (name, dep) {\n        return comp.driver(name, dep);\n      };\n\n      init.isChild = function () {\n        return comp.isChild();\n      };\n\n      init.canRenderTo = function (win) {\n        return comp.canRenderTo(win);\n      };\n\n      init.instances = comp.instances;\n      var child = comp.registerChild();\n      child && (window.xprops = init.xprops = child.getProps());\n      return init;\n    }\n\n    function destroyAll() {\n      src_bridge && src_bridge.destroyBridges();\n      var destroyPromise = component_clean.all();\n      component_clean = cleanup();\n      return destroyPromise;\n    }\n\n    var destroyComponents = destroyAll;\n\n    function component_destroy() {\n      destroyAll();\n      delete window.__zoid_9_0_58__;\n      !function () {\n        !function () {\n          var responseListeners = globalStore(\"responseListeners\");\n\n          for (var _i2 = 0, _responseListeners$ke2 = responseListeners.keys(); _i2 < _responseListeners$ke2.length; _i2++) {\n            var hash = _responseListeners$ke2[_i2];\n            var listener = responseListeners.get(hash);\n            listener && (listener.cancelled = !0);\n            responseListeners.del(hash);\n          }\n        }();\n        (listener = globalStore().get(\"postMessageListener\")) && listener.cancel();\n        var listener;\n        delete window.__post_robot_10_0_39__;\n      }();\n    }\n  }]);\n});","map":{"version":3,"sources":["D:/DobozProjects/giftwrap-child/node_modules/zoid/dist/zoid.frameworks.js"],"names":["root","factory","exports","module","define","amd","zoid","self","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","hasOwnProperty","p","s","__webpack_exports__","PopupOpenError","component_destroy","destroyComponents","destroyAll","PROP_TYPE","PROP_SERIALIZATION","CONTEXT","EVENT","_extends","assign","target","arguments","length","source","apply","utils_isPromise","item","Promise","window","Window","constructor","_toString","toString","then","err","dispatchedErrors","possiblyUnhandledPromiseHandlers","activeCount","flushPromise","flushActive","promise","resolve","startActive","endActive","promise_ZalgoPromise","ZalgoPromise","handler","_this","resolved","rejected","errorHandled","error","handlers","dispatching","stack","_result","_error","isAsync","res","reject","_proto","prototype","result","Error","dispatch","_this2","_err","setTimeout","indexOf","push","j","asyncReject","chain","firstPromise","secondPromise","_handlers$i","onSuccess","onError","_result2","catch","finally","onFinally","try","timeout","time","_this3","clearTimeout","toPromise","TypeError","all","promises","count","results","prom","hash","awaitPromises","_loop","map","items","method","onPossiblyUnhandledException","cancel","splice","context","args","delay","_delay","isPromise","flush","Zalgo","isRegex","WINDOW_TYPE","IFRAME","POPUP","IE_WIN_ACCESS_ERROR","isAboutProtocol","win","location","protocol","utils_getParent","parent","getOpener","opener","canReadFromWindow","getActualDomain","host","getDomain","domain","mockDomain","isSameDomain","desc","getOwnPropertyDescriptor","assertSameDomain","isAncestorParent","child","childParent","getFrames","frames","len","frame","_i","_frame","getAllChildFrames","_i3","_getFrames2","_i5","_getAllChildFrames2","getTop","top","_i7","_getAllChildFrames4","getAllFramesInWindow","concat","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","mockclosed","iframeIndex","collection","contentWindow","parentNode","doc","ownerDocument","documentElement","contains","utils_getUserAgent","navigator","mockUserAgent","userAgent","getFrameByName","winFrames","_i9","childFrame","isOpener","getAncestor","anyMatch","collection1","collection2","_i17","item1","_i19","getDistanceFromTop","distance","isSameTopWindow","win1","win2","top1","top2","allFrames1","allFrames2","opener1","opener2","matchDomain","pattern","origin","Array","isArray","Boolean","match","JSON","stringify","some","subpattern","getDomainFromUrl","url","split","slice","join","onCloseWindow","callback","maxtime","check","isWindow","obj","__cross_domain_utils_window_check__","normalizeMockUrl","closeWindow","close","util_safeIndexOf","weakmap_CrossDomainSafeWeakMap","CrossDomainSafeWeakMap","weakmap","keys","values","Math","random","WeakMap","freeze","testWeakMap","testKey","set","_cleanupClosedWindows","delete","isSafeToReadWrite","entry","writable","index","has","getOrSet","getFunctionName","fn","__name__","displayName","setFunctionName","base64encode","str","btoa","encodeURIComponent","replace","p1","String","fromCharCode","parseInt","Buffer","from","uniqueID","chars","charAt","floor","Date","toISOString","toLowerCase","objectIDs","serializeArgs","subkey","val","uid","memoizedFunctions","memoize","options","cacheMap","memoizedFunction","_len","_key","cache","thisNamespace","cacheTime","now","reset","clear","_i2","memoizePromise","memoizedPromiseFunction","_arguments","_len2","_key2","inlineMemoize","logic","__inline_memoize_cache__","src_util_noop","once","called","stringifyError","level","newErr","extend","identity","safeInterval","loop","defineLazyProp","configurable","arrayFrom","isObjectObject","isPlainObject","replaceObject","replacer","fullKey","_loop2","itemKey","_loop3","isDefined","util_isRegex","util_getOrSet","cleanup","tasks","cleaned","register","task","shift","assertExists","thing","isDocumentReady","document","body","readyState","isDocumentInteractive","urlEncode","interval","setInterval","clearInterval","parseQuery","queryString","params","_queryString$split2","pair","decodeURIComponent","extendQuery","originalQuery","props","filter","appendChild","container","isElement","element","Element","nodeType","style","getElementSafe","id","querySelector","elementReady","el","awaitFrameLoadPromises","awaitFrameLoad","_promise","addEventListener","awaitFrameWindow","loadedFrame","dom_iframe","tag","createElement","class","className","setAttribute","attributes","_i10","_Object$keys2","styleSheet","styleText","cssText","createTextNode","html","innerHTML","allowTransparency","backgroundColor","border","isIE","hasAttribute","event","removeEventListener","showElement","setProperty","hideElement","destroyElement","removeChild","isElementClosed","onResize","_temp","_ref2","_ref2$width","width","_ref2$height","height","_ref2$interval","_ref2$win","currentWidth","offsetWidth","currentHeight","offsetHeight","newWidth","newHeight","observer","ResizeObserver","observe","MutationObserver","childList","subtree","characterData","disconnect","isShadowElement","isPerc","test","toNum","toPx","toCSS","normalizeDimension","dim","max","global_getGlobal","__post_robot_10_0_39__","getObj","globalStore","defStore","store","storeKey","defVal","del","WildCard","getWildcard","global","WINDOW_WILDCARD","windowStore","winStore","getStore","getInstanceID","resolveHelloPromise","_ref","helloPromises","existingPromise","newPromise","sayHello","_ref4","send","instanceID","_ref5","data","getWindowInstanceID","_ref6","_ref7","awaitWindowHello","markWindowKnown","isSerializedType","__type__","determineType","serializeType","type","__val__","_SERIALIZER","SERIALIZER","function","code","regex","date","toJSON","array","string","number","boolean","null","defaultSerializers","_DESERIALIZER","DESERIALIZER","RegExp","defaultDeserializers","needsBridgeForBrowser","needsBridgeForWin","needsBridgeForDomain","needsBridge","getBridgeName","isBridge","documentBodyReady","registerRemoteWindow","findRemoteWindow","remoteWinPromise","registerRemoteSendMessage","sendMessage","remoteWin","remoteDomain","fireAndForget","rejectRemoteSendMessage","linkWindow","_ref3","popupWindowsByName","popupWindowsByWin","_popupWindowsByName$k2","winName","_details","details","setupBridge","on","receiveMessage","windowOpen","open","last","bridgePromise","bridge","getWindowDetails","openTunnelToParent","canary","tunnelWindows","parentWindow","_tunnelWindows$keys2","tunnelWindow","cleanupProxyWindows","idToProxyWindow","_idToProxyWindow$keys2","shouldClean","getSerializedWindow","winPromise","_ref$id","windowNamePromise","windowTypePromise","getType","getName","focus","isClosed","setLocation","href","setName","sameDomain","frameElement","_i21","_document$querySelect2","querySelectorAll","window_ProxyWindow","ProxyWindow","serializedWindow","isProxyWindow","actualWindow","actualWindowPromise","getID","setWindow","isPopup","_this4","isPopupPromise","getNamePromise","reopenPromise","focusPromise","getWindow","awaitWindow","matchWindow","_this5","proxyInstanceID","knownWindowInstanceID","unwrap","serialize","toProxyWindow","deserialize","_ref8","_ref9","addMethod","methodStore","proxyWindowMethods","lookupMethod","function_serializeFunction","destination","meth","methodSource","arg","__id__","serializeMessage","_serialize","serializers","serializer","deserializeMessage","_deserialize","deserializers","parse","deserializer","cross_domain_zalgo_promise","serializedPromise","cross_domain_function","serializedFunction","getDeserializedFunction","opts","crossDomainFunctionWrapper","_args","__origin__","__source__","cross_domain_window","SEND_MESSAGE_STRATEGIES","postrobot_post_message","serializedMessage","postMessage","postrobot_bridge","messagingChild","messagingParent","postrobot_global","foreignGlobal","send_sendMessage","domainBuffer","buffer","strategies","errors","strategyName","getResponseListener","deleteResponseListener","isResponseListenerErrored","getRequestListener","requestListeners","_i4","winQualifier","nameListeners","domainListeners","__domain_regex__","_i6","_domainListeners$__DO2","_domainListeners$__DO3","listener","_RECEIVE_MESSAGE_TYPE","RECEIVE_MESSAGE_TYPES","postrobot_message_request","logName","sendResponse","ack","pathname","handleError","postrobot_message_ack","postrobot_message_response","receive_receiveMessage","receivedMessages","messages","parsedMessage","parseMessages","on_on","requestListener","addRequestListener","listenersCollection","_i8","_win2","_listenersCollection","_i12","_domain2","_i14","existingListener","strDomain","regexListeners","regexListener","errorHandler","send_send","domainMatcher","responseTimeout","childTimeout","actualParent","_i15","_getFrames8","targetDomain","actualDomain","normalizedDomain","responseListener","reqPromises","totalAckTimeout","totalResTimeout","ackTimeout","resTimeout","cancelled","setup_serializeMessage","setup_deserializeMessage","setup_toProxyWindow","cleanUpWindow","_requestPromises$get2","src_bridge","openBridge","bridges","bridgeFrames","iframe","src","linkUrl","hasBridge","destroyBridges","_bridgeFrames$keys2","lib_global_getGlobal","__zoid_9_0_58__","getProxyObject","STRING","OBJECT","FUNCTION","BOOLEAN","NUMBER","ARRAY","DOTIFY","BASE64","RENDER","RENDERED","DISPLAY","ERROR","CLOSE","DESTROY","PROPS","RESIZE","FOCUS","normalizeChildProp","propsDef","helpers","prop","childDecorate","onProps","resize","getParent","getParentDomain","show","hide","parseChildWindowName","windowName","_windowName$split","zoidcomp","encodedPayload","atob","charCodeAt","getChildPayload","child_focus","child_destroy","props_getQueryParam","queryParam","getQueryValue","queryValue","parentComponent","overrides","parentWin","containerTemplate","prerenderTemplate","dimensions","autoResize","domainMatch","initPromise","handledErrors","clean","state","internalState","visible","triggered","eventName","handlerList","trigger","_len3","_key3","triggerOnce","_len4","_key4","currentProxyWin","currentProxyContainer","childComponent","onErrorOverride","getProxyContainerOverride","getProxyContainer","showOverride","hideOverride","closeOverride","renderContainerOverride","renderContainer","getProxyWindowOverride","getProxyWindow","setProxyWinOverride","setProxyWin","openFrameOverride","openFrame","openPrerenderFrameOverride","openPrerenderFrame","prerenderOverride","prerender","openOverride","openPrerenderOverride","openPrerender","watchForUnloadOverride","watchForUnload","getInternalStateOverride","getInternalState","setInternalStateOverride","setInternalState","getPropsForChild","sendToChild","newInternalState","windowProp","_proxyWin","containerElement","shadowHost","shadowRoot","slotName","slot","slotProvider","proxyWin","setState","getUrl","getAttributes","getChildDomain","getDomainMatcher","title","proxyPrerenderFrame","prerenderFrame","prerenderFrameWindow","getWindowRef","windows","initChild","childExports","destroy","proxyFrame","frameWatcher","outerWidth","left","round","screenX","screen","outerHeight","screenY","status","toolbar","menubar","resizable","scrollbars","popup","unloadWindowListener","closeParentWindowListener","checkWindowClose","secondIsClosed","renderTemplate","renderer","proxyPrerenderWin","prerenderWindow","tagName","_arrayFrom2","children","_arrayFrom4","_autoResize$width","_autoResize$height","_autoResize$element","prerenderResizeListener","proxyContainer","_ref10","innerContainer","getHelpers","updateProps","setProps","newProps","isUpdate","inputProps","propNames","aliases","propDef","alias","_Object$keys4","_propDef","_value","decorate","_Object$keys6","required","childProps","init","onRender","onDisplay","onRendered","onClose","onDestroy","onFocus","render","childDomain","delegatePromise","delegateProps","propName","allowDelegate","childOverridesPromise","_ref11","getDelegateOverrides","childOverrides","_len5","_key5","_len6","_key6","_len7","_key7","_len8","_key8","_len9","_key9","_len10","_key10","_len11","_key11","_len12","_key12","watchForUnloadPromise","buildUrlPromise","serialization","dotify","prefix","newobj","every","_Object$keys8","dotkey","query","originalUrl","originalHash","_url$split","_originalUrl$split","hashString","onRenderPromise","getProxyContainerPromise","getProxyWindowPromise","buildWindowNamePromise","propRef","propsRef","version","parentDomain","checkClose","childPayload","openFramePromise","openPrerenderFramePromise","renderContainerPromise","_ref12","openPromise","_ref13","openPrerenderPromise","_ref14","setStatePromise","prerenderPromise","_ref15","setWindowNamePromise","_ref16","loadUrlPromise","builtUrl","_ref17","watchForClosePromise","watchForClose","onDisplayPromise","openBridgePromise","bridgeUrl","bridgeDomain","runTimeoutPromise","onRenderedPromise","react","React","ReactDOM","_React$Component","subClass","superClass","__proto__","_class","componentDidMount","findDOMNode","componentDidUpdate","Component","vue","Vue","component","inheritAttrs","mounted","$el","$attrs","watch","deep","angular","ng","directive","g","toUpperCase","scope","restrict","controller","$scope","$element","safeApply","$root","$$phase","$apply","getProps","instance","$watch","angular2","NgModule","ElementRef","NgZone","internalProps","zone","run","ComponentInstance","selector","template","inputs","Class","elementRef","_props","ngOnInit","targetElement","nativeElement","ngDoCheck","obj1","obj2","checked","declarations","defaultContainerTemplate","_ref$dimensions","div","cspNonce","classList","add","remove","defaultPrerenderTemplate","spinner","props_defaultNoop","props_decorateOnce","component_clean","component_component","_options$props","_options$dimensions","_options$autoResize","_options$allowedParen","allowedParentDomains","_options$attributes","_options$defaultConte","defaultContext","_options$containerTem","_options$prerenderTem","validate","_options$eligible","eligible","_options$logger","logger","info","_dimensions$width","_dimensions$height","driverCache","instances","isChild","payload","registerChild","xprops","components","onPropHandlers","parentComponentWindow","ref","ancestor","_getAllFramesInWindow2","normalizedProps","_eligible","eligibility","reason","_render","finalContext","isEligible","clone","_ref3$decorate","renderTo","driver","driverName","dep","drivers","canRenderTo","initialized","sourceElement","originalEvent","comp","destroyPromise","responseListeners","_responseListeners$ke2"],"mappings":"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","sourcesContent":["!function(root, factory) {\n    \"object\" == typeof exports && \"object\" == typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(\"zoid\", [], factory) : \"object\" == typeof exports ? exports.zoid = factory() : root.zoid = factory();\n}(\"undefined\" != typeof self ? self : this, (function() {\n    return function(modules) {\n        var installedModules = {};\n        function __webpack_require__(moduleId) {\n            if (installedModules[moduleId]) return installedModules[moduleId].exports;\n            var module = installedModules[moduleId] = {\n                i: moduleId,\n                l: !1,\n                exports: {}\n            };\n            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n            module.l = !0;\n            return module.exports;\n        }\n        __webpack_require__.m = modules;\n        __webpack_require__.c = installedModules;\n        __webpack_require__.d = function(exports, name, getter) {\n            __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n                enumerable: !0,\n                get: getter\n            });\n        };\n        __webpack_require__.r = function(exports) {\n            \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {\n                value: \"Module\"\n            });\n            Object.defineProperty(exports, \"__esModule\", {\n                value: !0\n            });\n        };\n        __webpack_require__.t = function(value, mode) {\n            1 & mode && (value = __webpack_require__(value));\n            if (8 & mode) return value;\n            if (4 & mode && \"object\" == typeof value && value && value.__esModule) return value;\n            var ns = Object.create(null);\n            __webpack_require__.r(ns);\n            Object.defineProperty(ns, \"default\", {\n                enumerable: !0,\n                value: value\n            });\n            if (2 & mode && \"string\" != typeof value) for (var key in value) __webpack_require__.d(ns, key, function(key) {\n                return value[key];\n            }.bind(null, key));\n            return ns;\n        };\n        __webpack_require__.n = function(module) {\n            var getter = module && module.__esModule ? function() {\n                return module.default;\n            } : function() {\n                return module;\n            };\n            __webpack_require__.d(getter, \"a\", getter);\n            return getter;\n        };\n        __webpack_require__.o = function(object, property) {\n            return {}.hasOwnProperty.call(object, property);\n        };\n        __webpack_require__.p = \"\";\n        return __webpack_require__(__webpack_require__.s = 0);\n    }([ function(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n        __webpack_require__.r(__webpack_exports__);\n        __webpack_require__.d(__webpack_exports__, \"PopupOpenError\", (function() {\n            return PopupOpenError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"create\", (function() {\n            return create;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"destroy\", (function() {\n            return component_destroy;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"destroyComponents\", (function() {\n            return destroyComponents;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"destroyAll\", (function() {\n            return destroyAll;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"PROP_TYPE\", (function() {\n            return PROP_TYPE;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"PROP_SERIALIZATION\", (function() {\n            return PROP_SERIALIZATION;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"CONTEXT\", (function() {\n            return CONTEXT;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"EVENT\", (function() {\n            return EVENT;\n        }));\n        function _extends() {\n            return (_extends = Object.assign || function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n                    for (var key in source) ({}).hasOwnProperty.call(source, key) && (target[key] = source[key]);\n                }\n                return target;\n            }).apply(this, arguments);\n        }\n        function utils_isPromise(item) {\n            try {\n                if (!item) return !1;\n                if (\"undefined\" != typeof Promise && item instanceof Promise) return !0;\n                if (\"undefined\" != typeof window && \"function\" == typeof window.Window && item instanceof window.Window) return !1;\n                if (\"undefined\" != typeof window && \"function\" == typeof window.constructor && item instanceof window.constructor) return !1;\n                var _toString = {}.toString;\n                if (_toString) {\n                    var name = _toString.call(item);\n                    if (\"[object Window]\" === name || \"[object global]\" === name || \"[object DOMWindow]\" === name) return !1;\n                }\n                if (\"function\" == typeof item.then) return !0;\n            } catch (err) {\n                return !1;\n            }\n            return !1;\n        }\n        var dispatchedErrors = [];\n        var possiblyUnhandledPromiseHandlers = [];\n        var activeCount = 0;\n        var flushPromise;\n        function flushActive() {\n            if (!activeCount && flushPromise) {\n                var promise = flushPromise;\n                flushPromise = null;\n                promise.resolve();\n            }\n        }\n        function startActive() {\n            activeCount += 1;\n        }\n        function endActive() {\n            activeCount -= 1;\n            flushActive();\n        }\n        var promise_ZalgoPromise = function() {\n            function ZalgoPromise(handler) {\n                var _this = this;\n                this.resolved = void 0;\n                this.rejected = void 0;\n                this.errorHandled = void 0;\n                this.value = void 0;\n                this.error = void 0;\n                this.handlers = void 0;\n                this.dispatching = void 0;\n                this.stack = void 0;\n                this.resolved = !1;\n                this.rejected = !1;\n                this.errorHandled = !1;\n                this.handlers = [];\n                if (handler) {\n                    var _result;\n                    var _error;\n                    var resolved = !1;\n                    var rejected = !1;\n                    var isAsync = !1;\n                    startActive();\n                    try {\n                        handler((function(res) {\n                            if (isAsync) _this.resolve(res); else {\n                                resolved = !0;\n                                _result = res;\n                            }\n                        }), (function(err) {\n                            if (isAsync) _this.reject(err); else {\n                                rejected = !0;\n                                _error = err;\n                            }\n                        }));\n                    } catch (err) {\n                        endActive();\n                        this.reject(err);\n                        return;\n                    }\n                    endActive();\n                    isAsync = !0;\n                    resolved ? this.resolve(_result) : rejected && this.reject(_error);\n                }\n            }\n            var _proto = ZalgoPromise.prototype;\n            _proto.resolve = function(result) {\n                if (this.resolved || this.rejected) return this;\n                if (utils_isPromise(result)) throw new Error(\"Can not resolve promise with another promise\");\n                this.resolved = !0;\n                this.value = result;\n                this.dispatch();\n                return this;\n            };\n            _proto.reject = function(error) {\n                var _this2 = this;\n                if (this.resolved || this.rejected) return this;\n                if (utils_isPromise(error)) throw new Error(\"Can not reject promise with another promise\");\n                if (!error) {\n                    var _err = error && \"function\" == typeof error.toString ? error.toString() : {}.toString.call(error);\n                    error = new Error(\"Expected reject to be called with Error, got \" + _err);\n                }\n                this.rejected = !0;\n                this.error = error;\n                this.errorHandled || setTimeout((function() {\n                    _this2.errorHandled || function(err, promise) {\n                        if (-1 === dispatchedErrors.indexOf(err)) {\n                            dispatchedErrors.push(err);\n                            setTimeout((function() {\n                                throw err;\n                            }), 1);\n                            for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) possiblyUnhandledPromiseHandlers[j](err, promise);\n                        }\n                    }(error, _this2);\n                }), 1);\n                this.dispatch();\n                return this;\n            };\n            _proto.asyncReject = function(error) {\n                this.errorHandled = !0;\n                this.reject(error);\n                return this;\n            };\n            _proto.dispatch = function() {\n                var resolved = this.resolved, rejected = this.rejected, handlers = this.handlers;\n                if (!this.dispatching && (resolved || rejected)) {\n                    this.dispatching = !0;\n                    startActive();\n                    var chain = function(firstPromise, secondPromise) {\n                        return firstPromise.then((function(res) {\n                            secondPromise.resolve(res);\n                        }), (function(err) {\n                            secondPromise.reject(err);\n                        }));\n                    };\n                    for (var i = 0; i < handlers.length; i++) {\n                        var _handlers$i = handlers[i], onSuccess = _handlers$i.onSuccess, onError = _handlers$i.onError, promise = _handlers$i.promise;\n                        var _result2 = void 0;\n                        if (resolved) try {\n                            _result2 = onSuccess ? onSuccess(this.value) : this.value;\n                        } catch (err) {\n                            promise.reject(err);\n                            continue;\n                        } else if (rejected) {\n                            if (!onError) {\n                                promise.reject(this.error);\n                                continue;\n                            }\n                            try {\n                                _result2 = onError(this.error);\n                            } catch (err) {\n                                promise.reject(err);\n                                continue;\n                            }\n                        }\n                        if (_result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected)) {\n                            _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error);\n                            _result2.errorHandled = !0;\n                        } else utils_isPromise(_result2) ? _result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected) ? _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error) : chain(_result2, promise) : promise.resolve(_result2);\n                    }\n                    handlers.length = 0;\n                    this.dispatching = !1;\n                    endActive();\n                }\n            };\n            _proto.then = function(onSuccess, onError) {\n                if (onSuccess && \"function\" != typeof onSuccess && !onSuccess.call) throw new Error(\"Promise.then expected a function for success handler\");\n                if (onError && \"function\" != typeof onError && !onError.call) throw new Error(\"Promise.then expected a function for error handler\");\n                var promise = new ZalgoPromise;\n                this.handlers.push({\n                    promise: promise,\n                    onSuccess: onSuccess,\n                    onError: onError\n                });\n                this.errorHandled = !0;\n                this.dispatch();\n                return promise;\n            };\n            _proto.catch = function(onError) {\n                return this.then(void 0, onError);\n            };\n            _proto.finally = function(onFinally) {\n                if (onFinally && \"function\" != typeof onFinally && !onFinally.call) throw new Error(\"Promise.finally expected a function\");\n                return this.then((function(result) {\n                    return ZalgoPromise.try(onFinally).then((function() {\n                        return result;\n                    }));\n                }), (function(err) {\n                    return ZalgoPromise.try(onFinally).then((function() {\n                        throw err;\n                    }));\n                }));\n            };\n            _proto.timeout = function(time, err) {\n                var _this3 = this;\n                if (this.resolved || this.rejected) return this;\n                var timeout = setTimeout((function() {\n                    _this3.resolved || _this3.rejected || _this3.reject(err || new Error(\"Promise timed out after \" + time + \"ms\"));\n                }), time);\n                return this.then((function(result) {\n                    clearTimeout(timeout);\n                    return result;\n                }));\n            };\n            _proto.toPromise = function() {\n                if (\"undefined\" == typeof Promise) throw new TypeError(\"Could not find Promise\");\n                return Promise.resolve(this);\n            };\n            ZalgoPromise.resolve = function(value) {\n                return value instanceof ZalgoPromise ? value : utils_isPromise(value) ? new ZalgoPromise((function(resolve, reject) {\n                    return value.then(resolve, reject);\n                })) : (new ZalgoPromise).resolve(value);\n            };\n            ZalgoPromise.reject = function(error) {\n                return (new ZalgoPromise).reject(error);\n            };\n            ZalgoPromise.asyncReject = function(error) {\n                return (new ZalgoPromise).asyncReject(error);\n            };\n            ZalgoPromise.all = function(promises) {\n                var promise = new ZalgoPromise;\n                var count = promises.length;\n                var results = [];\n                if (!count) {\n                    promise.resolve(results);\n                    return promise;\n                }\n                var chain = function(i, firstPromise, secondPromise) {\n                    return firstPromise.then((function(res) {\n                        results[i] = res;\n                        0 == (count -= 1) && promise.resolve(results);\n                    }), (function(err) {\n                        secondPromise.reject(err);\n                    }));\n                };\n                for (var i = 0; i < promises.length; i++) {\n                    var prom = promises[i];\n                    if (prom instanceof ZalgoPromise) {\n                        if (prom.resolved) {\n                            results[i] = prom.value;\n                            count -= 1;\n                            continue;\n                        }\n                    } else if (!utils_isPromise(prom)) {\n                        results[i] = prom;\n                        count -= 1;\n                        continue;\n                    }\n                    chain(i, ZalgoPromise.resolve(prom), promise);\n                }\n                0 === count && promise.resolve(results);\n                return promise;\n            };\n            ZalgoPromise.hash = function(promises) {\n                var result = {};\n                var awaitPromises = [];\n                var _loop = function(key) {\n                    if (promises.hasOwnProperty(key)) {\n                        var value = promises[key];\n                        utils_isPromise(value) ? awaitPromises.push(value.then((function(res) {\n                            result[key] = res;\n                        }))) : result[key] = value;\n                    }\n                };\n                for (var key in promises) _loop(key);\n                return ZalgoPromise.all(awaitPromises).then((function() {\n                    return result;\n                }));\n            };\n            ZalgoPromise.map = function(items, method) {\n                return ZalgoPromise.all(items.map(method));\n            };\n            ZalgoPromise.onPossiblyUnhandledException = function(handler) {\n                return function(handler) {\n                    possiblyUnhandledPromiseHandlers.push(handler);\n                    return {\n                        cancel: function() {\n                            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n                        }\n                    };\n                }(handler);\n            };\n            ZalgoPromise.try = function(method, context, args) {\n                if (method && \"function\" != typeof method && !method.call) throw new Error(\"Promise.try expected a function\");\n                var result;\n                startActive();\n                try {\n                    result = method.apply(context, args || []);\n                } catch (err) {\n                    endActive();\n                    return ZalgoPromise.reject(err);\n                }\n                endActive();\n                return ZalgoPromise.resolve(result);\n            };\n            ZalgoPromise.delay = function(_delay) {\n                return new ZalgoPromise((function(resolve) {\n                    setTimeout(resolve, _delay);\n                }));\n            };\n            ZalgoPromise.isPromise = function(value) {\n                return !!(value && value instanceof ZalgoPromise) || utils_isPromise(value);\n            };\n            ZalgoPromise.flush = function() {\n                return function(Zalgo) {\n                    var promise = flushPromise = flushPromise || new Zalgo;\n                    flushActive();\n                    return promise;\n                }(ZalgoPromise);\n            };\n            return ZalgoPromise;\n        }();\n        function isRegex(item) {\n            return \"[object RegExp]\" === {}.toString.call(item);\n        }\n        var WINDOW_TYPE = {\n            IFRAME: \"iframe\",\n            POPUP: \"popup\"\n        };\n        var IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n        function isAboutProtocol(win) {\n            void 0 === win && (win = window);\n            return \"about:\" === win.location.protocol;\n        }\n        function utils_getParent(win) {\n            void 0 === win && (win = window);\n            if (win) try {\n                if (win.parent && win.parent !== win) return win.parent;\n            } catch (err) {}\n        }\n        function getOpener(win) {\n            void 0 === win && (win = window);\n            if (win && !utils_getParent(win)) try {\n                return win.opener;\n            } catch (err) {}\n        }\n        function canReadFromWindow(win) {\n            try {\n                return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function getActualDomain(win) {\n            void 0 === win && (win = window);\n            var location = win.location;\n            if (!location) throw new Error(\"Can not read window location\");\n            var protocol = location.protocol;\n            if (!protocol) throw new Error(\"Can not read window protocol\");\n            if (\"file:\" === protocol) return \"file://\";\n            if (\"about:\" === protocol) {\n                var parent = utils_getParent(win);\n                return parent && canReadFromWindow() ? getActualDomain(parent) : \"about://\";\n            }\n            var host = location.host;\n            if (!host) throw new Error(\"Can not read window host\");\n            return protocol + \"//\" + host;\n        }\n        function getDomain(win) {\n            void 0 === win && (win = window);\n            var domain = getActualDomain(win);\n            return domain && win.mockDomain && 0 === win.mockDomain.indexOf(\"mock:\") ? win.mockDomain : domain;\n        }\n        function isSameDomain(win) {\n            if (!function(win) {\n                try {\n                    if (win === window) return !0;\n                } catch (err) {}\n                try {\n                    var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n                    if (desc && !1 === desc.enumerable) return !1;\n                } catch (err) {}\n                try {\n                    if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                } catch (err) {}\n                try {\n                    if (getActualDomain(win) === getActualDomain(window)) return !0;\n                } catch (err) {}\n                return !1;\n            }(win)) return !1;\n            try {\n                if (win === window) return !0;\n                if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                if (getDomain(window) === getDomain(win)) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function assertSameDomain(win) {\n            if (!isSameDomain(win)) throw new Error(\"Expected window to be same domain\");\n            return win;\n        }\n        function isAncestorParent(parent, child) {\n            if (!parent || !child) return !1;\n            var childParent = utils_getParent(child);\n            return childParent ? childParent === parent : -1 !== function(win) {\n                var result = [];\n                try {\n                    for (;win.parent !== win; ) {\n                        result.push(win.parent);\n                        win = win.parent;\n                    }\n                } catch (err) {}\n                return result;\n            }(child).indexOf(parent);\n        }\n        function getFrames(win) {\n            var result = [];\n            var frames;\n            try {\n                frames = win.frames;\n            } catch (err) {\n                frames = win;\n            }\n            var len;\n            try {\n                len = frames.length;\n            } catch (err) {}\n            if (0 === len) return result;\n            if (len) {\n                for (var i = 0; i < len; i++) {\n                    var frame = void 0;\n                    try {\n                        frame = frames[i];\n                    } catch (err) {\n                        continue;\n                    }\n                    result.push(frame);\n                }\n                return result;\n            }\n            for (var _i = 0; _i < 100; _i++) {\n                var _frame = void 0;\n                try {\n                    _frame = frames[_i];\n                } catch (err) {\n                    return result;\n                }\n                if (!_frame) return result;\n                result.push(_frame);\n            }\n            return result;\n        }\n        function getAllChildFrames(win) {\n            var result = [];\n            for (var _i3 = 0, _getFrames2 = getFrames(win); _i3 < _getFrames2.length; _i3++) {\n                var frame = _getFrames2[_i3];\n                result.push(frame);\n                for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame); _i5 < _getAllChildFrames2.length; _i5++) result.push(_getAllChildFrames2[_i5]);\n            }\n            return result;\n        }\n        function getTop(win) {\n            void 0 === win && (win = window);\n            try {\n                if (win.top) return win.top;\n            } catch (err) {}\n            if (utils_getParent(win) === win) return win;\n            try {\n                if (isAncestorParent(window, win) && window.top) return window.top;\n            } catch (err) {}\n            try {\n                if (isAncestorParent(win, window) && window.top) return window.top;\n            } catch (err) {}\n            for (var _i7 = 0, _getAllChildFrames4 = getAllChildFrames(win); _i7 < _getAllChildFrames4.length; _i7++) {\n                var frame = _getAllChildFrames4[_i7];\n                try {\n                    if (frame.top) return frame.top;\n                } catch (err) {}\n                if (utils_getParent(frame) === frame) return frame;\n            }\n        }\n        function getAllFramesInWindow(win) {\n            var top = getTop(win);\n            if (!top) throw new Error(\"Can not determine top window\");\n            var result = [].concat(getAllChildFrames(top), [ top ]);\n            -1 === result.indexOf(win) && (result = [].concat(result, [ win ], getAllChildFrames(win)));\n            return result;\n        }\n        var iframeWindows = [];\n        var iframeFrames = [];\n        function isWindowClosed(win, allowMock) {\n            void 0 === allowMock && (allowMock = !0);\n            try {\n                if (win === window) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (!win) return !0;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (win.closed) return !0;\n            } catch (err) {\n                return !err || err.message !== IE_WIN_ACCESS_ERROR;\n            }\n            if (allowMock && isSameDomain(win)) try {\n                if (win.mockclosed) return !0;\n            } catch (err) {}\n            try {\n                if (!win.parent || !win.top) return !0;\n            } catch (err) {}\n            var iframeIndex = function(collection, item) {\n                for (var i = 0; i < collection.length; i++) try {\n                    if (collection[i] === item) return i;\n                } catch (err) {}\n                return -1;\n            }(iframeWindows, win);\n            if (-1 !== iframeIndex) {\n                var frame = iframeFrames[iframeIndex];\n                if (frame && function(frame) {\n                    if (!frame.contentWindow) return !0;\n                    if (!frame.parentNode) return !0;\n                    var doc = frame.ownerDocument;\n                    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n                        var parent = frame;\n                        for (;parent.parentNode && parent.parentNode !== parent; ) parent = parent.parentNode;\n                        if (!parent.host || !doc.documentElement.contains(parent.host)) return !0;\n                    }\n                    return !1;\n                }(frame)) return !0;\n            }\n            return !1;\n        }\n        function utils_getUserAgent(win) {\n            return (win = win || window).navigator.mockUserAgent || win.navigator.userAgent;\n        }\n        function getFrameByName(win, name) {\n            var winFrames = getFrames(win);\n            for (var _i9 = 0; _i9 < winFrames.length; _i9++) {\n                var childFrame = winFrames[_i9];\n                try {\n                    if (isSameDomain(childFrame) && childFrame.name === name && -1 !== winFrames.indexOf(childFrame)) return childFrame;\n                } catch (err) {}\n            }\n            try {\n                if (-1 !== winFrames.indexOf(win.frames[name])) return win.frames[name];\n            } catch (err) {}\n            try {\n                if (-1 !== winFrames.indexOf(win[name])) return win[name];\n            } catch (err) {}\n        }\n        function isOpener(parent, child) {\n            return parent === getOpener(child);\n        }\n        function getAncestor(win) {\n            void 0 === win && (win = window);\n            return getOpener(win = win || window) || utils_getParent(win) || void 0;\n        }\n        function anyMatch(collection1, collection2) {\n            for (var _i17 = 0; _i17 < collection1.length; _i17++) {\n                var item1 = collection1[_i17];\n                for (var _i19 = 0; _i19 < collection2.length; _i19++) if (item1 === collection2[_i19]) return !0;\n            }\n            return !1;\n        }\n        function getDistanceFromTop(win) {\n            void 0 === win && (win = window);\n            var distance = 0;\n            var parent = win;\n            for (;parent; ) (parent = utils_getParent(parent)) && (distance += 1);\n            return distance;\n        }\n        function isSameTopWindow(win1, win2) {\n            var top1 = getTop(win1) || win1;\n            var top2 = getTop(win2) || win2;\n            try {\n                if (top1 && top2) return top1 === top2;\n            } catch (err) {}\n            var allFrames1 = getAllFramesInWindow(win1);\n            var allFrames2 = getAllFramesInWindow(win2);\n            if (anyMatch(allFrames1, allFrames2)) return !0;\n            var opener1 = getOpener(top1);\n            var opener2 = getOpener(top2);\n            return opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2) || opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1), \n            !1;\n        }\n        function matchDomain(pattern, origin) {\n            if (\"string\" == typeof pattern) {\n                if (\"string\" == typeof origin) return \"*\" === pattern || origin === pattern;\n                if (isRegex(origin)) return !1;\n                if (Array.isArray(origin)) return !1;\n            }\n            return isRegex(pattern) ? isRegex(origin) ? pattern.toString() === origin.toString() : !Array.isArray(origin) && Boolean(origin.match(pattern)) : !!Array.isArray(pattern) && (Array.isArray(origin) ? JSON.stringify(pattern) === JSON.stringify(origin) : !isRegex(origin) && pattern.some((function(subpattern) {\n                return matchDomain(subpattern, origin);\n            })));\n        }\n        function getDomainFromUrl(url) {\n            return url.match(/^(https?|mock|file):\\/\\//) ? url.split(\"/\").slice(0, 3).join(\"/\") : getDomain();\n        }\n        function onCloseWindow(win, callback, delay, maxtime) {\n            void 0 === delay && (delay = 1e3);\n            void 0 === maxtime && (maxtime = 1 / 0);\n            var timeout;\n            !function check() {\n                if (isWindowClosed(win)) {\n                    timeout && clearTimeout(timeout);\n                    return callback();\n                }\n                if (maxtime <= 0) clearTimeout(timeout); else {\n                    maxtime -= delay;\n                    timeout = setTimeout(check, delay);\n                }\n            }();\n            return {\n                cancel: function() {\n                    timeout && clearTimeout(timeout);\n                }\n            };\n        }\n        function isWindow(obj) {\n            try {\n                if (obj === window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (\"[object Window]\" === {}.toString.call(obj)) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (window.Window && obj instanceof window.Window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.self === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.parent === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.top === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && \"__unlikely_value__\" === obj.__cross_domain_utils_window_check__) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function normalizeMockUrl(url) {\n            if (!(domain = getDomainFromUrl(url), 0 === domain.indexOf(\"mock:\"))) return url;\n            var domain;\n            throw new Error(\"Mock urls not supported out of test mode\");\n        }\n        function closeWindow(win) {\n            try {\n                win.close();\n            } catch (err) {}\n        }\n        function util_safeIndexOf(collection, item) {\n            for (var i = 0; i < collection.length; i++) try {\n                if (collection[i] === item) return i;\n            } catch (err) {}\n            return -1;\n        }\n        var weakmap_CrossDomainSafeWeakMap = function() {\n            function CrossDomainSafeWeakMap() {\n                this.name = void 0;\n                this.weakmap = void 0;\n                this.keys = void 0;\n                this.values = void 0;\n                this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\";\n                if (function() {\n                    if (\"undefined\" == typeof WeakMap) return !1;\n                    if (void 0 === Object.freeze) return !1;\n                    try {\n                        var testWeakMap = new WeakMap;\n                        var testKey = {};\n                        Object.freeze(testKey);\n                        testWeakMap.set(testKey, \"__testvalue__\");\n                        return \"__testvalue__\" === testWeakMap.get(testKey);\n                    } catch (err) {\n                        return !1;\n                    }\n                }()) try {\n                    this.weakmap = new WeakMap;\n                } catch (err) {}\n                this.keys = [];\n                this.values = [];\n            }\n            var _proto = CrossDomainSafeWeakMap.prototype;\n            _proto._cleanupClosedWindows = function() {\n                var weakmap = this.weakmap;\n                var keys = this.keys;\n                for (var i = 0; i < keys.length; i++) {\n                    var value = keys[i];\n                    if (isWindow(value) && isWindowClosed(value)) {\n                        if (weakmap) try {\n                            weakmap.delete(value);\n                        } catch (err) {}\n                        keys.splice(i, 1);\n                        this.values.splice(i, 1);\n                        i -= 1;\n                    }\n                }\n            };\n            _proto.isSafeToReadWrite = function(key) {\n                return !isWindow(key);\n            };\n            _proto.set = function(key, value) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.set(key, value);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var name = this.name;\n                    var entry = key[name];\n                    entry && entry[0] === key ? entry[1] = value : Object.defineProperty(key, name, {\n                        value: [ key, value ],\n                        writable: !0\n                    });\n                    return;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var values = this.values;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 === index) {\n                    keys.push(key);\n                    values.push(value);\n                } else values[index] = value;\n            };\n            _proto.get = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return weakmap.get(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return entry && entry[0] === key ? entry[1] : void 0;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var index = util_safeIndexOf(this.keys, key);\n                if (-1 !== index) return this.values[index];\n            };\n            _proto.delete = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.delete(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    entry && entry[0] === key && (entry[0] = entry[1] = void 0);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 !== index) {\n                    keys.splice(index, 1);\n                    this.values.splice(index, 1);\n                }\n            };\n            _proto.has = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return !0;\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return !(!entry || entry[0] !== key);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                return -1 !== util_safeIndexOf(this.keys, key);\n            };\n            _proto.getOrSet = function(key, getter) {\n                if (this.has(key)) return this.get(key);\n                var value = getter();\n                this.set(key, value);\n                return value;\n            };\n            return CrossDomainSafeWeakMap;\n        }();\n        function getFunctionName(fn) {\n            return fn.name || fn.__name__ || fn.displayName || \"anonymous\";\n        }\n        function setFunctionName(fn, name) {\n            try {\n                delete fn.name;\n                fn.name = name;\n            } catch (err) {}\n            fn.__name__ = fn.displayName = name;\n            return fn;\n        }\n        function base64encode(str) {\n            if (\"function\" == typeof btoa) return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (function(m, p1) {\n                return String.fromCharCode(parseInt(p1, 16));\n            })));\n            if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"utf8\").toString(\"base64\");\n            throw new Error(\"Can not find window.btoa or Buffer\");\n        }\n        function uniqueID() {\n            var chars = \"0123456789abcdef\";\n            return \"xxxxxxxxxx\".replace(/./g, (function() {\n                return chars.charAt(Math.floor(Math.random() * chars.length));\n            })) + \"_\" + base64encode((new Date).toISOString().slice(11, 19).replace(\"T\", \".\")).replace(/[^a-zA-Z0-9]/g, \"\").toLowerCase();\n        }\n        var objectIDs;\n        function serializeArgs(args) {\n            try {\n                return JSON.stringify([].slice.call(args), (function(subkey, val) {\n                    return \"function\" == typeof val ? \"memoize[\" + function(obj) {\n                        objectIDs = objectIDs || new weakmap_CrossDomainSafeWeakMap;\n                        if (null == obj || \"object\" != typeof obj && \"function\" != typeof obj) throw new Error(\"Invalid object\");\n                        var uid = objectIDs.get(obj);\n                        if (!uid) {\n                            uid = typeof obj + \":\" + uniqueID();\n                            objectIDs.set(obj, uid);\n                        }\n                        return uid;\n                    }(val) + \"]\" : val;\n                }));\n            } catch (err) {\n                throw new Error(\"Arguments not serializable -- can not be used to memoize\");\n            }\n        }\n        var memoizedFunctions = [];\n        function memoize(method, options) {\n            var _this = this;\n            void 0 === options && (options = {});\n            var cacheMap = new weakmap_CrossDomainSafeWeakMap;\n            var memoizedFunction = function() {\n                for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n                var cache = cacheMap.getOrSet(options.thisNamespace ? this : method, (function() {\n                    return {};\n                }));\n                var key = serializeArgs(args);\n                var cacheTime = options.time;\n                cache[key] && cacheTime && Date.now() - cache[key].time < cacheTime && delete cache[key];\n                if (cache[key]) return cache[key].value;\n                var time = Date.now();\n                var value = method.apply(this, arguments);\n                cache[key] = {\n                    time: time,\n                    value: value\n                };\n                return cache[key].value;\n            };\n            memoizedFunction.reset = function() {\n                cacheMap.delete(options.thisNamespace ? _this : method);\n            };\n            memoizedFunctions.push(memoizedFunction);\n            return setFunctionName(memoizedFunction, (options.name || getFunctionName(method)) + \"::memoized\");\n        }\n        memoize.clear = function() {\n            for (var _i2 = 0; _i2 < memoizedFunctions.length; _i2++) memoizedFunctions[_i2].reset();\n        };\n        function memoizePromise(method) {\n            var cache = {};\n            function memoizedPromiseFunction() {\n                var _arguments = arguments, _this2 = this;\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                var key = serializeArgs(args);\n                if (cache.hasOwnProperty(key)) return cache[key];\n                cache[key] = promise_ZalgoPromise.try((function() {\n                    return method.apply(_this2, _arguments);\n                })).finally((function() {\n                    delete cache[key];\n                }));\n                return cache[key];\n            }\n            memoizedPromiseFunction.reset = function() {\n                cache = {};\n            };\n            return setFunctionName(memoizedPromiseFunction, getFunctionName(method) + \"::promiseMemoized\");\n        }\n        function inlineMemoize(method, logic, args) {\n            void 0 === args && (args = []);\n            var cache = method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {};\n            var key = serializeArgs(args);\n            return cache.hasOwnProperty(key) ? cache[key] : cache[key] = logic.apply(void 0, args);\n        }\n        function src_util_noop() {}\n        function once(method) {\n            var called = !1;\n            return setFunctionName((function() {\n                if (!called) {\n                    called = !0;\n                    return method.apply(this, arguments);\n                }\n            }), getFunctionName(method) + \"::once\");\n        }\n        function stringifyError(err, level) {\n            void 0 === level && (level = 1);\n            if (level >= 3) return \"stringifyError stack overflow\";\n            try {\n                if (!err) return \"<unknown error: \" + {}.toString.call(err) + \">\";\n                if (\"string\" == typeof err) return err;\n                if (err instanceof Error) {\n                    var stack = err && err.stack;\n                    var message = err && err.message;\n                    if (stack && message) return -1 !== stack.indexOf(message) ? stack : message + \"\\n\" + stack;\n                    if (stack) return stack;\n                    if (message) return message;\n                }\n                return err && err.toString && \"function\" == typeof err.toString ? err.toString() : {}.toString.call(err);\n            } catch (newErr) {\n                return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n            }\n        }\n        function stringify(item) {\n            return \"string\" == typeof item ? item : item && item.toString && \"function\" == typeof item.toString ? item.toString() : {}.toString.call(item);\n        }\n        function extend(obj, source) {\n            if (!source) return obj;\n            if (Object.assign) return Object.assign(obj, source);\n            for (var key in source) source.hasOwnProperty(key) && (obj[key] = source[key]);\n            return obj;\n        }\n        function identity(item) {\n            return item;\n        }\n        function safeInterval(method, time) {\n            var timeout;\n            !function loop() {\n                timeout = setTimeout((function() {\n                    method();\n                    loop();\n                }), time);\n            }();\n            return {\n                cancel: function() {\n                    clearTimeout(timeout);\n                }\n            };\n        }\n        function defineLazyProp(obj, key, getter) {\n            if (Array.isArray(obj)) {\n                if (\"number\" != typeof key) throw new TypeError(\"Array key must be number\");\n            } else if (\"object\" == typeof obj && null !== obj && \"string\" != typeof key) throw new TypeError(\"Object key must be string\");\n            Object.defineProperty(obj, key, {\n                configurable: !0,\n                enumerable: !0,\n                get: function() {\n                    delete obj[key];\n                    var value = getter();\n                    obj[key] = value;\n                    return value;\n                },\n                set: function(value) {\n                    delete obj[key];\n                    obj[key] = value;\n                }\n            });\n        }\n        function arrayFrom(item) {\n            return [].slice.call(item);\n        }\n        function isObjectObject(obj) {\n            return \"object\" == typeof (item = obj) && null !== item && \"[object Object]\" === {}.toString.call(obj);\n            var item;\n        }\n        function isPlainObject(obj) {\n            if (!isObjectObject(obj)) return !1;\n            var constructor = obj.constructor;\n            if (\"function\" != typeof constructor) return !1;\n            var prototype = constructor.prototype;\n            return !!isObjectObject(prototype) && !!prototype.hasOwnProperty(\"isPrototypeOf\");\n        }\n        function replaceObject(item, replacer, fullKey) {\n            void 0 === fullKey && (fullKey = \"\");\n            if (Array.isArray(item)) {\n                var length = item.length;\n                var result = [];\n                var _loop2 = function(i) {\n                    defineLazyProp(result, i, (function() {\n                        var itemKey = fullKey ? fullKey + \".\" + i : \"\" + i;\n                        var child = replacer(item[i], i, itemKey);\n                        (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n                        return child;\n                    }));\n                };\n                for (var i = 0; i < length; i++) _loop2(i);\n                return result;\n            }\n            if (isPlainObject(item)) {\n                var _result = {};\n                var _loop3 = function(key) {\n                    if (!item.hasOwnProperty(key)) return \"continue\";\n                    defineLazyProp(_result, key, (function() {\n                        var itemKey = fullKey ? fullKey + \".\" + key : \"\" + key;\n                        var child = replacer(item[key], key, itemKey);\n                        (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n                        return child;\n                    }));\n                };\n                for (var key in item) _loop3(key);\n                return _result;\n            }\n            throw new Error(\"Pass an object or array\");\n        }\n        function isDefined(value) {\n            return null != value;\n        }\n        function util_isRegex(item) {\n            return \"[object RegExp]\" === {}.toString.call(item);\n        }\n        function util_getOrSet(obj, key, getter) {\n            if (obj.hasOwnProperty(key)) return obj[key];\n            var val = getter();\n            obj[key] = val;\n            return val;\n        }\n        function cleanup(obj) {\n            var tasks = [];\n            var cleaned = !1;\n            return {\n                set: function(name, item) {\n                    if (!cleaned) {\n                        obj[name] = item;\n                        this.register((function() {\n                            delete obj[name];\n                        }));\n                    }\n                    return item;\n                },\n                register: function(method) {\n                    cleaned ? method() : tasks.push(once(method));\n                },\n                all: function() {\n                    var results = [];\n                    cleaned = !0;\n                    for (;tasks.length; ) {\n                        var task = tasks.shift();\n                        results.push(task());\n                    }\n                    return promise_ZalgoPromise.all(results).then(src_util_noop);\n                }\n            };\n        }\n        function assertExists(name, thing) {\n            if (null == thing) throw new Error(\"Expected \" + name + \" to be present\");\n            return thing;\n        }\n        memoize((function(obj) {\n            var result = [];\n            for (var key in obj) obj.hasOwnProperty(key) && result.push(obj[key]);\n            return result;\n        }));\n        function isDocumentReady() {\n            return Boolean(document.body) && \"complete\" === document.readyState;\n        }\n        function isDocumentInteractive() {\n            return Boolean(document.body) && \"interactive\" === document.readyState;\n        }\n        function urlEncode(str) {\n            return str.replace(/\\?/g, \"%3F\").replace(/&/g, \"%26\").replace(/#/g, \"%23\").replace(/\\+/g, \"%2B\");\n        }\n        memoize((function() {\n            return new promise_ZalgoPromise((function(resolve) {\n                if (isDocumentReady() || isDocumentInteractive()) return resolve();\n                var interval = setInterval((function() {\n                    if (isDocumentReady() || isDocumentInteractive()) {\n                        clearInterval(interval);\n                        return resolve();\n                    }\n                }), 10);\n            }));\n        }));\n        function parseQuery(queryString) {\n            return inlineMemoize(parseQuery, (function() {\n                var params = {};\n                if (!queryString) return params;\n                if (-1 === queryString.indexOf(\"=\")) return params;\n                for (var _i2 = 0, _queryString$split2 = queryString.split(\"&\"); _i2 < _queryString$split2.length; _i2++) {\n                    var pair = _queryString$split2[_i2];\n                    (pair = pair.split(\"=\"))[0] && pair[1] && (params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]));\n                }\n                return params;\n            }), [ queryString ]);\n        }\n        function extendQuery(originalQuery, props) {\n            void 0 === props && (props = {});\n            return props && Object.keys(props).length ? function(obj) {\n                void 0 === obj && (obj = {});\n                return Object.keys(obj).filter((function(key) {\n                    return \"string\" == typeof obj[key];\n                })).map((function(key) {\n                    return urlEncode(key) + \"=\" + urlEncode(obj[key]);\n                })).join(\"&\");\n            }(_extends({}, parseQuery(originalQuery), props)) : originalQuery;\n        }\n        function appendChild(container, child) {\n            container.appendChild(child);\n        }\n        function isElement(element) {\n            return element instanceof window.Element || null !== element && \"object\" == typeof element && 1 === element.nodeType && \"object\" == typeof element.style && \"object\" == typeof element.ownerDocument;\n        }\n        function getElementSafe(id, doc) {\n            void 0 === doc && (doc = document);\n            return isElement(id) ? id : \"string\" == typeof id ? doc.querySelector(id) : void 0;\n        }\n        function elementReady(id) {\n            return new promise_ZalgoPromise((function(resolve, reject) {\n                var name = stringify(id);\n                var el = getElementSafe(id);\n                if (el) return resolve(el);\n                if (isDocumentReady()) return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n                var interval = setInterval((function() {\n                    if (el = getElementSafe(id)) {\n                        clearInterval(interval);\n                        return resolve(el);\n                    }\n                    if (isDocumentReady()) {\n                        clearInterval(interval);\n                        return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n                    }\n                }), 10);\n            }));\n        }\n        function PopupOpenError(message) {\n            this.message = message;\n        }\n        PopupOpenError.prototype = Object.create(Error.prototype);\n        var awaitFrameLoadPromises;\n        function awaitFrameLoad(frame) {\n            if ((awaitFrameLoadPromises = awaitFrameLoadPromises || new weakmap_CrossDomainSafeWeakMap).has(frame)) {\n                var _promise = awaitFrameLoadPromises.get(frame);\n                if (_promise) return _promise;\n            }\n            var promise = new promise_ZalgoPromise((function(resolve, reject) {\n                frame.addEventListener(\"load\", (function() {\n                    !function(frame) {\n                        !function() {\n                            for (var i = 0; i < iframeWindows.length; i++) {\n                                var closed = !1;\n                                try {\n                                    closed = iframeWindows[i].closed;\n                                } catch (err) {}\n                                if (closed) {\n                                    iframeFrames.splice(i, 1);\n                                    iframeWindows.splice(i, 1);\n                                }\n                            }\n                        }();\n                        if (frame && frame.contentWindow) try {\n                            iframeWindows.push(frame.contentWindow);\n                            iframeFrames.push(frame);\n                        } catch (err) {}\n                    }(frame);\n                    resolve(frame);\n                }));\n                frame.addEventListener(\"error\", (function(err) {\n                    frame.contentWindow ? resolve(frame) : reject(err);\n                }));\n            }));\n            awaitFrameLoadPromises.set(frame, promise);\n            return promise;\n        }\n        function awaitFrameWindow(frame) {\n            return awaitFrameLoad(frame).then((function(loadedFrame) {\n                if (!loadedFrame.contentWindow) throw new Error(\"Could not find window in iframe\");\n                return loadedFrame.contentWindow;\n            }));\n        }\n        function dom_iframe(options, container) {\n            void 0 === options && (options = {});\n            var style = options.style || {};\n            var frame = function(tag, options, container) {\n                void 0 === tag && (tag = \"div\");\n                void 0 === options && (options = {});\n                tag = tag.toLowerCase();\n                var element = document.createElement(tag);\n                options.style && extend(element.style, options.style);\n                options.class && (element.className = options.class.join(\" \"));\n                options.id && element.setAttribute(\"id\", options.id);\n                if (options.attributes) for (var _i10 = 0, _Object$keys2 = Object.keys(options.attributes); _i10 < _Object$keys2.length; _i10++) {\n                    var key = _Object$keys2[_i10];\n                    element.setAttribute(key, options.attributes[key]);\n                }\n                options.styleSheet && function(el, styleText, doc) {\n                    void 0 === doc && (doc = window.document);\n                    el.styleSheet ? el.styleSheet.cssText = styleText : el.appendChild(doc.createTextNode(styleText));\n                }(element, options.styleSheet);\n                if (options.html) {\n                    if (\"iframe\" === tag) throw new Error(\"Iframe html can not be written unless container provided and iframe in DOM\");\n                    element.innerHTML = options.html;\n                }\n                return element;\n            }(\"iframe\", {\n                attributes: _extends({\n                    allowTransparency: \"true\"\n                }, options.attributes || {}),\n                style: _extends({\n                    backgroundColor: \"transparent\",\n                    border: \"none\"\n                }, style),\n                html: options.html,\n                class: options.class\n            });\n            var isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n            frame.hasAttribute(\"id\") || frame.setAttribute(\"id\", uniqueID());\n            awaitFrameLoad(frame);\n            container && function(id, doc) {\n                void 0 === doc && (doc = document);\n                var element = getElementSafe(id, doc);\n                if (element) return element;\n                throw new Error(\"Can not find element: \" + stringify(id));\n            }(container).appendChild(frame);\n            (options.url || isIE) && frame.setAttribute(\"src\", options.url || \"about:blank\");\n            return frame;\n        }\n        function addEventListener(obj, event, handler) {\n            obj.addEventListener(event, handler);\n            return {\n                cancel: function() {\n                    obj.removeEventListener(event, handler);\n                }\n            };\n        }\n        function showElement(element) {\n            element.style.setProperty(\"display\", \"\");\n        }\n        function hideElement(element) {\n            element.style.setProperty(\"display\", \"none\", \"important\");\n        }\n        function destroyElement(element) {\n            element && element.parentNode && element.parentNode.removeChild(element);\n        }\n        function isElementClosed(el) {\n            return !el || !el.parentNode;\n        }\n        function onResize(el, handler, _temp) {\n            var _ref2 = void 0 === _temp ? {} : _temp, _ref2$width = _ref2.width, width = void 0 === _ref2$width || _ref2$width, _ref2$height = _ref2.height, height = void 0 === _ref2$height || _ref2$height, _ref2$interval = _ref2.interval, interval = void 0 === _ref2$interval ? 100 : _ref2$interval, _ref2$win = _ref2.win, win = void 0 === _ref2$win ? window : _ref2$win;\n            var currentWidth = el.offsetWidth;\n            var currentHeight = el.offsetHeight;\n            handler({\n                width: currentWidth,\n                height: currentHeight\n            });\n            var check = function() {\n                var newWidth = el.offsetWidth;\n                var newHeight = el.offsetHeight;\n                (width && newWidth !== currentWidth || height && newHeight !== currentHeight) && handler({\n                    width: newWidth,\n                    height: newHeight\n                });\n                currentWidth = newWidth;\n                currentHeight = newHeight;\n            };\n            var observer;\n            var timeout;\n            win.addEventListener(\"resize\", check);\n            if (void 0 !== win.ResizeObserver) {\n                (observer = new win.ResizeObserver(check)).observe(el);\n                timeout = safeInterval(check, 10 * interval);\n            } else if (void 0 !== win.MutationObserver) {\n                (observer = new win.MutationObserver(check)).observe(el, {\n                    attributes: !0,\n                    childList: !0,\n                    subtree: !0,\n                    characterData: !1\n                });\n                timeout = safeInterval(check, 10 * interval);\n            } else timeout = safeInterval(check, interval);\n            return {\n                cancel: function() {\n                    observer.disconnect();\n                    window.removeEventListener(\"resize\", check);\n                    timeout.cancel();\n                }\n            };\n        }\n        function isShadowElement(element) {\n            for (;element.parentNode; ) element = element.parentNode;\n            return \"[object ShadowRoot]\" === element.toString();\n        }\n        function isPerc(str) {\n            return \"string\" == typeof str && /^[0-9]+%$/.test(str);\n        }\n        function toNum(val) {\n            if (\"number\" == typeof val) return val;\n            var match = val.match(/^([0-9]+)(px|%)$/);\n            if (!match) throw new Error(\"Could not match css value from \" + val);\n            return parseInt(match[1], 10);\n        }\n        function toPx(val) {\n            return toNum(val) + \"px\";\n        }\n        function toCSS(val) {\n            return \"number\" == typeof val ? toPx(val) : isPerc(val) ? val : toPx(val);\n        }\n        function normalizeDimension(dim, max) {\n            if (\"number\" == typeof dim) return dim;\n            if (isPerc(dim)) return parseInt(max * toNum(dim) / 100, 10);\n            if (\"string\" == typeof (str = dim) && /^[0-9]+px$/.test(str)) return toNum(dim);\n            var str;\n            throw new Error(\"Can not normalize dimension: \" + dim);\n        }\n        function global_getGlobal(win) {\n            void 0 === win && (win = window);\n            return win !== window ? win.__post_robot_10_0_39__ : win.__post_robot_10_0_39__ = win.__post_robot_10_0_39__ || {};\n        }\n        var getObj = function() {\n            return {};\n        };\n        function globalStore(key, defStore) {\n            void 0 === key && (key = \"store\");\n            void 0 === defStore && (defStore = getObj);\n            return util_getOrSet(global_getGlobal(), key, (function() {\n                var store = defStore();\n                return {\n                    has: function(storeKey) {\n                        return store.hasOwnProperty(storeKey);\n                    },\n                    get: function(storeKey, defVal) {\n                        return store.hasOwnProperty(storeKey) ? store[storeKey] : defVal;\n                    },\n                    set: function(storeKey, val) {\n                        store[storeKey] = val;\n                        return val;\n                    },\n                    del: function(storeKey) {\n                        delete store[storeKey];\n                    },\n                    getOrSet: function(storeKey, getter) {\n                        return util_getOrSet(store, storeKey, getter);\n                    },\n                    reset: function() {\n                        store = defStore();\n                    },\n                    keys: function() {\n                        return Object.keys(store);\n                    }\n                };\n            }));\n        }\n        var WildCard = function() {};\n        function getWildcard() {\n            var global = global_getGlobal();\n            global.WINDOW_WILDCARD = global.WINDOW_WILDCARD || new WildCard;\n            return global.WINDOW_WILDCARD;\n        }\n        function windowStore(key, defStore) {\n            void 0 === key && (key = \"store\");\n            void 0 === defStore && (defStore = getObj);\n            return globalStore(\"windowStore\").getOrSet(key, (function() {\n                var winStore = new weakmap_CrossDomainSafeWeakMap;\n                var getStore = function(win) {\n                    return winStore.getOrSet(win, defStore);\n                };\n                return {\n                    has: function(win) {\n                        return getStore(win).hasOwnProperty(key);\n                    },\n                    get: function(win, defVal) {\n                        var store = getStore(win);\n                        return store.hasOwnProperty(key) ? store[key] : defVal;\n                    },\n                    set: function(win, val) {\n                        getStore(win)[key] = val;\n                        return val;\n                    },\n                    del: function(win) {\n                        delete getStore(win)[key];\n                    },\n                    getOrSet: function(win, getter) {\n                        return util_getOrSet(getStore(win), key, getter);\n                    }\n                };\n            }));\n        }\n        function getInstanceID() {\n            return globalStore(\"instance\").getOrSet(\"instanceID\", uniqueID);\n        }\n        function resolveHelloPromise(win, _ref) {\n            var domain = _ref.domain;\n            var helloPromises = windowStore(\"helloPromises\");\n            var existingPromise = helloPromises.get(win);\n            existingPromise && existingPromise.resolve({\n                domain: domain\n            });\n            var newPromise = promise_ZalgoPromise.resolve({\n                domain: domain\n            });\n            helloPromises.set(win, newPromise);\n            return newPromise;\n        }\n        function sayHello(win, _ref4) {\n            return (0, _ref4.send)(win, \"postrobot_hello\", {\n                instanceID: getInstanceID()\n            }, {\n                domain: \"*\",\n                timeout: -1\n            }).then((function(_ref5) {\n                var origin = _ref5.origin, instanceID = _ref5.data.instanceID;\n                resolveHelloPromise(win, {\n                    domain: origin\n                });\n                return {\n                    win: win,\n                    domain: origin,\n                    instanceID: instanceID\n                };\n            }));\n        }\n        function getWindowInstanceID(win, _ref6) {\n            var send = _ref6.send;\n            return windowStore(\"windowInstanceIDPromises\").getOrSet(win, (function() {\n                return sayHello(win, {\n                    send: send\n                }).then((function(_ref7) {\n                    return _ref7.instanceID;\n                }));\n            }));\n        }\n        function awaitWindowHello(win, timeout, name) {\n            void 0 === timeout && (timeout = 5e3);\n            void 0 === name && (name = \"Window\");\n            var promise = function(win) {\n                return windowStore(\"helloPromises\").getOrSet(win, (function() {\n                    return new promise_ZalgoPromise;\n                }));\n            }(win);\n            -1 !== timeout && (promise = promise.timeout(timeout, new Error(name + \" did not load after \" + timeout + \"ms\")));\n            return promise;\n        }\n        function markWindowKnown(win) {\n            windowStore(\"knownWindows\").set(win, !0);\n        }\n        function isSerializedType(item) {\n            return \"object\" == typeof item && null !== item && \"string\" == typeof item.__type__;\n        }\n        function determineType(val) {\n            return void 0 === val ? \"undefined\" : null === val ? \"null\" : Array.isArray(val) ? \"array\" : \"function\" == typeof val ? \"function\" : \"object\" == typeof val ? val instanceof Error ? \"error\" : \"function\" == typeof val.then ? \"promise\" : \"[object RegExp]\" === {}.toString.call(val) ? \"regex\" : \"[object Date]\" === {}.toString.call(val) ? \"date\" : \"object\" : \"string\" == typeof val ? \"string\" : \"number\" == typeof val ? \"number\" : \"boolean\" == typeof val ? \"boolean\" : void 0;\n        }\n        function serializeType(type, val) {\n            return {\n                __type__: type,\n                __val__: val\n            };\n        }\n        var _SERIALIZER;\n        var SERIALIZER = ((_SERIALIZER = {}).function = function() {}, _SERIALIZER.error = function(_ref) {\n            return serializeType(\"error\", {\n                message: _ref.message,\n                stack: _ref.stack,\n                code: _ref.code,\n                data: _ref.data\n            });\n        }, _SERIALIZER.promise = function() {}, _SERIALIZER.regex = function(val) {\n            return serializeType(\"regex\", val.source);\n        }, _SERIALIZER.date = function(val) {\n            return serializeType(\"date\", val.toJSON());\n        }, _SERIALIZER.array = function(val) {\n            return val;\n        }, _SERIALIZER.object = function(val) {\n            return val;\n        }, _SERIALIZER.string = function(val) {\n            return val;\n        }, _SERIALIZER.number = function(val) {\n            return val;\n        }, _SERIALIZER.boolean = function(val) {\n            return val;\n        }, _SERIALIZER.null = function(val) {\n            return val;\n        }, _SERIALIZER);\n        var defaultSerializers = {};\n        var _DESERIALIZER;\n        var DESERIALIZER = ((_DESERIALIZER = {}).function = function() {\n            throw new Error(\"Function serialization is not implemented; nothing to deserialize\");\n        }, _DESERIALIZER.error = function(_ref2) {\n            var stack = _ref2.stack, code = _ref2.code, data = _ref2.data;\n            var error = new Error(_ref2.message);\n            error.code = code;\n            data && (error.data = data);\n            error.stack = stack + \"\\n\\n\" + error.stack;\n            return error;\n        }, _DESERIALIZER.promise = function() {\n            throw new Error(\"Promise serialization is not implemented; nothing to deserialize\");\n        }, _DESERIALIZER.regex = function(val) {\n            return new RegExp(val);\n        }, _DESERIALIZER.date = function(val) {\n            return new Date(val);\n        }, _DESERIALIZER.array = function(val) {\n            return val;\n        }, _DESERIALIZER.object = function(val) {\n            return val;\n        }, _DESERIALIZER.string = function(val) {\n            return val;\n        }, _DESERIALIZER.number = function(val) {\n            return val;\n        }, _DESERIALIZER.boolean = function(val) {\n            return val;\n        }, _DESERIALIZER.null = function(val) {\n            return val;\n        }, _DESERIALIZER);\n        var defaultDeserializers = {};\n        function needsBridgeForBrowser() {\n            return !!utils_getUserAgent(window).match(/MSIE|trident|edge\\/12|edge\\/13/i);\n        }\n        function needsBridgeForWin(win) {\n            return !isSameTopWindow(window, win);\n        }\n        function needsBridgeForDomain(domain, win) {\n            if (domain) {\n                if (getDomain() !== getDomainFromUrl(domain)) return !0;\n            } else if (win && !isSameDomain(win)) return !0;\n            return !1;\n        }\n        function needsBridge(_ref) {\n            var win = _ref.win, domain = _ref.domain;\n            return !(!needsBridgeForBrowser() || domain && !needsBridgeForDomain(domain, win) || win && !needsBridgeForWin(win));\n        }\n        function getBridgeName(domain) {\n            return \"__postrobot_bridge___\" + (domain = domain || getDomainFromUrl(domain)).replace(/[^a-zA-Z0-9]+/g, \"_\");\n        }\n        function isBridge() {\n            return Boolean(window.name && window.name === getBridgeName(getDomain()));\n        }\n        var documentBodyReady = new promise_ZalgoPromise((function(resolve) {\n            if (window.document && window.document.body) return resolve(window.document.body);\n            var interval = setInterval((function() {\n                if (window.document && window.document.body) {\n                    clearInterval(interval);\n                    return resolve(window.document.body);\n                }\n            }), 10);\n        }));\n        function registerRemoteWindow(win) {\n            windowStore(\"remoteWindowPromises\").getOrSet(win, (function() {\n                return new promise_ZalgoPromise;\n            }));\n        }\n        function findRemoteWindow(win) {\n            var remoteWinPromise = windowStore(\"remoteWindowPromises\").get(win);\n            if (!remoteWinPromise) throw new Error(\"Remote window promise not found\");\n            return remoteWinPromise;\n        }\n        function registerRemoteSendMessage(win, domain, sendMessage) {\n            findRemoteWindow(win).resolve((function(remoteWin, remoteDomain, message) {\n                if (remoteWin !== win) throw new Error(\"Remote window does not match window\");\n                if (!matchDomain(remoteDomain, domain)) throw new Error(\"Remote domain \" + remoteDomain + \" does not match domain \" + domain);\n                sendMessage.fireAndForget(message);\n            }));\n        }\n        function rejectRemoteSendMessage(win, err) {\n            findRemoteWindow(win).reject(err).catch(src_util_noop);\n        }\n        function linkWindow(_ref3) {\n            var win = _ref3.win, name = _ref3.name, domain = _ref3.domain;\n            var popupWindowsByName = globalStore(\"popupWindowsByName\");\n            var popupWindowsByWin = windowStore(\"popupWindowsByWin\");\n            for (var _i2 = 0, _popupWindowsByName$k2 = popupWindowsByName.keys(); _i2 < _popupWindowsByName$k2.length; _i2++) {\n                var winName = _popupWindowsByName$k2[_i2];\n                var _details = popupWindowsByName.get(winName);\n                _details && !isWindowClosed(_details.win) || popupWindowsByName.del(winName);\n            }\n            if (isWindowClosed(win)) return {\n                win: win,\n                name: name,\n                domain: domain\n            };\n            var details = popupWindowsByWin.getOrSet(win, (function() {\n                return name ? popupWindowsByName.getOrSet(name, (function() {\n                    return {\n                        win: win,\n                        name: name\n                    };\n                })) : {\n                    win: win\n                };\n            }));\n            if (details.win && details.win !== win) throw new Error(\"Different window already linked for window: \" + (name || \"undefined\"));\n            if (name) {\n                details.name = name;\n                popupWindowsByName.set(name, details);\n            }\n            if (domain) {\n                details.domain = domain;\n                registerRemoteWindow(win);\n            }\n            popupWindowsByWin.set(win, details);\n            return details;\n        }\n        function setupBridge(_ref) {\n            var on = _ref.on, send = _ref.send, receiveMessage = _ref.receiveMessage;\n            windowOpen = window.open, window.open = function(url, name, options, last) {\n                var win = windowOpen.call(this, normalizeMockUrl(url), name, options, last);\n                if (!win) return win;\n                linkWindow({\n                    win: win,\n                    name: name,\n                    domain: url ? getDomainFromUrl(url) : null\n                });\n                return win;\n            };\n            var windowOpen;\n            !function(_ref) {\n                var on = _ref.on, send = _ref.send, receiveMessage = _ref.receiveMessage;\n                var popupWindowsByName = globalStore(\"popupWindowsByName\");\n                on(\"postrobot_open_tunnel\", (function(_ref2) {\n                    var source = _ref2.source, origin = _ref2.origin, data = _ref2.data;\n                    var bridgePromise = globalStore(\"bridges\").get(origin);\n                    if (!bridgePromise) throw new Error(\"Can not find bridge promise for domain \" + origin);\n                    return bridgePromise.then((function(bridge) {\n                        if (source !== bridge) throw new Error(\"Message source does not matched registered bridge for domain \" + origin);\n                        if (!data.name) throw new Error(\"Register window expected to be passed window name\");\n                        if (!data.sendMessage) throw new Error(\"Register window expected to be passed sendMessage method\");\n                        if (!popupWindowsByName.has(data.name)) throw new Error(\"Window with name \" + data.name + \" does not exist, or was not opened by this window\");\n                        var getWindowDetails = function() {\n                            return popupWindowsByName.get(data.name);\n                        };\n                        if (!getWindowDetails().domain) throw new Error(\"We do not have a registered domain for window \" + data.name);\n                        if (getWindowDetails().domain !== origin) throw new Error(\"Message origin \" + origin + \" does not matched registered window origin \" + (getWindowDetails().domain || \"unknown\"));\n                        registerRemoteSendMessage(getWindowDetails().win, origin, data.sendMessage);\n                        return {\n                            sendMessage: function(message) {\n                                if (window && !window.closed && getWindowDetails()) {\n                                    var domain = getWindowDetails().domain;\n                                    if (domain) try {\n                                        receiveMessage({\n                                            data: message,\n                                            origin: domain,\n                                            source: getWindowDetails().win\n                                        }, {\n                                            on: on,\n                                            send: send\n                                        });\n                                    } catch (err) {\n                                        promise_ZalgoPromise.reject(err);\n                                    }\n                                }\n                            }\n                        };\n                    }));\n                }));\n            }({\n                on: on,\n                send: send,\n                receiveMessage: receiveMessage\n            });\n            !function(_ref2) {\n                var send = _ref2.send;\n                global_getGlobal(window).openTunnelToParent = function(_ref3) {\n                    var name = _ref3.name, source = _ref3.source, canary = _ref3.canary, sendMessage = _ref3.sendMessage;\n                    var tunnelWindows = globalStore(\"tunnelWindows\");\n                    var parentWindow = utils_getParent(window);\n                    if (!parentWindow) throw new Error(\"No parent window found to open tunnel to\");\n                    var id = function(_ref) {\n                        var name = _ref.name, source = _ref.source, canary = _ref.canary, sendMessage = _ref.sendMessage;\n                        !function() {\n                            var tunnelWindows = globalStore(\"tunnelWindows\");\n                            for (var _i2 = 0, _tunnelWindows$keys2 = tunnelWindows.keys(); _i2 < _tunnelWindows$keys2.length; _i2++) {\n                                var key = _tunnelWindows$keys2[_i2];\n                                isWindowClosed(tunnelWindows[key].source) && tunnelWindows.del(key);\n                            }\n                        }();\n                        var id = uniqueID();\n                        globalStore(\"tunnelWindows\").set(id, {\n                            name: name,\n                            source: source,\n                            canary: canary,\n                            sendMessage: sendMessage\n                        });\n                        return id;\n                    }({\n                        name: name,\n                        source: source,\n                        canary: canary,\n                        sendMessage: sendMessage\n                    });\n                    return send(parentWindow, \"postrobot_open_tunnel\", {\n                        name: name,\n                        sendMessage: function() {\n                            var tunnelWindow = tunnelWindows.get(id);\n                            if (tunnelWindow && tunnelWindow.source && !isWindowClosed(tunnelWindow.source)) {\n                                try {\n                                    tunnelWindow.canary();\n                                } catch (err) {\n                                    return;\n                                }\n                                tunnelWindow.sendMessage.apply(this, arguments);\n                            }\n                        }\n                    }, {\n                        domain: \"*\"\n                    });\n                };\n            }({\n                send: send\n            });\n            !function(_ref) {\n                var on = _ref.on, send = _ref.send, receiveMessage = _ref.receiveMessage;\n                promise_ZalgoPromise.try((function() {\n                    var opener = getOpener(window);\n                    if (opener && needsBridge({\n                        win: opener\n                    })) {\n                        registerRemoteWindow(opener);\n                        return (win = opener, windowStore(\"remoteBridgeAwaiters\").getOrSet(win, (function() {\n                            return promise_ZalgoPromise.try((function() {\n                                var frame = getFrameByName(win, getBridgeName(getDomain()));\n                                if (frame) return isSameDomain(frame) && global_getGlobal(assertSameDomain(frame)) ? frame : new promise_ZalgoPromise((function(resolve) {\n                                    var interval;\n                                    var timeout;\n                                    interval = setInterval((function() {\n                                        if (frame && isSameDomain(frame) && global_getGlobal(assertSameDomain(frame))) {\n                                            clearInterval(interval);\n                                            clearTimeout(timeout);\n                                            return resolve(frame);\n                                        }\n                                    }), 100);\n                                    timeout = setTimeout((function() {\n                                        clearInterval(interval);\n                                        return resolve();\n                                    }), 2e3);\n                                }));\n                            }));\n                        }))).then((function(bridge) {\n                            return bridge ? window.name ? global_getGlobal(assertSameDomain(bridge)).openTunnelToParent({\n                                name: window.name,\n                                source: window,\n                                canary: function() {},\n                                sendMessage: function(message) {\n                                    try {\n                                        window;\n                                    } catch (err) {\n                                        return;\n                                    }\n                                    if (window && !window.closed) try {\n                                        receiveMessage({\n                                            data: message,\n                                            origin: this.origin,\n                                            source: this.source\n                                        }, {\n                                            on: on,\n                                            send: send\n                                        });\n                                    } catch (err) {\n                                        promise_ZalgoPromise.reject(err);\n                                    }\n                                }\n                            }).then((function(_ref2) {\n                                var source = _ref2.source, origin = _ref2.origin, data = _ref2.data;\n                                if (source !== opener) throw new Error(\"Source does not match opener\");\n                                registerRemoteSendMessage(source, origin, data.sendMessage);\n                            })).catch((function(err) {\n                                rejectRemoteSendMessage(opener, err);\n                                throw err;\n                            })) : rejectRemoteSendMessage(opener, new Error(\"Can not register with opener: window does not have a name\")) : rejectRemoteSendMessage(opener, new Error(\"Can not register with opener: no bridge found in opener\"));\n                        }));\n                        var win;\n                    }\n                }));\n            }({\n                on: on,\n                send: send,\n                receiveMessage: receiveMessage\n            });\n        }\n        function cleanupProxyWindows() {\n            var idToProxyWindow = globalStore(\"idToProxyWindow\");\n            for (var _i2 = 0, _idToProxyWindow$keys2 = idToProxyWindow.keys(); _i2 < _idToProxyWindow$keys2.length; _i2++) {\n                var id = _idToProxyWindow$keys2[_i2];\n                idToProxyWindow.get(id).shouldClean() && idToProxyWindow.del(id);\n            }\n        }\n        function getSerializedWindow(winPromise, _ref) {\n            var send = _ref.send, _ref$id = _ref.id, id = void 0 === _ref$id ? uniqueID() : _ref$id;\n            var windowNamePromise = winPromise.then((function(win) {\n                if (isSameDomain(win)) return assertSameDomain(win).name;\n            }));\n            var windowTypePromise = winPromise.then((function(window) {\n                if (isWindowClosed(window)) throw new Error(\"Window is closed, can not determine type\");\n                return getOpener(window) ? WINDOW_TYPE.POPUP : WINDOW_TYPE.IFRAME;\n            }));\n            windowNamePromise.catch(src_util_noop);\n            windowTypePromise.catch(src_util_noop);\n            return {\n                id: id,\n                getType: function() {\n                    return windowTypePromise;\n                },\n                getInstanceID: memoizePromise((function() {\n                    return winPromise.then((function(win) {\n                        return getWindowInstanceID(win, {\n                            send: send\n                        });\n                    }));\n                })),\n                close: function() {\n                    return winPromise.then(closeWindow);\n                },\n                getName: function() {\n                    return winPromise.then((function(win) {\n                        if (!isWindowClosed(win)) return isSameDomain(win) ? assertSameDomain(win).name : windowNamePromise;\n                    }));\n                },\n                focus: function() {\n                    return winPromise.then((function(win) {\n                        win.focus();\n                    }));\n                },\n                isClosed: function() {\n                    return winPromise.then((function(win) {\n                        return isWindowClosed(win);\n                    }));\n                },\n                setLocation: function(href) {\n                    return winPromise.then((function(win) {\n                        var domain = window.location.protocol + \"//\" + window.location.host;\n                        if (0 === href.indexOf(\"/\")) href = \"\" + domain + href; else if (!href.match(/^https?:\\/\\//) && 0 !== href.indexOf(domain)) throw new Error(\"Expected url to be http or https url, or absolute path, got \" + JSON.stringify(href));\n                        if (isSameDomain(win)) try {\n                            if (win.location && \"function\" == typeof win.location.replace) {\n                                win.location.replace(href);\n                                return;\n                            }\n                        } catch (err) {}\n                        win.location = href;\n                    }));\n                },\n                setName: function(name) {\n                    return winPromise.then((function(win) {\n                        linkWindow({\n                            win: win,\n                            name: name\n                        });\n                        var sameDomain = isSameDomain(win);\n                        var frame = function(win) {\n                            if (isSameDomain(win)) return assertSameDomain(win).frameElement;\n                            for (var _i21 = 0, _document$querySelect2 = document.querySelectorAll(\"iframe\"); _i21 < _document$querySelect2.length; _i21++) {\n                                var frame = _document$querySelect2[_i21];\n                                if (frame && frame.contentWindow && frame.contentWindow === win) return frame;\n                            }\n                        }(win);\n                        if (!sameDomain) throw new Error(\"Can not set name for cross-domain window: \" + name);\n                        assertSameDomain(win).name = name;\n                        frame && frame.setAttribute(\"name\", name);\n                        windowNamePromise = promise_ZalgoPromise.resolve(name);\n                    }));\n                }\n            };\n        }\n        var window_ProxyWindow = function() {\n            function ProxyWindow(_ref2) {\n                var send = _ref2.send, win = _ref2.win, serializedWindow = _ref2.serializedWindow;\n                this.id = void 0;\n                this.isProxyWindow = !0;\n                this.serializedWindow = void 0;\n                this.actualWindow = void 0;\n                this.actualWindowPromise = void 0;\n                this.send = void 0;\n                this.name = void 0;\n                this.actualWindowPromise = new promise_ZalgoPromise;\n                this.serializedWindow = serializedWindow || getSerializedWindow(this.actualWindowPromise, {\n                    send: send\n                });\n                globalStore(\"idToProxyWindow\").set(this.getID(), this);\n                win && this.setWindow(win, {\n                    send: send\n                });\n            }\n            var _proto = ProxyWindow.prototype;\n            _proto.getID = function() {\n                return this.serializedWindow.id;\n            };\n            _proto.getType = function() {\n                return this.serializedWindow.getType();\n            };\n            _proto.isPopup = function() {\n                return this.getType().then((function(type) {\n                    return type === WINDOW_TYPE.POPUP;\n                }));\n            };\n            _proto.setLocation = function(href) {\n                var _this = this;\n                return this.serializedWindow.setLocation(href).then((function() {\n                    return _this;\n                }));\n            };\n            _proto.getName = function() {\n                return this.serializedWindow.getName();\n            };\n            _proto.setName = function(name) {\n                var _this2 = this;\n                return this.serializedWindow.setName(name).then((function() {\n                    return _this2;\n                }));\n            };\n            _proto.close = function() {\n                var _this3 = this;\n                return this.serializedWindow.close().then((function() {\n                    return _this3;\n                }));\n            };\n            _proto.focus = function() {\n                var _this4 = this;\n                var isPopupPromise = this.isPopup();\n                var getNamePromise = this.getName();\n                var reopenPromise = promise_ZalgoPromise.hash({\n                    isPopup: isPopupPromise,\n                    name: getNamePromise\n                }).then((function(_ref3) {\n                    var name = _ref3.name;\n                    _ref3.isPopup && name && window.open(\"\", name);\n                }));\n                var focusPromise = this.serializedWindow.focus();\n                return promise_ZalgoPromise.all([ reopenPromise, focusPromise ]).then((function() {\n                    return _this4;\n                }));\n            };\n            _proto.isClosed = function() {\n                return this.serializedWindow.isClosed();\n            };\n            _proto.getWindow = function() {\n                return this.actualWindow;\n            };\n            _proto.setWindow = function(win, _ref4) {\n                var send = _ref4.send;\n                this.actualWindow = win;\n                this.actualWindowPromise.resolve(this.actualWindow);\n                this.serializedWindow = getSerializedWindow(this.actualWindowPromise, {\n                    send: send,\n                    id: this.getID()\n                });\n                windowStore(\"winToProxyWindow\").set(win, this);\n            };\n            _proto.awaitWindow = function() {\n                return this.actualWindowPromise;\n            };\n            _proto.matchWindow = function(win, _ref5) {\n                var _this5 = this;\n                var send = _ref5.send;\n                return promise_ZalgoPromise.try((function() {\n                    return _this5.actualWindow ? win === _this5.actualWindow : promise_ZalgoPromise.hash({\n                        proxyInstanceID: _this5.getInstanceID(),\n                        knownWindowInstanceID: getWindowInstanceID(win, {\n                            send: send\n                        })\n                    }).then((function(_ref6) {\n                        var match = _ref6.proxyInstanceID === _ref6.knownWindowInstanceID;\n                        match && _this5.setWindow(win, {\n                            send: send\n                        });\n                        return match;\n                    }));\n                }));\n            };\n            _proto.unwrap = function() {\n                return this.actualWindow || this;\n            };\n            _proto.getInstanceID = function() {\n                return this.serializedWindow.getInstanceID();\n            };\n            _proto.shouldClean = function() {\n                return Boolean(this.actualWindow && isWindowClosed(this.actualWindow));\n            };\n            _proto.serialize = function() {\n                return this.serializedWindow;\n            };\n            ProxyWindow.unwrap = function(win) {\n                return ProxyWindow.isProxyWindow(win) ? win.unwrap() : win;\n            };\n            ProxyWindow.serialize = function(win, _ref7) {\n                var send = _ref7.send;\n                cleanupProxyWindows();\n                return ProxyWindow.toProxyWindow(win, {\n                    send: send\n                }).serialize();\n            };\n            ProxyWindow.deserialize = function(serializedWindow, _ref8) {\n                var send = _ref8.send;\n                cleanupProxyWindows();\n                return globalStore(\"idToProxyWindow\").get(serializedWindow.id) || new ProxyWindow({\n                    serializedWindow: serializedWindow,\n                    send: send\n                });\n            };\n            ProxyWindow.isProxyWindow = function(obj) {\n                return Boolean(obj && !isWindow(obj) && obj.isProxyWindow);\n            };\n            ProxyWindow.toProxyWindow = function(win, _ref9) {\n                var send = _ref9.send;\n                cleanupProxyWindows();\n                if (ProxyWindow.isProxyWindow(win)) return win;\n                var actualWindow = win;\n                return windowStore(\"winToProxyWindow\").get(actualWindow) || new ProxyWindow({\n                    win: actualWindow,\n                    send: send\n                });\n            };\n            return ProxyWindow;\n        }();\n        function addMethod(id, val, name, source, domain) {\n            var methodStore = windowStore(\"methodStore\");\n            var proxyWindowMethods = globalStore(\"proxyWindowMethods\");\n            if (window_ProxyWindow.isProxyWindow(source)) proxyWindowMethods.set(id, {\n                val: val,\n                name: name,\n                domain: domain,\n                source: source\n            }); else {\n                proxyWindowMethods.del(id);\n                methodStore.getOrSet(source, (function() {\n                    return {};\n                }))[id] = {\n                    domain: domain,\n                    name: name,\n                    val: val,\n                    source: source\n                };\n            }\n        }\n        function lookupMethod(source, id) {\n            var methodStore = windowStore(\"methodStore\");\n            var proxyWindowMethods = globalStore(\"proxyWindowMethods\");\n            return methodStore.getOrSet(source, (function() {\n                return {};\n            }))[id] || proxyWindowMethods.get(id);\n        }\n        function function_serializeFunction(destination, domain, val, key, _ref3) {\n            on = (_ref = {\n                on: _ref3.on,\n                send: _ref3.send\n            }).on, send = _ref.send, globalStore(\"builtinListeners\").getOrSet(\"functionCalls\", (function() {\n                return on(\"postrobot_method\", {\n                    domain: \"*\"\n                }, (function(_ref2) {\n                    var source = _ref2.source, origin = _ref2.origin, data = _ref2.data;\n                    var id = data.id, name = data.name;\n                    var meth = lookupMethod(source, id);\n                    if (!meth) throw new Error(\"Could not find method '\" + name + \"' with id: \" + data.id + \" in \" + getDomain(window));\n                    var methodSource = meth.source, domain = meth.domain, val = meth.val;\n                    return promise_ZalgoPromise.try((function() {\n                        if (!matchDomain(domain, origin)) throw new Error(\"Method '\" + data.name + \"' domain \" + JSON.stringify(util_isRegex(meth.domain) ? meth.domain.source : meth.domain) + \" does not match origin \" + origin + \" in \" + getDomain(window));\n                        if (window_ProxyWindow.isProxyWindow(methodSource)) return methodSource.matchWindow(source, {\n                            send: send\n                        }).then((function(match) {\n                            if (!match) throw new Error(\"Method call '\" + data.name + \"' failed - proxy window does not match source in \" + getDomain(window));\n                        }));\n                    })).then((function() {\n                        return val.apply({\n                            source: source,\n                            origin: origin\n                        }, data.args);\n                    }), (function(err) {\n                        return promise_ZalgoPromise.try((function() {\n                            if (val.onError) return val.onError(err);\n                        })).then((function() {\n                            err.stack && (err.stack = \"Remote call to \" + name + \"(\" + function(args) {\n                                void 0 === args && (args = []);\n                                return arrayFrom(args).map((function(arg) {\n                                    return \"string\" == typeof arg ? \"'\" + arg + \"'\" : void 0 === arg ? \"undefined\" : null === arg ? \"null\" : \"boolean\" == typeof arg ? arg.toString() : Array.isArray(arg) ? \"[ ... ]\" : \"object\" == typeof arg ? \"{ ... }\" : \"function\" == typeof arg ? \"() => { ... }\" : \"<\" + typeof arg + \">\";\n                                })).join(\", \");\n                            }(data.args) + \") failed\\n\\n\" + err.stack);\n                            throw err;\n                        }));\n                    })).then((function(result) {\n                        return {\n                            result: result,\n                            id: id,\n                            name: name\n                        };\n                    }));\n                }));\n            }));\n            var _ref, on, send;\n            var id = val.__id__ || uniqueID();\n            destination = window_ProxyWindow.unwrap(destination);\n            var name = val.__name__ || val.name || key;\n            \"string\" == typeof name && \"function\" == typeof name.indexOf && 0 === name.indexOf(\"anonymous::\") && (name = name.replace(\"anonymous::\", key + \"::\"));\n            if (window_ProxyWindow.isProxyWindow(destination)) {\n                addMethod(id, val, name, destination, domain);\n                destination.awaitWindow().then((function(win) {\n                    addMethod(id, val, name, win, domain);\n                }));\n            } else addMethod(id, val, name, destination, domain);\n            return serializeType(\"cross_domain_function\", {\n                id: id,\n                name: name\n            });\n        }\n        function serializeMessage(destination, domain, obj, _ref) {\n            var _serialize;\n            var on = _ref.on, send = _ref.send;\n            return function(obj, serializers) {\n                void 0 === serializers && (serializers = defaultSerializers);\n                var result = JSON.stringify(obj, (function(key) {\n                    var val = this[key];\n                    if (isSerializedType(this)) return val;\n                    var type = determineType(val);\n                    if (!type) return val;\n                    var serializer = serializers[type] || SERIALIZER[type];\n                    return serializer ? serializer(val, key) : val;\n                }));\n                return void 0 === result ? \"undefined\" : result;\n            }(obj, ((_serialize = {}).promise = function(val, key) {\n                return function(destination, domain, val, key, _ref) {\n                    return serializeType(\"cross_domain_zalgo_promise\", {\n                        then: function_serializeFunction(destination, domain, (function(resolve, reject) {\n                            return val.then(resolve, reject);\n                        }), key, {\n                            on: _ref.on,\n                            send: _ref.send\n                        })\n                    });\n                }(destination, domain, val, key, {\n                    on: on,\n                    send: send\n                });\n            }, _serialize.function = function(val, key) {\n                return function_serializeFunction(destination, domain, val, key, {\n                    on: on,\n                    send: send\n                });\n            }, _serialize.object = function(val) {\n                return isWindow(val) || window_ProxyWindow.isProxyWindow(val) ? serializeType(\"cross_domain_window\", window_ProxyWindow.serialize(val, {\n                    send: send\n                })) : val;\n            }, _serialize));\n        }\n        function deserializeMessage(source, origin, message, _ref2) {\n            var _deserialize;\n            var send = _ref2.send;\n            return function(str, deserializers) {\n                void 0 === deserializers && (deserializers = defaultDeserializers);\n                if (\"undefined\" !== str) return JSON.parse(str, (function(key, val) {\n                    if (isSerializedType(this)) return val;\n                    var type;\n                    var value;\n                    if (isSerializedType(val)) {\n                        type = val.__type__;\n                        value = val.__val__;\n                    } else {\n                        type = determineType(val);\n                        value = val;\n                    }\n                    if (!type) return value;\n                    var deserializer = deserializers[type] || DESERIALIZER[type];\n                    return deserializer ? deserializer(value, key) : value;\n                }));\n            }(message, ((_deserialize = {}).cross_domain_zalgo_promise = function(serializedPromise) {\n                return function(source, origin, _ref2) {\n                    return new promise_ZalgoPromise(_ref2.then);\n                }(0, 0, serializedPromise);\n            }, _deserialize.cross_domain_function = function(serializedFunction) {\n                return function(source, origin, _ref4, _ref5) {\n                    var id = _ref4.id, name = _ref4.name;\n                    var send = _ref5.send;\n                    var getDeserializedFunction = function(opts) {\n                        void 0 === opts && (opts = {});\n                        function crossDomainFunctionWrapper() {\n                            var _arguments = arguments;\n                            return window_ProxyWindow.toProxyWindow(source, {\n                                send: send\n                            }).awaitWindow().then((function(win) {\n                                var meth = lookupMethod(win, id);\n                                if (meth && meth.val !== crossDomainFunctionWrapper) return meth.val.apply({\n                                    source: window,\n                                    origin: getDomain()\n                                }, _arguments);\n                                var _args = [].slice.call(_arguments);\n                                return opts.fireAndForget ? send(win, \"postrobot_method\", {\n                                    id: id,\n                                    name: name,\n                                    args: _args\n                                }, {\n                                    domain: origin,\n                                    fireAndForget: !0\n                                }) : send(win, \"postrobot_method\", {\n                                    id: id,\n                                    name: name,\n                                    args: _args\n                                }, {\n                                    domain: origin,\n                                    fireAndForget: !1\n                                }).then((function(res) {\n                                    return res.data.result;\n                                }));\n                            })).catch((function(err) {\n                                throw err;\n                            }));\n                        }\n                        crossDomainFunctionWrapper.__name__ = name;\n                        crossDomainFunctionWrapper.__origin__ = origin;\n                        crossDomainFunctionWrapper.__source__ = source;\n                        crossDomainFunctionWrapper.__id__ = id;\n                        crossDomainFunctionWrapper.origin = origin;\n                        return crossDomainFunctionWrapper;\n                    };\n                    var crossDomainFunctionWrapper = getDeserializedFunction();\n                    crossDomainFunctionWrapper.fireAndForget = getDeserializedFunction({\n                        fireAndForget: !0\n                    });\n                    return crossDomainFunctionWrapper;\n                }(source, origin, serializedFunction, {\n                    send: send\n                });\n            }, _deserialize.cross_domain_window = function(serializedWindow) {\n                return window_ProxyWindow.deserialize(serializedWindow, {\n                    send: send\n                });\n            }, _deserialize));\n        }\n        var SEND_MESSAGE_STRATEGIES = {};\n        SEND_MESSAGE_STRATEGIES.postrobot_post_message = function(win, serializedMessage, domain) {\n            0 === domain.indexOf(\"file:\") && (domain = \"*\");\n            win.postMessage(serializedMessage, domain);\n        };\n        SEND_MESSAGE_STRATEGIES.postrobot_bridge = function(win, serializedMessage, domain) {\n            if (!needsBridgeForBrowser() && !isBridge()) throw new Error(\"Bridge not needed for browser\");\n            if (isSameDomain(win)) throw new Error(\"Post message through bridge disabled between same domain windows\");\n            if (!1 !== isSameTopWindow(window, win)) throw new Error(\"Can only use bridge to communicate between two different windows, not between frames\");\n            !function(win, domain, message) {\n                var messagingChild = isOpener(window, win);\n                var messagingParent = isOpener(win, window);\n                if (!messagingChild && !messagingParent) throw new Error(\"Can only send messages to and from parent and popup windows\");\n                findRemoteWindow(win).then((function(sendMessage) {\n                    return sendMessage(win, domain, message);\n                }));\n            }(win, domain, serializedMessage);\n        };\n        SEND_MESSAGE_STRATEGIES.postrobot_global = function(win, serializedMessage) {\n            if (!utils_getUserAgent(window).match(/MSIE|rv:11|trident|edge\\/12|edge\\/13/i)) throw new Error(\"Global messaging not needed for browser\");\n            if (!isSameDomain(win)) throw new Error(\"Post message through global disabled between different domain windows\");\n            if (!1 !== isSameTopWindow(window, win)) throw new Error(\"Can only use global to communicate between two different windows, not between frames\");\n            var foreignGlobal = global_getGlobal(win);\n            if (!foreignGlobal) throw new Error(\"Can not find postRobot global on foreign window\");\n            foreignGlobal.receiveMessage({\n                source: window,\n                origin: getDomain(),\n                data: serializedMessage\n            });\n        };\n        function send_sendMessage(win, domain, message, _ref2) {\n            var on = _ref2.on, send = _ref2.send;\n            return promise_ZalgoPromise.try((function() {\n                var domainBuffer = windowStore().getOrSet(win, (function() {\n                    return {};\n                }));\n                domainBuffer.buffer = domainBuffer.buffer || [];\n                domainBuffer.buffer.push(message);\n                domainBuffer.flush = domainBuffer.flush || promise_ZalgoPromise.flush().then((function() {\n                    if (isWindowClosed(win)) throw new Error(\"Window is closed\");\n                    var serializedMessage = serializeMessage(win, domain, ((_ref = {}).__post_robot_10_0_39__ = domainBuffer.buffer || [], \n                    _ref), {\n                        on: on,\n                        send: send\n                    });\n                    var _ref;\n                    delete domainBuffer.buffer;\n                    var strategies = Object.keys(SEND_MESSAGE_STRATEGIES);\n                    var errors = [];\n                    for (var _i2 = 0; _i2 < strategies.length; _i2++) {\n                        var strategyName = strategies[_i2];\n                        try {\n                            SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n                        } catch (err) {\n                            errors.push(err);\n                        }\n                    }\n                    if (errors.length === strategies.length) throw new Error(\"All post-robot messaging strategies failed:\\n\\n\" + errors.map((function(err, i) {\n                        return i + \". \" + stringifyError(err);\n                    })).join(\"\\n\\n\"));\n                }));\n                return domainBuffer.flush.then((function() {\n                    delete domainBuffer.flush;\n                }));\n            })).then(src_util_noop);\n        }\n        function getResponseListener(hash) {\n            return globalStore(\"responseListeners\").get(hash);\n        }\n        function deleteResponseListener(hash) {\n            globalStore(\"responseListeners\").del(hash);\n        }\n        function isResponseListenerErrored(hash) {\n            return globalStore(\"erroredResponseListeners\").has(hash);\n        }\n        function getRequestListener(_ref) {\n            var name = _ref.name, win = _ref.win, domain = _ref.domain;\n            var requestListeners = windowStore(\"requestListeners\");\n            \"*\" === win && (win = null);\n            \"*\" === domain && (domain = null);\n            if (!name) throw new Error(\"Name required to get request listener\");\n            for (var _i4 = 0, _ref3 = [ win, getWildcard() ]; _i4 < _ref3.length; _i4++) {\n                var winQualifier = _ref3[_i4];\n                if (winQualifier) {\n                    var nameListeners = requestListeners.get(winQualifier);\n                    if (nameListeners) {\n                        var domainListeners = nameListeners[name];\n                        if (domainListeners) {\n                            if (domain && \"string\" == typeof domain) {\n                                if (domainListeners[domain]) return domainListeners[domain];\n                                if (domainListeners.__domain_regex__) for (var _i6 = 0, _domainListeners$__DO2 = domainListeners.__domain_regex__; _i6 < _domainListeners$__DO2.length; _i6++) {\n                                    var _domainListeners$__DO3 = _domainListeners$__DO2[_i6], listener = _domainListeners$__DO3.listener;\n                                    if (matchDomain(_domainListeners$__DO3.regex, domain)) return listener;\n                                }\n                            }\n                            if (domainListeners[\"*\"]) return domainListeners[\"*\"];\n                        }\n                    }\n                }\n            }\n        }\n        var _RECEIVE_MESSAGE_TYPE;\n        var RECEIVE_MESSAGE_TYPES = ((_RECEIVE_MESSAGE_TYPE = {}).postrobot_message_request = function(source, origin, message, _ref) {\n            var on = _ref.on, send = _ref.send;\n            var options = getRequestListener({\n                name: message.name,\n                win: source,\n                domain: origin\n            });\n            var logName = \"postrobot_method\" === message.name && message.data && \"string\" == typeof message.data.name ? message.data.name + \"()\" : message.name;\n            function sendResponse(ack, data, error) {\n                return promise_ZalgoPromise.flush().then((function() {\n                    if (!message.fireAndForget && !isWindowClosed(source)) try {\n                        return send_sendMessage(source, origin, {\n                            id: uniqueID(),\n                            origin: getDomain(window),\n                            type: \"postrobot_message_response\",\n                            hash: message.hash,\n                            name: message.name,\n                            ack: ack,\n                            data: data,\n                            error: error\n                        }, {\n                            on: on,\n                            send: send\n                        });\n                    } catch (err) {\n                        throw new Error(\"Send response message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n                    }\n                }));\n            }\n            return promise_ZalgoPromise.all([ promise_ZalgoPromise.flush().then((function() {\n                if (!message.fireAndForget && !isWindowClosed(source)) try {\n                    return send_sendMessage(source, origin, {\n                        id: uniqueID(),\n                        origin: getDomain(window),\n                        type: \"postrobot_message_ack\",\n                        hash: message.hash,\n                        name: message.name\n                    }, {\n                        on: on,\n                        send: send\n                    });\n                } catch (err) {\n                    throw new Error(\"Send ack message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n                }\n            })), promise_ZalgoPromise.try((function() {\n                if (!options) throw new Error(\"No handler found for post message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                if (!matchDomain(options.domain, origin)) throw new Error(\"Request origin \" + origin + \" does not match domain \" + options.domain.toString());\n                return options.handler({\n                    source: source,\n                    origin: origin,\n                    data: message.data\n                });\n            })).then((function(data) {\n                return sendResponse(\"success\", data);\n            }), (function(error) {\n                return sendResponse(\"error\", null, error);\n            })) ]).then(src_util_noop).catch((function(err) {\n                if (options && options.handleError) return options.handleError(err);\n                throw err;\n            }));\n        }, _RECEIVE_MESSAGE_TYPE.postrobot_message_ack = function(source, origin, message) {\n            if (!isResponseListenerErrored(message.hash)) {\n                var options = getResponseListener(message.hash);\n                if (!options) throw new Error(\"No handler found for post message ack for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                try {\n                    if (!matchDomain(options.domain, origin)) throw new Error(\"Ack origin \" + origin + \" does not match domain \" + options.domain.toString());\n                    if (source !== options.win) throw new Error(\"Ack source does not match registered window\");\n                } catch (err) {\n                    options.promise.reject(err);\n                }\n                options.ack = !0;\n            }\n        }, _RECEIVE_MESSAGE_TYPE.postrobot_message_response = function(source, origin, message) {\n            if (!isResponseListenerErrored(message.hash)) {\n                var options = getResponseListener(message.hash);\n                if (!options) throw new Error(\"No handler found for post message response for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                if (!matchDomain(options.domain, origin)) throw new Error(\"Response origin \" + origin + \" does not match domain \" + (pattern = options.domain, \n                Array.isArray(pattern) ? \"(\" + pattern.join(\" | \") + \")\" : isRegex(pattern) ? \"RegExp(\" + pattern.toString() : pattern.toString()));\n                var pattern;\n                if (source !== options.win) throw new Error(\"Response source does not match registered window\");\n                deleteResponseListener(message.hash);\n                \"error\" === message.ack ? options.promise.reject(message.error) : \"success\" === message.ack && options.promise.resolve({\n                    source: source,\n                    origin: origin,\n                    data: message.data\n                });\n            }\n        }, _RECEIVE_MESSAGE_TYPE);\n        function receive_receiveMessage(event, _ref2) {\n            var on = _ref2.on, send = _ref2.send;\n            var receivedMessages = globalStore(\"receivedMessages\");\n            try {\n                if (!window || window.closed || !event.source) return;\n            } catch (err) {\n                return;\n            }\n            var source = event.source, origin = event.origin;\n            var messages = function(message, source, origin, _ref) {\n                var on = _ref.on, send = _ref.send;\n                var parsedMessage;\n                try {\n                    parsedMessage = deserializeMessage(source, origin, message, {\n                        on: on,\n                        send: send\n                    });\n                } catch (err) {\n                    return;\n                }\n                if (parsedMessage && \"object\" == typeof parsedMessage && null !== parsedMessage) {\n                    var parseMessages = parsedMessage.__post_robot_10_0_39__;\n                    if (Array.isArray(parseMessages)) return parseMessages;\n                }\n            }(event.data, source, origin, {\n                on: on,\n                send: send\n            });\n            if (messages) {\n                markWindowKnown(source);\n                for (var _i2 = 0; _i2 < messages.length; _i2++) {\n                    var message = messages[_i2];\n                    if (receivedMessages.has(message.id)) return;\n                    receivedMessages.set(message.id, !0);\n                    if (isWindowClosed(source) && !message.fireAndForget) return;\n                    0 === message.origin.indexOf(\"file:\") && (origin = \"file://\");\n                    try {\n                        \"postrobot_message_request\" === message.type ? RECEIVE_MESSAGE_TYPES.postrobot_message_request(source, origin, message, {\n                            on: on,\n                            send: send\n                        }) : \"postrobot_message_response\" === message.type ? RECEIVE_MESSAGE_TYPES.postrobot_message_response(source, origin, message) : \"postrobot_message_ack\" === message.type && RECEIVE_MESSAGE_TYPES.postrobot_message_ack(source, origin, message);\n                    } catch (err) {\n                        setTimeout((function() {\n                            throw err;\n                        }), 0);\n                    }\n                }\n            }\n        }\n        function on_on(name, options, handler) {\n            if (!name) throw new Error(\"Expected name\");\n            if (\"function\" == typeof (options = options || {})) {\n                handler = options;\n                options = {};\n            }\n            if (!handler) throw new Error(\"Expected handler\");\n            (options = options || {}).name = name;\n            options.handler = handler || options.handler;\n            var win = options.window;\n            var domain = options.domain;\n            var requestListener = function addRequestListener(_ref4, listener) {\n                var name = _ref4.name, win = _ref4.win, domain = _ref4.domain;\n                var requestListeners = windowStore(\"requestListeners\");\n                if (!name || \"string\" != typeof name) throw new Error(\"Name required to add request listener\");\n                if (Array.isArray(win)) {\n                    var listenersCollection = [];\n                    for (var _i8 = 0, _win2 = win; _i8 < _win2.length; _i8++) listenersCollection.push(addRequestListener({\n                        name: name,\n                        domain: domain,\n                        win: _win2[_i8]\n                    }, listener));\n                    return {\n                        cancel: function() {\n                            for (var _i10 = 0; _i10 < listenersCollection.length; _i10++) listenersCollection[_i10].cancel();\n                        }\n                    };\n                }\n                if (Array.isArray(domain)) {\n                    var _listenersCollection = [];\n                    for (var _i12 = 0, _domain2 = domain; _i12 < _domain2.length; _i12++) _listenersCollection.push(addRequestListener({\n                        name: name,\n                        win: win,\n                        domain: _domain2[_i12]\n                    }, listener));\n                    return {\n                        cancel: function() {\n                            for (var _i14 = 0; _i14 < _listenersCollection.length; _i14++) _listenersCollection[_i14].cancel();\n                        }\n                    };\n                }\n                var existingListener = getRequestListener({\n                    name: name,\n                    win: win,\n                    domain: domain\n                });\n                win && \"*\" !== win || (win = getWildcard());\n                domain = domain || \"*\";\n                if (existingListener) throw win && domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString() + \" for \" + (win === getWildcard() ? \"wildcard\" : \"specified\") + \" window\") : win ? new Error(\"Request listener already exists for \" + name + \" for \" + (win === getWildcard() ? \"wildcard\" : \"specified\") + \" window\") : domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString()) : new Error(\"Request listener already exists for \" + name);\n                var nameListeners = requestListeners.getOrSet(win, (function() {\n                    return {};\n                }));\n                var domainListeners = util_getOrSet(nameListeners, name, (function() {\n                    return {};\n                }));\n                var strDomain = domain.toString();\n                var regexListeners;\n                var regexListener;\n                util_isRegex(domain) ? (regexListeners = util_getOrSet(domainListeners, \"__domain_regex__\", (function() {\n                    return [];\n                }))).push(regexListener = {\n                    regex: domain,\n                    listener: listener\n                }) : domainListeners[strDomain] = listener;\n                return {\n                    cancel: function() {\n                        delete domainListeners[strDomain];\n                        if (regexListener) {\n                            regexListeners.splice(regexListeners.indexOf(regexListener, 1));\n                            regexListeners.length || delete domainListeners.__domain_regex__;\n                        }\n                        Object.keys(domainListeners).length || delete nameListeners[name];\n                        win && !Object.keys(nameListeners).length && requestListeners.del(win);\n                    }\n                };\n            }({\n                name: name,\n                win: win,\n                domain: domain\n            }, {\n                handler: options.handler,\n                handleError: options.errorHandler || function(err) {\n                    throw err;\n                },\n                window: win,\n                domain: domain || \"*\",\n                name: name\n            });\n            return {\n                cancel: function() {\n                    requestListener.cancel();\n                }\n            };\n        }\n        var send_send = function send(win, name, data, options) {\n            var domainMatcher = (options = options || {}).domain || \"*\";\n            var responseTimeout = options.timeout || -1;\n            var childTimeout = options.timeout || 5e3;\n            var fireAndForget = options.fireAndForget || !1;\n            return promise_ZalgoPromise.try((function() {\n                !function(name, win, domain) {\n                    if (!name) throw new Error(\"Expected name\");\n                    if (domain && \"string\" != typeof domain && !Array.isArray(domain) && !util_isRegex(domain)) throw new TypeError(\"Can not send \" + name + \". Expected domain \" + JSON.stringify(domain) + \" to be a string, array, or regex\");\n                    if (isWindowClosed(win)) throw new Error(\"Can not send \" + name + \". Target window is closed\");\n                }(name, win, domainMatcher);\n                if (function(parent, child) {\n                    var actualParent = getAncestor(child);\n                    if (actualParent) return actualParent === parent;\n                    if (child === parent) return !1;\n                    if (getTop(child) === child) return !1;\n                    for (var _i15 = 0, _getFrames8 = getFrames(parent); _i15 < _getFrames8.length; _i15++) if (_getFrames8[_i15] === child) return !0;\n                    return !1;\n                }(window, win)) return awaitWindowHello(win, childTimeout);\n            })).then((function(_temp) {\n                return function(win, targetDomain, actualDomain, _ref) {\n                    var send = _ref.send;\n                    return promise_ZalgoPromise.try((function() {\n                        return \"string\" == typeof targetDomain ? targetDomain : promise_ZalgoPromise.try((function() {\n                            return actualDomain || sayHello(win, {\n                                send: send\n                            }).then((function(_ref2) {\n                                return _ref2.domain;\n                            }));\n                        })).then((function(normalizedDomain) {\n                            if (!matchDomain(targetDomain, targetDomain)) throw new Error(\"Domain \" + stringify(targetDomain) + \" does not match \" + stringify(targetDomain));\n                            return normalizedDomain;\n                        }));\n                    }));\n                }(win, domainMatcher, (void 0 === _temp ? {} : _temp).domain, {\n                    send: send\n                });\n            })).then((function(targetDomain) {\n                var domain = targetDomain;\n                var logName = \"postrobot_method\" === name && data && \"string\" == typeof data.name ? data.name + \"()\" : name;\n                var promise = new promise_ZalgoPromise;\n                var hash = name + \"_\" + uniqueID();\n                if (!fireAndForget) {\n                    var responseListener = {\n                        name: name,\n                        win: win,\n                        domain: domain,\n                        promise: promise\n                    };\n                    !function(hash, listener) {\n                        globalStore(\"responseListeners\").set(hash, listener);\n                    }(hash, responseListener);\n                    var reqPromises = windowStore(\"requestPromises\").getOrSet(win, (function() {\n                        return [];\n                    }));\n                    reqPromises.push(promise);\n                    promise.catch((function() {\n                        !function(hash) {\n                            globalStore(\"erroredResponseListeners\").set(hash, !0);\n                        }(hash);\n                        deleteResponseListener(hash);\n                    }));\n                    var totalAckTimeout = function(win) {\n                        return windowStore(\"knownWindows\").get(win, !1);\n                    }(win) ? 1e4 : 2e3;\n                    var totalResTimeout = responseTimeout;\n                    var ackTimeout = totalAckTimeout;\n                    var resTimeout = totalResTimeout;\n                    var interval = safeInterval((function() {\n                        if (isWindowClosed(win)) return promise.reject(new Error(\"Window closed for \" + name + \" before \" + (responseListener.ack ? \"response\" : \"ack\")));\n                        if (responseListener.cancelled) return promise.reject(new Error(\"Response listener was cancelled for \" + name));\n                        ackTimeout = Math.max(ackTimeout - 500, 0);\n                        -1 !== resTimeout && (resTimeout = Math.max(resTimeout - 500, 0));\n                        return responseListener.ack || 0 !== ackTimeout ? 0 === resTimeout ? promise.reject(new Error(\"No response for postMessage \" + logName + \" in \" + getDomain() + \" in \" + totalResTimeout + \"ms\")) : void 0 : promise.reject(new Error(\"No ack for postMessage \" + logName + \" in \" + getDomain() + \" in \" + totalAckTimeout + \"ms\"));\n                    }), 500);\n                    promise.finally((function() {\n                        interval.cancel();\n                        reqPromises.splice(reqPromises.indexOf(promise, 1));\n                    })).catch(src_util_noop);\n                }\n                return send_sendMessage(win, domain, {\n                    id: uniqueID(),\n                    origin: getDomain(window),\n                    type: \"postrobot_message_request\",\n                    hash: hash,\n                    name: name,\n                    data: data,\n                    fireAndForget: fireAndForget\n                }, {\n                    on: on_on,\n                    send: send\n                }).then((function() {\n                    return fireAndForget ? promise.resolve() : promise;\n                }), (function(err) {\n                    throw new Error(\"Send request message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n                }));\n            }));\n        };\n        function setup_serializeMessage(destination, domain, obj) {\n            return serializeMessage(destination, domain, obj, {\n                on: on_on,\n                send: send_send\n            });\n        }\n        function setup_deserializeMessage(source, origin, message) {\n            return deserializeMessage(source, origin, message, {\n                on: on_on,\n                send: send_send\n            });\n        }\n        function setup_toProxyWindow(win) {\n            return window_ProxyWindow.toProxyWindow(win, {\n                send: send_send\n            });\n        }\n        function cleanUpWindow(win) {\n            for (var _i2 = 0, _requestPromises$get2 = windowStore(\"requestPromises\").get(win, []); _i2 < _requestPromises$get2.length; _i2++) _requestPromises$get2[_i2].reject(new Error(\"Window \" + (isWindowClosed(win) ? \"closed\" : \"cleaned up\") + \" before response\")).catch(src_util_noop);\n        }\n        var src_bridge;\n        src_bridge = {\n            setupBridge: setupBridge,\n            openBridge: function(url, domain) {\n                var bridges = globalStore(\"bridges\");\n                var bridgeFrames = globalStore(\"bridgeFrames\");\n                domain = domain || getDomainFromUrl(url);\n                return bridges.getOrSet(domain, (function() {\n                    return promise_ZalgoPromise.try((function() {\n                        if (getDomain() === domain) throw new Error(\"Can not open bridge on the same domain as current domain: \" + domain);\n                        var name = getBridgeName(domain);\n                        if (getFrameByName(window, name)) throw new Error(\"Frame with name \" + name + \" already exists on page\");\n                        var iframe = function(name, url) {\n                            var iframe = document.createElement(\"iframe\");\n                            iframe.setAttribute(\"name\", name);\n                            iframe.setAttribute(\"id\", name);\n                            iframe.setAttribute(\"style\", \"display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;\");\n                            iframe.setAttribute(\"frameborder\", \"0\");\n                            iframe.setAttribute(\"border\", \"0\");\n                            iframe.setAttribute(\"scrolling\", \"no\");\n                            iframe.setAttribute(\"allowTransparency\", \"true\");\n                            iframe.setAttribute(\"tabindex\", \"-1\");\n                            iframe.setAttribute(\"hidden\", \"true\");\n                            iframe.setAttribute(\"title\", \"\");\n                            iframe.setAttribute(\"role\", \"presentation\");\n                            iframe.src = url;\n                            return iframe;\n                        }(name, url);\n                        bridgeFrames.set(domain, iframe);\n                        return documentBodyReady.then((function(body) {\n                            body.appendChild(iframe);\n                            var bridge = iframe.contentWindow;\n                            return new promise_ZalgoPromise((function(resolve, reject) {\n                                iframe.addEventListener(\"load\", resolve);\n                                iframe.addEventListener(\"error\", reject);\n                            })).then((function() {\n                                return awaitWindowHello(bridge, 5e3, \"Bridge \" + url);\n                            })).then((function() {\n                                return bridge;\n                            }));\n                        }));\n                    }));\n                }));\n            },\n            linkWindow: linkWindow,\n            linkUrl: function(win, url) {\n                linkWindow({\n                    win: win,\n                    domain: getDomainFromUrl(url)\n                });\n            },\n            isBridge: isBridge,\n            needsBridge: needsBridge,\n            needsBridgeForBrowser: needsBridgeForBrowser,\n            hasBridge: function(url, domain) {\n                return globalStore(\"bridges\").has(domain || getDomainFromUrl(url));\n            },\n            needsBridgeForWin: needsBridgeForWin,\n            needsBridgeForDomain: needsBridgeForDomain,\n            destroyBridges: function() {\n                var bridges = globalStore(\"bridges\");\n                var bridgeFrames = globalStore(\"bridgeFrames\");\n                for (var _i4 = 0, _bridgeFrames$keys2 = bridgeFrames.keys(); _i4 < _bridgeFrames$keys2.length; _i4++) {\n                    var frame = bridgeFrames.get(_bridgeFrames$keys2[_i4]);\n                    frame && frame.parentNode && frame.parentNode.removeChild(frame);\n                }\n                bridgeFrames.reset();\n                bridges.reset();\n            }\n        };\n        function lib_global_getGlobal(win) {\n            void 0 === win && (win = window);\n            if (!isSameDomain(win)) throw new Error(\"Can not get global for window on different domain\");\n            win.__zoid_9_0_58__ || (win.__zoid_9_0_58__ = {});\n            return win.__zoid_9_0_58__;\n        }\n        function getProxyObject(obj) {\n            return {\n                get: function() {\n                    var _this = this;\n                    return promise_ZalgoPromise.try((function() {\n                        if (_this.source && _this.source !== window) throw new Error(\"Can not call get on proxy object from a remote window\");\n                        return obj;\n                    }));\n                }\n            };\n        }\n        var PROP_TYPE = {\n            STRING: \"string\",\n            OBJECT: \"object\",\n            FUNCTION: \"function\",\n            BOOLEAN: \"boolean\",\n            NUMBER: \"number\",\n            ARRAY: \"array\"\n        };\n        var PROP_SERIALIZATION = {\n            JSON: \"json\",\n            DOTIFY: \"dotify\",\n            BASE64: \"base64\"\n        };\n        var CONTEXT = WINDOW_TYPE;\n        var EVENT = {\n            RENDER: \"zoid-render\",\n            RENDERED: \"zoid-rendered\",\n            DISPLAY: \"zoid-display\",\n            ERROR: \"zoid-error\",\n            CLOSE: \"zoid-close\",\n            DESTROY: \"zoid-destroy\",\n            PROPS: \"zoid-props\",\n            RESIZE: \"zoid-resize\",\n            FOCUS: \"zoid-focus\"\n        };\n        function normalizeChildProp(propsDef, props, key, value, helpers) {\n            if (!propsDef.hasOwnProperty(key)) return value;\n            var prop = propsDef[key];\n            return \"function\" == typeof prop.childDecorate ? prop.childDecorate({\n                value: value,\n                uid: helpers.uid,\n                close: helpers.close,\n                focus: helpers.focus,\n                onError: helpers.onError,\n                onProps: helpers.onProps,\n                resize: helpers.resize,\n                getParent: helpers.getParent,\n                getParentDomain: helpers.getParentDomain,\n                show: helpers.show,\n                hide: helpers.hide\n            }) : value;\n        }\n        function parseChildWindowName(windowName) {\n            return inlineMemoize(parseChildWindowName, (function() {\n                if (!windowName) throw new Error(\"No window name\");\n                var _windowName$split = windowName.split(\"__\"), zoidcomp = _windowName$split[1], name = _windowName$split[2], encodedPayload = _windowName$split[3];\n                if (\"zoid\" !== zoidcomp) throw new Error(\"Window not rendered by zoid - got \" + zoidcomp);\n                if (!name) throw new Error(\"Expected component name\");\n                if (!encodedPayload) throw new Error(\"Expected encoded payload\");\n                try {\n                    return JSON.parse(function(str) {\n                        if (\"function\" == typeof atob) return decodeURIComponent([].map.call(atob(str), (function(c) {\n                            return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n                        })).join(\"\"));\n                        if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"base64\").toString(\"utf8\");\n                        throw new Error(\"Can not find window.atob or Buffer\");\n                    }(encodedPayload));\n                } catch (err) {\n                    throw new Error(\"Can not decode window name payload: \" + encodedPayload + \": \" + stringifyError(err));\n                }\n            }), [ windowName ]);\n        }\n        function getChildPayload() {\n            try {\n                return parseChildWindowName(window.name);\n            } catch (err) {}\n        }\n        function child_focus() {\n            return promise_ZalgoPromise.try((function() {\n                window.focus();\n            }));\n        }\n        function child_destroy() {\n            return promise_ZalgoPromise.try((function() {\n                window.close();\n            }));\n        }\n        function props_getQueryParam(prop, key, value) {\n            return promise_ZalgoPromise.try((function() {\n                return \"function\" == typeof prop.queryParam ? prop.queryParam({\n                    value: value\n                }) : \"string\" == typeof prop.queryParam ? prop.queryParam : key;\n            }));\n        }\n        function getQueryValue(prop, key, value) {\n            return promise_ZalgoPromise.try((function() {\n                return \"function\" == typeof prop.queryValue && isDefined(value) ? prop.queryValue({\n                    value: value\n                }) : value;\n            }));\n        }\n        function parentComponent(options, overrides, parentWin) {\n            void 0 === overrides && (overrides = {});\n            void 0 === parentWin && (parentWin = window);\n            var propsDef = options.propsDef, containerTemplate = options.containerTemplate, prerenderTemplate = options.prerenderTemplate, tag = options.tag, name = options.name, attributes = options.attributes, dimensions = options.dimensions, autoResize = options.autoResize, url = options.url, domainMatch = options.domain;\n            var initPromise = new promise_ZalgoPromise;\n            var handledErrors = [];\n            var clean = cleanup();\n            var state = {};\n            var internalState = {\n                visible: !0\n            };\n            var event = overrides.event ? overrides.event : (triggered = {}, handlers = {}, \n            {\n                on: function(eventName, handler) {\n                    var handlerList = handlers[eventName] = handlers[eventName] || [];\n                    handlerList.push(handler);\n                    var cancelled = !1;\n                    return {\n                        cancel: function() {\n                            if (!cancelled) {\n                                cancelled = !0;\n                                handlerList.splice(handlerList.indexOf(handler), 1);\n                            }\n                        }\n                    };\n                },\n                once: function(eventName, handler) {\n                    var listener = this.on(eventName, (function() {\n                        listener.cancel();\n                        handler();\n                    }));\n                    return listener;\n                },\n                trigger: function(eventName) {\n                    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) args[_key3 - 1] = arguments[_key3];\n                    var handlerList = handlers[eventName];\n                    var promises = [];\n                    if (handlerList) {\n                        var _loop = function(_i4) {\n                            var handler = handlerList[_i4];\n                            promises.push(promise_ZalgoPromise.try((function() {\n                                return handler.apply(void 0, args);\n                            })));\n                        };\n                        for (var _i4 = 0; _i4 < handlerList.length; _i4++) _loop(_i4);\n                    }\n                    return promise_ZalgoPromise.all(promises).then(src_util_noop);\n                },\n                triggerOnce: function(eventName) {\n                    if (triggered[eventName]) return promise_ZalgoPromise.resolve();\n                    triggered[eventName] = !0;\n                    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) args[_key4 - 1] = arguments[_key4];\n                    return this.trigger.apply(this, [ eventName ].concat(args));\n                },\n                reset: function() {\n                    handlers = {};\n                }\n            });\n            var triggered, handlers;\n            var props = overrides.props ? overrides.props : {};\n            var currentProxyWin;\n            var currentProxyContainer;\n            var childComponent;\n            var onErrorOverride = overrides.onError;\n            var getProxyContainerOverride = overrides.getProxyContainer;\n            var showOverride = overrides.show;\n            var hideOverride = overrides.hide;\n            var closeOverride = overrides.close;\n            var renderContainerOverride = overrides.renderContainer;\n            var getProxyWindowOverride = overrides.getProxyWindow;\n            var setProxyWinOverride = overrides.setProxyWin;\n            var openFrameOverride = overrides.openFrame;\n            var openPrerenderFrameOverride = overrides.openPrerenderFrame;\n            var prerenderOverride = overrides.prerender;\n            var openOverride = overrides.open;\n            var openPrerenderOverride = overrides.openPrerender;\n            var watchForUnloadOverride = overrides.watchForUnload;\n            var getInternalStateOverride = overrides.getInternalState;\n            var setInternalStateOverride = overrides.setInternalState;\n            var getPropsForChild = function(domain) {\n                var result = {};\n                for (var _i2 = 0, _Object$keys2 = Object.keys(props); _i2 < _Object$keys2.length; _i2++) {\n                    var key = _Object$keys2[_i2];\n                    var prop = propsDef[key];\n                    prop && !1 === prop.sendToChild || prop && prop.sameDomain && !matchDomain(domain, getDomain(window)) || (result[key] = props[key]);\n                }\n                return promise_ZalgoPromise.hash(result);\n            };\n            var getInternalState = function() {\n                return promise_ZalgoPromise.try((function() {\n                    return getInternalStateOverride ? getInternalStateOverride() : internalState;\n                }));\n            };\n            var setInternalState = function(newInternalState) {\n                return promise_ZalgoPromise.try((function() {\n                    return setInternalStateOverride ? setInternalStateOverride(newInternalState) : internalState = _extends({}, internalState, newInternalState);\n                }));\n            };\n            var getProxyWindow = function() {\n                return getProxyWindowOverride ? getProxyWindowOverride() : promise_ZalgoPromise.try((function() {\n                    var windowProp = props.window;\n                    if (windowProp) {\n                        var _proxyWin = setup_toProxyWindow(windowProp);\n                        clean.register((function() {\n                            return windowProp.close();\n                        }));\n                        return _proxyWin;\n                    }\n                    return new window_ProxyWindow({\n                        send: send_send\n                    });\n                }));\n            };\n            var getProxyContainer = function(container) {\n                return getProxyContainerOverride ? getProxyContainerOverride(container) : promise_ZalgoPromise.try((function() {\n                    return elementReady(container);\n                })).then((function(containerElement) {\n                    isShadowElement(containerElement) && (containerElement = function(element) {\n                        var shadowHost = function(element) {\n                            var shadowRoot = function(element) {\n                                for (;element.parentNode; ) element = element.parentNode;\n                                if (isShadowElement(element)) return element;\n                            }(element);\n                            if (shadowRoot.host) return shadowRoot.host;\n                        }(element);\n                        if (!shadowHost) throw new Error(\"Element is not in shadow dom\");\n                        if (isShadowElement(shadowHost)) throw new Error(\"Host element is also in shadow dom\");\n                        var slotName = \"shadow-slot-\" + uniqueID();\n                        var slot = document.createElement(\"slot\");\n                        slot.setAttribute(\"name\", slotName);\n                        element.appendChild(slot);\n                        var slotProvider = document.createElement(\"div\");\n                        slotProvider.setAttribute(\"slot\", slotName);\n                        shadowHost.appendChild(slotProvider);\n                        return slotProvider;\n                    }(containerElement));\n                    return getProxyObject(containerElement);\n                }));\n            };\n            var setProxyWin = function(proxyWin) {\n                return setProxyWinOverride ? setProxyWinOverride(proxyWin) : promise_ZalgoPromise.try((function() {\n                    currentProxyWin = proxyWin;\n                }));\n            };\n            var show = function() {\n                return showOverride ? showOverride() : promise_ZalgoPromise.hash({\n                    setState: setInternalState({\n                        visible: !0\n                    }),\n                    showElement: currentProxyContainer ? currentProxyContainer.get().then(showElement) : null\n                }).then(src_util_noop);\n            };\n            var hide = function() {\n                return hideOverride ? hideOverride() : promise_ZalgoPromise.hash({\n                    setState: setInternalState({\n                        visible: !1\n                    }),\n                    showElement: currentProxyContainer ? currentProxyContainer.get().then(hideElement) : null\n                }).then(src_util_noop);\n            };\n            var getUrl = function() {\n                return \"function\" == typeof url ? url({\n                    props: props\n                }) : url;\n            };\n            var getAttributes = function() {\n                return \"function\" == typeof attributes ? attributes({\n                    props: props\n                }) : attributes;\n            };\n            var getChildDomain = function() {\n                return domainMatch && \"string\" == typeof domainMatch ? domainMatch : getDomainFromUrl(getUrl());\n            };\n            var getDomainMatcher = function() {\n                return domainMatch && util_isRegex(domainMatch) ? domainMatch : getChildDomain();\n            };\n            var openFrame = function(context, _ref) {\n                var windowName = _ref.windowName;\n                return openFrameOverride ? openFrameOverride(context, {\n                    windowName: windowName\n                }) : promise_ZalgoPromise.try((function() {\n                    if (context === CONTEXT.IFRAME) return getProxyObject(dom_iframe({\n                        attributes: _extends({\n                            name: windowName,\n                            title: name\n                        }, getAttributes().iframe)\n                    }));\n                }));\n            };\n            var openPrerenderFrame = function(context) {\n                return openPrerenderFrameOverride ? openPrerenderFrameOverride(context) : promise_ZalgoPromise.try((function() {\n                    if (context === CONTEXT.IFRAME) return getProxyObject(dom_iframe({\n                        attributes: _extends({\n                            name: \"__zoid_prerender_frame__\" + name + \"_\" + uniqueID() + \"__\",\n                            title: \"prerender__\" + name\n                        }, getAttributes().iframe)\n                    }));\n                }));\n            };\n            var openPrerender = function(context, proxyWin, proxyPrerenderFrame) {\n                return openPrerenderOverride ? openPrerenderOverride(context, proxyWin, proxyPrerenderFrame) : promise_ZalgoPromise.try((function() {\n                    if (context === CONTEXT.IFRAME) {\n                        if (!proxyPrerenderFrame) throw new Error(\"Expected proxy frame to be passed\");\n                        return proxyPrerenderFrame.get().then((function(prerenderFrame) {\n                            clean.register((function() {\n                                return destroyElement(prerenderFrame);\n                            }));\n                            return awaitFrameWindow(prerenderFrame).then((function(prerenderFrameWindow) {\n                                return assertSameDomain(prerenderFrameWindow);\n                            })).then((function(win) {\n                                return setup_toProxyWindow(win);\n                            }));\n                        }));\n                    }\n                    if (context === CONTEXT.POPUP) return proxyWin;\n                    throw new Error(\"No render context available for \" + context);\n                }));\n            };\n            var focus = function() {\n                return promise_ZalgoPromise.try((function() {\n                    if (currentProxyWin) return promise_ZalgoPromise.all([ event.trigger(EVENT.FOCUS), currentProxyWin.focus() ]).then(src_util_noop);\n                }));\n            };\n            var getWindowRef = function(target, domain, uid, context) {\n                if (domain === getDomain(window)) {\n                    var global = lib_global_getGlobal(window);\n                    global.windows = global.windows || {};\n                    global.windows[uid] = window;\n                    clean.register((function() {\n                        delete global.windows[uid];\n                    }));\n                    return {\n                        type: \"global\",\n                        uid: uid\n                    };\n                }\n                return context === CONTEXT.POPUP ? {\n                    type: \"opener\"\n                } : {\n                    type: \"parent\",\n                    distance: getDistanceFromTop(window)\n                };\n            };\n            var initChild = function(childExports) {\n                return promise_ZalgoPromise.try((function() {\n                    childComponent = childExports;\n                    initPromise.resolve();\n                    clean.register((function() {\n                        return childExports.close.fireAndForget().catch(src_util_noop);\n                    }));\n                }));\n            };\n            var resize = function(_ref2) {\n                var width = _ref2.width, height = _ref2.height;\n                return promise_ZalgoPromise.try((function() {\n                    event.trigger(EVENT.RESIZE, {\n                        width: width,\n                        height: height\n                    });\n                }));\n            };\n            var destroy = function(err) {\n                return promise_ZalgoPromise.try((function() {\n                    return event.trigger(EVENT.DESTROY);\n                })).catch(src_util_noop).then((function() {\n                    return clean.all();\n                })).then((function() {\n                    initPromise.asyncReject(err || new Error(\"Component destroyed\"));\n                }));\n            };\n            var close = function() {\n                return closeOverride ? closeOverride() : promise_ZalgoPromise.try((function() {\n                    return event.trigger(EVENT.CLOSE);\n                })).then((function() {\n                    return destroy(new Error(\"Window closed\"));\n                }));\n            };\n            var open = function(context, _ref3) {\n                var proxyWin = _ref3.proxyWin, proxyFrame = _ref3.proxyFrame, windowName = _ref3.windowName;\n                return openOverride ? openOverride(context, {\n                    proxyWin: proxyWin,\n                    proxyFrame: proxyFrame,\n                    windowName: windowName\n                }) : promise_ZalgoPromise.try((function() {\n                    if (context === CONTEXT.IFRAME) {\n                        if (!proxyFrame) throw new Error(\"Expected proxy frame to be passed\");\n                        return proxyFrame.get().then((function(frame) {\n                            return awaitFrameWindow(frame).then((function(win) {\n                                var frameWatcher = function(element, handler) {\n                                    handler = once(handler);\n                                    var interval;\n                                    isElementClosed(element) ? handler() : interval = safeInterval((function() {\n                                        if (isElementClosed(element)) {\n                                            interval.cancel();\n                                            handler();\n                                        }\n                                    }), 50);\n                                    return {\n                                        cancel: function() {\n                                            interval && interval.cancel();\n                                        }\n                                    };\n                                }(frame, close);\n                                clean.register((function() {\n                                    return frameWatcher.cancel();\n                                }));\n                                clean.register((function() {\n                                    return destroyElement(frame);\n                                }));\n                                clean.register((function() {\n                                    return cleanUpWindow(win);\n                                }));\n                                return win;\n                            }));\n                        }));\n                    }\n                    if (context === CONTEXT.POPUP) {\n                        var width = dimensions.width, height = dimensions.height;\n                        width = normalizeDimension(width, window.outerWidth);\n                        height = normalizeDimension(height, window.outerWidth);\n                        var win = function(url, options) {\n                            var width = (options = options || {}).width, height = options.height;\n                            var top = 0;\n                            var left = 0;\n                            width && (window.outerWidth ? left = Math.round((window.outerWidth - width) / 2) + window.screenX : window.screen.width && (left = Math.round((window.screen.width - width) / 2)));\n                            height && (window.outerHeight ? top = Math.round((window.outerHeight - height) / 2) + window.screenY : window.screen.height && (top = Math.round((window.screen.height - height) / 2)));\n                            width && height && (options = _extends({\n                                top: top,\n                                left: left,\n                                width: width,\n                                height: height,\n                                status: 1,\n                                toolbar: 0,\n                                menubar: 0,\n                                resizable: 1,\n                                scrollbars: 1\n                            }, options));\n                            var name = options.name || \"\";\n                            delete options.name;\n                            var params = Object.keys(options).map((function(key) {\n                                if (null != options[key]) return key + \"=\" + stringify(options[key]);\n                            })).filter(Boolean).join(\",\");\n                            var win;\n                            try {\n                                win = window.open(\"\", name, params, !0);\n                            } catch (err) {\n                                throw new PopupOpenError(\"Can not open popup window - \" + (err.stack || err.message));\n                            }\n                            if (isWindowClosed(win)) {\n                                var err;\n                                throw new PopupOpenError(\"Can not open popup window - blocked\");\n                            }\n                            window.addEventListener(\"unload\", (function() {\n                                return win.close();\n                            }));\n                            return win;\n                        }(0, _extends({\n                            name: windowName,\n                            width: width,\n                            height: height\n                        }, getAttributes().popup));\n                        clean.register((function() {\n                            return closeWindow(win);\n                        }));\n                        clean.register((function() {\n                            return cleanUpWindow(win);\n                        }));\n                        return win;\n                    }\n                    throw new Error(\"No render context available for \" + context);\n                })).then((function(win) {\n                    proxyWin.setWindow(win, {\n                        send: send_send\n                    });\n                    return proxyWin;\n                }));\n            };\n            var watchForUnload = function() {\n                return promise_ZalgoPromise.try((function() {\n                    var unloadWindowListener = addEventListener(window, \"unload\", once((function() {\n                        destroy(new Error(\"Window navigated away\"));\n                    })));\n                    var closeParentWindowListener = onCloseWindow(parentWin, destroy, 3e3);\n                    clean.register(closeParentWindowListener.cancel);\n                    clean.register(unloadWindowListener.cancel);\n                    if (watchForUnloadOverride) return watchForUnloadOverride();\n                }));\n            };\n            var checkWindowClose = function(proxyWin) {\n                var closed = !1;\n                return proxyWin.isClosed().then((function(isClosed) {\n                    if (isClosed) {\n                        closed = !0;\n                        return close();\n                    }\n                    return promise_ZalgoPromise.delay(200).then((function() {\n                        return proxyWin.isClosed();\n                    })).then((function(secondIsClosed) {\n                        if (secondIsClosed) {\n                            closed = !0;\n                            return close();\n                        }\n                    }));\n                })).then((function() {\n                    return closed;\n                }));\n            };\n            var onError = function(err) {\n                return onErrorOverride ? onErrorOverride(err) : promise_ZalgoPromise.try((function() {\n                    if (-1 === handledErrors.indexOf(err)) {\n                        handledErrors.push(err);\n                        initPromise.asyncReject(err);\n                        return event.trigger(EVENT.ERROR, err);\n                    }\n                }));\n            };\n            initChild.onError = onError;\n            var renderTemplate = function(renderer, _ref6) {\n                return renderer({\n                    container: _ref6.container,\n                    context: _ref6.context,\n                    uid: _ref6.uid,\n                    doc: _ref6.doc,\n                    frame: _ref6.frame,\n                    prerenderFrame: _ref6.prerenderFrame,\n                    focus: focus,\n                    close: close,\n                    state: state,\n                    props: props,\n                    tag: tag,\n                    dimensions: dimensions,\n                    event: event\n                });\n            };\n            var prerender = function(proxyPrerenderWin, _ref7) {\n                var context = _ref7.context, uid = _ref7.uid;\n                return prerenderOverride ? prerenderOverride(proxyPrerenderWin, {\n                    context: context,\n                    uid: uid\n                }) : promise_ZalgoPromise.try((function() {\n                    if (prerenderTemplate) {\n                        var prerenderWindow = proxyPrerenderWin.getWindow();\n                        if (prerenderWindow && isSameDomain(prerenderWindow) && function(win) {\n                            try {\n                                if (!win.location.href) return !0;\n                                if (\"about:blank\" === win.location.href) return !0;\n                            } catch (err) {}\n                            return !1;\n                        }(prerenderWindow)) {\n                            var doc = (prerenderWindow = assertSameDomain(prerenderWindow)).document;\n                            var el = renderTemplate(prerenderTemplate, {\n                                context: context,\n                                uid: uid,\n                                doc: doc\n                            });\n                            if (el) {\n                                if (el.ownerDocument !== doc) throw new Error(\"Expected prerender template to have been created with document from child window\");\n                                !function(win, el) {\n                                    var tag = el.tagName.toLowerCase();\n                                    if (\"html\" !== tag) throw new Error(\"Expected element to be html, got \" + tag);\n                                    var documentElement = win.document.documentElement;\n                                    for (var _i6 = 0, _arrayFrom2 = arrayFrom(documentElement.children); _i6 < _arrayFrom2.length; _i6++) documentElement.removeChild(_arrayFrom2[_i6]);\n                                    for (var _i8 = 0, _arrayFrom4 = arrayFrom(el.children); _i8 < _arrayFrom4.length; _i8++) documentElement.appendChild(_arrayFrom4[_i8]);\n                                }(prerenderWindow, el);\n                                var _autoResize$width = autoResize.width, width = void 0 !== _autoResize$width && _autoResize$width, _autoResize$height = autoResize.height, height = void 0 !== _autoResize$height && _autoResize$height, _autoResize$element = autoResize.element, element = void 0 === _autoResize$element ? \"body\" : _autoResize$element;\n                                if ((element = getElementSafe(element, doc)) && (width || height)) {\n                                    var prerenderResizeListener = onResize(element, (function(_ref8) {\n                                        resize({\n                                            width: width ? _ref8.width : void 0,\n                                            height: height ? _ref8.height : void 0\n                                        });\n                                    }), {\n                                        width: width,\n                                        height: height,\n                                        win: prerenderWindow\n                                    });\n                                    event.on(EVENT.RENDERED, prerenderResizeListener.cancel);\n                                }\n                            }\n                        }\n                    }\n                }));\n            };\n            var renderContainer = function(proxyContainer, _ref9) {\n                var proxyFrame = _ref9.proxyFrame, proxyPrerenderFrame = _ref9.proxyPrerenderFrame, context = _ref9.context, uid = _ref9.uid;\n                return renderContainerOverride ? renderContainerOverride(proxyContainer, {\n                    proxyFrame: proxyFrame,\n                    proxyPrerenderFrame: proxyPrerenderFrame,\n                    context: context,\n                    uid: uid\n                }) : promise_ZalgoPromise.hash({\n                    container: proxyContainer.get(),\n                    frame: proxyFrame ? proxyFrame.get() : null,\n                    prerenderFrame: proxyPrerenderFrame ? proxyPrerenderFrame.get() : null,\n                    internalState: getInternalState()\n                }).then((function(_ref10) {\n                    var container = _ref10.container, visible = _ref10.internalState.visible;\n                    var innerContainer = renderTemplate(containerTemplate, {\n                        context: context,\n                        uid: uid,\n                        container: container,\n                        frame: _ref10.frame,\n                        prerenderFrame: _ref10.prerenderFrame,\n                        doc: document\n                    });\n                    if (innerContainer) {\n                        visible || hideElement(innerContainer);\n                        appendChild(container, innerContainer);\n                        clean.register((function() {\n                            return destroyElement(innerContainer);\n                        }));\n                        return currentProxyContainer = getProxyObject(innerContainer);\n                    }\n                }));\n            };\n            var getHelpers = function() {\n                return {\n                    state: state,\n                    event: event,\n                    close: close,\n                    focus: focus,\n                    resize: resize,\n                    onError: onError,\n                    updateProps: updateProps,\n                    show: show,\n                    hide: hide\n                };\n            };\n            var setProps = function(newProps, isUpdate) {\n                void 0 === isUpdate && (isUpdate = !1);\n                var helpers = getHelpers();\n                !function(propsDef, props, inputProps, helpers, isUpdate) {\n                    void 0 === isUpdate && (isUpdate = !1);\n                    extend(props, inputProps = inputProps || {});\n                    var propNames = isUpdate ? [] : [].concat(Object.keys(propsDef));\n                    for (var _i2 = 0, _Object$keys2 = Object.keys(inputProps); _i2 < _Object$keys2.length; _i2++) {\n                        var key = _Object$keys2[_i2];\n                        -1 === propNames.indexOf(key) && propNames.push(key);\n                    }\n                    var aliases = [];\n                    var state = helpers.state, close = helpers.close, focus = helpers.focus, event = helpers.event, onError = helpers.onError;\n                    for (var _i4 = 0; _i4 < propNames.length; _i4++) {\n                        var _key = propNames[_i4];\n                        var propDef = propsDef[_key];\n                        var value = inputProps[_key];\n                        if (propDef) {\n                            var alias = propDef.alias;\n                            if (alias) {\n                                !isDefined(value) && isDefined(inputProps[alias]) && (value = inputProps[alias]);\n                                aliases.push(alias);\n                            }\n                            propDef.value && (value = propDef.value({\n                                props: props,\n                                state: state,\n                                close: close,\n                                focus: focus,\n                                event: event,\n                                onError: onError\n                            }));\n                            !isDefined(value) && propDef.default && (value = propDef.default({\n                                props: props,\n                                state: state,\n                                close: close,\n                                focus: focus,\n                                event: event,\n                                onError: onError\n                            }));\n                            if (isDefined(value) && (\"array\" === propDef.type ? !Array.isArray(value) : typeof value !== propDef.type)) throw new TypeError(\"Prop is not of type \" + propDef.type + \": \" + _key);\n                            props[_key] = value;\n                        }\n                    }\n                    for (var _i6 = 0; _i6 < aliases.length; _i6++) delete props[aliases[_i6]];\n                    for (var _i8 = 0, _Object$keys4 = Object.keys(props); _i8 < _Object$keys4.length; _i8++) {\n                        var _key2 = _Object$keys4[_i8];\n                        var _propDef = propsDef[_key2];\n                        var _value = props[_key2];\n                        _propDef && isDefined(_value) && _propDef.decorate && (props[_key2] = _propDef.decorate({\n                            value: _value,\n                            props: props,\n                            state: state,\n                            close: close,\n                            focus: focus,\n                            event: event,\n                            onError: onError\n                        }));\n                    }\n                    for (var _i10 = 0, _Object$keys6 = Object.keys(propsDef); _i10 < _Object$keys6.length; _i10++) {\n                        var _key3 = _Object$keys6[_i10];\n                        if (!1 !== propsDef[_key3].required && !isDefined(props[_key3])) throw new Error('Expected prop \"' + _key3 + '\" to be defined');\n                    }\n                }(propsDef, props, newProps, helpers, isUpdate);\n            };\n            var updateProps = function(newProps) {\n                setProps(newProps, !0);\n                return initPromise.then((function() {\n                    var child = childComponent;\n                    var proxyWin = currentProxyWin;\n                    if (child && proxyWin) return getPropsForChild(getDomainMatcher()).then((function(childProps) {\n                        return child.updateProps(childProps).catch((function(err) {\n                            return checkWindowClose(proxyWin).then((function(closed) {\n                                if (!closed) throw err;\n                            }));\n                        }));\n                    }));\n                }));\n            };\n            return {\n                init: function() {\n                    !function() {\n                        event.on(EVENT.RENDER, (function() {\n                            return props.onRender();\n                        }));\n                        event.on(EVENT.DISPLAY, (function() {\n                            return props.onDisplay();\n                        }));\n                        event.on(EVENT.RENDERED, (function() {\n                            return props.onRendered();\n                        }));\n                        event.on(EVENT.CLOSE, (function() {\n                            return props.onClose();\n                        }));\n                        event.on(EVENT.DESTROY, (function() {\n                            return props.onDestroy();\n                        }));\n                        event.on(EVENT.RESIZE, (function() {\n                            return props.onResize();\n                        }));\n                        event.on(EVENT.FOCUS, (function() {\n                            return props.onFocus();\n                        }));\n                        event.on(EVENT.PROPS, (function(newProps) {\n                            return props.onProps(newProps);\n                        }));\n                        event.on(EVENT.ERROR, (function(err) {\n                            return props && props.onError ? props.onError(err) : initPromise.reject(err).then((function() {\n                                setTimeout((function() {\n                                    throw err;\n                                }), 1);\n                            }));\n                        }));\n                        clean.register(event.reset);\n                    }();\n                },\n                render: function(target, container, context) {\n                    return promise_ZalgoPromise.try((function() {\n                        var uid = \"zoid-\" + tag + \"-\" + uniqueID();\n                        var domain = getDomainMatcher();\n                        var childDomain = getChildDomain();\n                        !function(target, domain, container) {\n                            if (target !== window) {\n                                if (!isSameTopWindow(window, target)) throw new Error(\"Can only renderTo an adjacent frame\");\n                                var origin = getDomain();\n                                if (!matchDomain(domain, origin) && !isSameDomain(target)) throw new Error(\"Can not render remotely to \" + domain.toString() + \" - can only render to \" + origin);\n                                if (container && \"string\" != typeof container) throw new Error(\"Container passed to renderTo must be a string selector, got \" + typeof container + \" }\");\n                            }\n                        }(target, domain, container);\n                        var delegatePromise = promise_ZalgoPromise.try((function() {\n                            if (target !== window) return function(context, target) {\n                                var delegateProps = {};\n                                for (var _i4 = 0, _Object$keys4 = Object.keys(props); _i4 < _Object$keys4.length; _i4++) {\n                                    var propName = _Object$keys4[_i4];\n                                    var propDef = propsDef[propName];\n                                    propDef && propDef.allowDelegate && (delegateProps[propName] = props[propName]);\n                                }\n                                var childOverridesPromise = send_send(target, \"zoid_delegate_\" + name, {\n                                    overrides: {\n                                        props: delegateProps,\n                                        event: event,\n                                        close: close,\n                                        onError: onError,\n                                        getInternalState: getInternalState,\n                                        setInternalState: setInternalState\n                                    }\n                                }).then((function(_ref11) {\n                                    var parent = _ref11.data.parent;\n                                    clean.register((function() {\n                                        if (!isWindowClosed(target)) return parent.destroy();\n                                    }));\n                                    return parent.getDelegateOverrides();\n                                })).catch((function(err) {\n                                    throw new Error(\"Unable to delegate rendering. Possibly the component is not loaded in the target window.\\n\\n\" + stringifyError(err));\n                                }));\n                                getProxyContainerOverride = function() {\n                                    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n                                    return childOverridesPromise.then((function(childOverrides) {\n                                        return childOverrides.getProxyContainer.apply(childOverrides, args);\n                                    }));\n                                };\n                                renderContainerOverride = function() {\n                                    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                                    return childOverridesPromise.then((function(childOverrides) {\n                                        return childOverrides.renderContainer.apply(childOverrides, args);\n                                    }));\n                                };\n                                showOverride = function() {\n                                    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];\n                                    return childOverridesPromise.then((function(childOverrides) {\n                                        return childOverrides.show.apply(childOverrides, args);\n                                    }));\n                                };\n                                hideOverride = function() {\n                                    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) args[_key4] = arguments[_key4];\n                                    return childOverridesPromise.then((function(childOverrides) {\n                                        return childOverrides.hide.apply(childOverrides, args);\n                                    }));\n                                };\n                                watchForUnloadOverride = function() {\n                                    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];\n                                    return childOverridesPromise.then((function(childOverrides) {\n                                        return childOverrides.watchForUnload.apply(childOverrides, args);\n                                    }));\n                                };\n                                if (context === CONTEXT.IFRAME) {\n                                    getProxyWindowOverride = function() {\n                                        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) args[_key6] = arguments[_key6];\n                                        return childOverridesPromise.then((function(childOverrides) {\n                                            return childOverrides.getProxyWindow.apply(childOverrides, args);\n                                        }));\n                                    };\n                                    openFrameOverride = function() {\n                                        for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) args[_key7] = arguments[_key7];\n                                        return childOverridesPromise.then((function(childOverrides) {\n                                            return childOverrides.openFrame.apply(childOverrides, args);\n                                        }));\n                                    };\n                                    openPrerenderFrameOverride = function() {\n                                        for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) args[_key8] = arguments[_key8];\n                                        return childOverridesPromise.then((function(childOverrides) {\n                                            return childOverrides.openPrerenderFrame.apply(childOverrides, args);\n                                        }));\n                                    };\n                                    prerenderOverride = function() {\n                                        for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) args[_key9] = arguments[_key9];\n                                        return childOverridesPromise.then((function(childOverrides) {\n                                            return childOverrides.prerender.apply(childOverrides, args);\n                                        }));\n                                    };\n                                    openOverride = function() {\n                                        for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) args[_key10] = arguments[_key10];\n                                        return childOverridesPromise.then((function(childOverrides) {\n                                            return childOverrides.open.apply(childOverrides, args);\n                                        }));\n                                    };\n                                    openPrerenderOverride = function() {\n                                        for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) args[_key11] = arguments[_key11];\n                                        return childOverridesPromise.then((function(childOverrides) {\n                                            return childOverrides.openPrerender.apply(childOverrides, args);\n                                        }));\n                                    };\n                                } else context === CONTEXT.POPUP && (setProxyWinOverride = function() {\n                                    for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) args[_key12] = arguments[_key12];\n                                    return childOverridesPromise.then((function(childOverrides) {\n                                        return childOverrides.setProxyWin.apply(childOverrides, args);\n                                    }));\n                                });\n                                return childOverridesPromise;\n                            }(context, target);\n                        }));\n                        var windowProp = props.window;\n                        var watchForUnloadPromise = watchForUnload();\n                        var buildUrlPromise = function(propsDef, props) {\n                            var params = {};\n                            var keys = Object.keys(props);\n                            return promise_ZalgoPromise.all(keys.map((function(key) {\n                                var prop = propsDef[key];\n                                if (prop) return promise_ZalgoPromise.resolve().then((function() {\n                                    var value = props[key];\n                                    if (value && prop.queryParam) return value;\n                                })).then((function(value) {\n                                    if (null != value) return promise_ZalgoPromise.all([ props_getQueryParam(prop, key, value), getQueryValue(prop, 0, value) ]).then((function(_ref) {\n                                        var queryParam = _ref[0], queryValue = _ref[1];\n                                        var result;\n                                        if (\"boolean\" == typeof queryValue) result = queryValue.toString(); else if (\"string\" == typeof queryValue) result = queryValue.toString(); else if (\"object\" == typeof queryValue && null !== queryValue) {\n                                            if (prop.serialization === PROP_SERIALIZATION.JSON) result = JSON.stringify(queryValue); else if (prop.serialization === PROP_SERIALIZATION.BASE64) result = btoa(JSON.stringify(queryValue)); else if (prop.serialization === PROP_SERIALIZATION.DOTIFY || !prop.serialization) {\n                                                result = function dotify(obj, prefix, newobj) {\n                                                    void 0 === prefix && (prefix = \"\");\n                                                    void 0 === newobj && (newobj = {});\n                                                    prefix = prefix ? prefix + \".\" : prefix;\n                                                    for (var key in obj) obj.hasOwnProperty(key) && null != obj[key] && \"function\" != typeof obj[key] && (obj[key] && Array.isArray(obj[key]) && obj[key].length && obj[key].every((function(val) {\n                                                        return \"object\" != typeof val;\n                                                    })) ? newobj[\"\" + prefix + key + \"[]\"] = obj[key].join(\",\") : obj[key] && \"object\" == typeof obj[key] ? newobj = dotify(obj[key], \"\" + prefix + key, newobj) : newobj[\"\" + prefix + key] = obj[key].toString());\n                                                    return newobj;\n                                                }(queryValue, key);\n                                                for (var _i12 = 0, _Object$keys8 = Object.keys(result); _i12 < _Object$keys8.length; _i12++) {\n                                                    var dotkey = _Object$keys8[_i12];\n                                                    params[dotkey] = result[dotkey];\n                                                }\n                                                return;\n                                            }\n                                        } else \"number\" == typeof queryValue && (result = queryValue.toString());\n                                        params[queryParam] = result;\n                                    }));\n                                }));\n                            }))).then((function() {\n                                return params;\n                            }));\n                        }(propsDef, props).then((function(query) {\n                            return function(url, options) {\n                                var query = options.query || {};\n                                var hash = options.hash || {};\n                                var originalUrl;\n                                var originalHash;\n                                var _url$split = url.split(\"#\");\n                                originalHash = _url$split[1];\n                                var _originalUrl$split = (originalUrl = _url$split[0]).split(\"?\");\n                                originalUrl = _originalUrl$split[0];\n                                var queryString = extendQuery(_originalUrl$split[1], query);\n                                var hashString = extendQuery(originalHash, hash);\n                                queryString && (originalUrl = originalUrl + \"?\" + queryString);\n                                hashString && (originalUrl = originalUrl + \"#\" + hashString);\n                                return originalUrl;\n                            }(normalizeMockUrl(getUrl()), {\n                                query: query\n                            });\n                        }));\n                        var onRenderPromise = event.trigger(EVENT.RENDER);\n                        var getProxyContainerPromise = getProxyContainer(container);\n                        var getProxyWindowPromise = getProxyWindow();\n                        var buildWindowNamePromise = getProxyWindowPromise.then((function(proxyWin) {\n                            return function(_temp) {\n                                var _ref4 = void 0 === _temp ? {} : _temp, proxyWin = _ref4.proxyWin, childDomain = _ref4.childDomain, domain = _ref4.domain, context = (void 0 === _ref4.target && window, \n                                _ref4.context), uid = _ref4.uid;\n                                return function(proxyWin, childDomain, domain, uid) {\n                                    return getPropsForChild(domain).then((function(childProps) {\n                                        var value = setup_serializeMessage(proxyWin, domain, childProps);\n                                        var propRef = childDomain === getDomain() ? {\n                                            type: \"uid\",\n                                            uid: uid\n                                        } : {\n                                            type: \"raw\",\n                                            value: value\n                                        };\n                                        if (\"uid\" === propRef.type) {\n                                            var global = lib_global_getGlobal(window);\n                                            global.props = global.props || {};\n                                            global.props[uid] = value;\n                                            clean.register((function() {\n                                                delete global.props[uid];\n                                            }));\n                                        }\n                                        return propRef;\n                                    }));\n                                }(proxyWin, childDomain, domain, uid).then((function(propsRef) {\n                                    return {\n                                        uid: uid,\n                                        context: context,\n                                        tag: tag,\n                                        version: \"9_0_58\",\n                                        childDomain: childDomain,\n                                        parentDomain: getDomain(window),\n                                        parent: getWindowRef(0, childDomain, uid, context),\n                                        props: propsRef,\n                                        exports: setup_serializeMessage(proxyWin, domain, (win = proxyWin, {\n                                            init: initChild,\n                                            close: close,\n                                            checkClose: function() {\n                                                return checkWindowClose(win);\n                                            },\n                                            resize: resize,\n                                            onError: onError,\n                                            show: show,\n                                            hide: hide\n                                        }))\n                                    };\n                                    var win;\n                                }));\n                            }({\n                                proxyWin: (_ref5 = {\n                                    proxyWin: proxyWin,\n                                    childDomain: childDomain,\n                                    domain: domain,\n                                    target: target,\n                                    context: context,\n                                    uid: uid\n                                }).proxyWin,\n                                childDomain: _ref5.childDomain,\n                                domain: _ref5.domain,\n                                target: _ref5.target,\n                                context: _ref5.context,\n                                uid: _ref5.uid\n                            }).then((function(childPayload) {\n                                return \"__zoid__\" + name + \"__\" + base64encode(JSON.stringify(childPayload)) + \"__\";\n                            }));\n                            var _ref5;\n                        }));\n                        var openFramePromise = buildWindowNamePromise.then((function(windowName) {\n                            return openFrame(context, {\n                                windowName: windowName\n                            });\n                        }));\n                        var openPrerenderFramePromise = openPrerenderFrame(context);\n                        var renderContainerPromise = promise_ZalgoPromise.hash({\n                            proxyContainer: getProxyContainerPromise,\n                            proxyFrame: openFramePromise,\n                            proxyPrerenderFrame: openPrerenderFramePromise\n                        }).then((function(_ref12) {\n                            return renderContainer(_ref12.proxyContainer, {\n                                context: context,\n                                uid: uid,\n                                proxyFrame: _ref12.proxyFrame,\n                                proxyPrerenderFrame: _ref12.proxyPrerenderFrame\n                            });\n                        })).then((function(proxyContainer) {\n                            return proxyContainer;\n                        }));\n                        var openPromise = promise_ZalgoPromise.hash({\n                            windowName: buildWindowNamePromise,\n                            proxyFrame: openFramePromise,\n                            proxyWin: getProxyWindowPromise\n                        }).then((function(_ref13) {\n                            var proxyWin = _ref13.proxyWin;\n                            return windowProp ? proxyWin : open(context, {\n                                windowName: _ref13.windowName,\n                                proxyWin: proxyWin,\n                                proxyFrame: _ref13.proxyFrame\n                            });\n                        }));\n                        var openPrerenderPromise = promise_ZalgoPromise.hash({\n                            proxyWin: openPromise,\n                            proxyPrerenderFrame: openPrerenderFramePromise\n                        }).then((function(_ref14) {\n                            return openPrerender(context, _ref14.proxyWin, _ref14.proxyPrerenderFrame);\n                        }));\n                        var setStatePromise = openPromise.then((function(proxyWin) {\n                            currentProxyWin = proxyWin;\n                            return setProxyWin(proxyWin);\n                        }));\n                        var prerenderPromise = promise_ZalgoPromise.hash({\n                            proxyPrerenderWin: openPrerenderPromise,\n                            state: setStatePromise\n                        }).then((function(_ref15) {\n                            return prerender(_ref15.proxyPrerenderWin, {\n                                context: context,\n                                uid: uid\n                            });\n                        }));\n                        var setWindowNamePromise = promise_ZalgoPromise.hash({\n                            proxyWin: openPromise,\n                            windowName: buildWindowNamePromise\n                        }).then((function(_ref16) {\n                            if (windowProp) return _ref16.proxyWin.setName(_ref16.windowName);\n                        }));\n                        var loadUrlPromise = promise_ZalgoPromise.hash({\n                            proxyWin: openPromise,\n                            builtUrl: buildUrlPromise,\n                            windowName: setWindowNamePromise,\n                            prerender: prerenderPromise\n                        }).then((function(_ref17) {\n                            return _ref17.proxyWin.setLocation(_ref17.builtUrl);\n                        }));\n                        var watchForClosePromise = openPromise.then((function(proxyWin) {\n                            !function watchForClose(proxyWin) {\n                                var cancelled = !1;\n                                clean.register((function() {\n                                    cancelled = !0;\n                                }));\n                                return promise_ZalgoPromise.delay(2e3).then((function() {\n                                    return proxyWin.isClosed();\n                                })).then((function(isClosed) {\n                                    return isClosed ? close() : cancelled ? void 0 : watchForClose(proxyWin);\n                                }));\n                            }(proxyWin);\n                        }));\n                        var onDisplayPromise = promise_ZalgoPromise.hash({\n                            container: renderContainerPromise,\n                            prerender: prerenderPromise\n                        }).then((function() {\n                            return event.trigger(EVENT.DISPLAY);\n                        }));\n                        var openBridgePromise = openPromise.then((function(proxyWin) {\n                            return function(proxyWin, domain, context) {\n                                return promise_ZalgoPromise.try((function() {\n                                    return proxyWin.awaitWindow();\n                                })).then((function(win) {\n                                    if (src_bridge && src_bridge.needsBridge({\n                                        win: win,\n                                        domain: domain\n                                    }) && !src_bridge.hasBridge(domain, domain)) {\n                                        var bridgeUrl = \"function\" == typeof options.bridgeUrl ? options.bridgeUrl({\n                                            props: props\n                                        }) : options.bridgeUrl;\n                                        if (!bridgeUrl) throw new Error(\"Bridge needed to render \" + context);\n                                        var bridgeDomain = getDomainFromUrl(bridgeUrl);\n                                        src_bridge.linkUrl(win, domain);\n                                        return src_bridge.openBridge(normalizeMockUrl(bridgeUrl), bridgeDomain);\n                                    }\n                                }));\n                            }(proxyWin, childDomain, context);\n                        }));\n                        var runTimeoutPromise = loadUrlPromise.then((function() {\n                            return promise_ZalgoPromise.try((function() {\n                                var timeout = props.timeout;\n                                if (timeout) return initPromise.timeout(timeout, new Error(\"Loading component timed out after \" + timeout + \" milliseconds\"));\n                            }));\n                        }));\n                        var onRenderedPromise = initPromise.then((function() {\n                            return event.trigger(EVENT.RENDERED);\n                        }));\n                        return promise_ZalgoPromise.hash({\n                            initPromise: initPromise,\n                            buildUrlPromise: buildUrlPromise,\n                            onRenderPromise: onRenderPromise,\n                            getProxyContainerPromise: getProxyContainerPromise,\n                            openFramePromise: openFramePromise,\n                            openPrerenderFramePromise: openPrerenderFramePromise,\n                            renderContainerPromise: renderContainerPromise,\n                            openPromise: openPromise,\n                            openPrerenderPromise: openPrerenderPromise,\n                            setStatePromise: setStatePromise,\n                            prerenderPromise: prerenderPromise,\n                            loadUrlPromise: loadUrlPromise,\n                            buildWindowNamePromise: buildWindowNamePromise,\n                            setWindowNamePromise: setWindowNamePromise,\n                            watchForClosePromise: watchForClosePromise,\n                            onDisplayPromise: onDisplayPromise,\n                            openBridgePromise: openBridgePromise,\n                            runTimeoutPromise: runTimeoutPromise,\n                            onRenderedPromise: onRenderedPromise,\n                            delegatePromise: delegatePromise,\n                            watchForUnloadPromise: watchForUnloadPromise\n                        });\n                    })).catch((function(err) {\n                        return promise_ZalgoPromise.all([ onError(err), destroy(err) ]).then((function() {\n                            throw err;\n                        }), (function() {\n                            throw err;\n                        }));\n                    })).then(src_util_noop);\n                },\n                destroy: destroy,\n                setProps: setProps,\n                getHelpers: getHelpers,\n                getDelegateOverrides: function() {\n                    return promise_ZalgoPromise.try((function() {\n                        return {\n                            getProxyContainer: getProxyContainer,\n                            show: show,\n                            hide: hide,\n                            renderContainer: renderContainer,\n                            getProxyWindow: getProxyWindow,\n                            watchForUnload: watchForUnload,\n                            openFrame: openFrame,\n                            openPrerenderFrame: openPrerenderFrame,\n                            prerender: prerender,\n                            open: open,\n                            openPrerender: openPrerender,\n                            setProxyWin: setProxyWin\n                        };\n                    }));\n                }\n            };\n        }\n        var react = {\n            register: function(tag, propsDef, init, _ref) {\n                var React = _ref.React, ReactDOM = _ref.ReactDOM;\n                return function(_React$Component) {\n                    !function(subClass, superClass) {\n                        subClass.prototype = Object.create(superClass.prototype);\n                        subClass.prototype.constructor = subClass;\n                        subClass.__proto__ = superClass;\n                    }(_class, _React$Component);\n                    function _class() {\n                        return _React$Component.apply(this, arguments) || this;\n                    }\n                    var _proto = _class.prototype;\n                    _proto.render = function() {\n                        return React.createElement(\"div\", null);\n                    };\n                    _proto.componentDidMount = function() {\n                        var el = ReactDOM.findDOMNode(this);\n                        var parent = init(extend({}, this.props));\n                        parent.render(el, CONTEXT.IFRAME);\n                        this.setState({\n                            parent: parent\n                        });\n                    };\n                    _proto.componentDidUpdate = function() {\n                        this.state && this.state.parent && this.state.parent.updateProps(extend({}, this.props)).catch(src_util_noop);\n                    };\n                    return _class;\n                }(React.Component);\n            }\n        };\n        var vue = {\n            register: function(tag, propsDef, init, Vue) {\n                return Vue.component(tag, {\n                    render: function(createElement) {\n                        return createElement(\"div\");\n                    },\n                    inheritAttrs: !1,\n                    mounted: function() {\n                        var el = this.$el;\n                        this.parent = init(_extends({}, this.$attrs));\n                        this.parent.render(el, CONTEXT.IFRAME);\n                    },\n                    watch: {\n                        $attrs: {\n                            handler: function() {\n                                this.parent && this.$attrs && this.parent.updateProps(_extends({}, this.$attrs)).catch(src_util_noop);\n                            },\n                            deep: !0\n                        }\n                    }\n                });\n            }\n        };\n        var angular = {\n            register: function(tag, propsDef, init, ng) {\n                return ng.module(tag, []).directive(tag.replace(/-([a-z])/g, (function(g) {\n                    return g[1].toUpperCase();\n                })), (function() {\n                    var scope = {};\n                    for (var _i2 = 0, _Object$keys2 = Object.keys(propsDef); _i2 < _Object$keys2.length; _i2++) scope[_Object$keys2[_i2]] = \"=\";\n                    scope.props = \"=\";\n                    return {\n                        scope: scope,\n                        restrict: \"E\",\n                        controller: [ \"$scope\", \"$element\", function($scope, $element) {\n                            function safeApply() {\n                                if (\"$apply\" !== $scope.$root.$$phase && \"$digest\" !== $scope.$root.$$phase) try {\n                                    $scope.$apply();\n                                } catch (err) {}\n                            }\n                            var getProps = function() {\n                                return replaceObject($scope.props, (function(item) {\n                                    return \"function\" == typeof item ? function() {\n                                        var result = item.apply(this, arguments);\n                                        safeApply();\n                                        return result;\n                                    } : item;\n                                }));\n                            };\n                            var instance = init(getProps());\n                            instance.render($element[0], CONTEXT.IFRAME);\n                            $scope.$watch((function() {\n                                instance.updateProps(getProps()).catch(src_util_noop);\n                            }));\n                        } ]\n                    };\n                }));\n            }\n        };\n        var angular2 = {\n            register: function(tag, propsDef, init, _ref) {\n                var NgModule = _ref.NgModule, ElementRef = _ref.ElementRef, NgZone = _ref.NgZone;\n                var getProps = function(component) {\n                    return replaceObject(_extends({}, component.internalProps, component.props), (function(item) {\n                        return \"function\" == typeof item ? function() {\n                            var _arguments = arguments, _this = this;\n                            return component.zone.run((function() {\n                                return item.apply(_this, _arguments);\n                            }));\n                        } : item;\n                    }));\n                };\n                var ComponentInstance = (0, _ref.Component)({\n                    selector: tag,\n                    template: \"<div></div>\",\n                    inputs: [ \"props\" ]\n                }).Class({\n                    constructor: [ ElementRef, NgZone, function(elementRef, zone) {\n                        this._props = {};\n                        this.elementRef = elementRef;\n                        this.zone = zone;\n                    } ],\n                    ngOnInit: function() {\n                        var targetElement = this.elementRef.nativeElement;\n                        this.parent = init(getProps(this));\n                        this.parent.render(targetElement, CONTEXT.IFRAME);\n                    },\n                    ngDoCheck: function() {\n                        if (this.parent && !function(obj1, obj2) {\n                            var checked = {};\n                            for (var key in obj1) if (obj1.hasOwnProperty(key)) {\n                                checked[key] = !0;\n                                if (obj1[key] !== obj2[key]) return !1;\n                            }\n                            for (var _key in obj2) if (!checked[_key]) return !1;\n                            return !0;\n                        }(this._props, this.props)) {\n                            this._props = _extends({}, this.props);\n                            this.parent.updateProps(getProps(this));\n                        }\n                    }\n                });\n                return NgModule({\n                    declarations: [ ComponentInstance ],\n                    exports: [ ComponentInstance ]\n                }).Class({\n                    constructor: function() {}\n                });\n            }\n        };\n        function defaultContainerTemplate(_ref) {\n            var uid = _ref.uid, frame = _ref.frame, prerenderFrame = _ref.prerenderFrame, doc = _ref.doc, props = _ref.props, event = _ref.event, _ref$dimensions = _ref.dimensions, width = _ref$dimensions.width, height = _ref$dimensions.height;\n            if (frame && prerenderFrame) {\n                var div = doc.createElement(\"div\");\n                div.setAttribute(\"id\", uid);\n                var style = doc.createElement(\"style\");\n                props.cspNonce && style.setAttribute(\"nonce\", props.cspNonce);\n                style.appendChild(doc.createTextNode(\"\\n            #\" + uid + \" {\\n                display: inline-block;\\n                position: relative;\\n                width: \" + width + \";\\n                height: \" + height + \";\\n            }\\n\\n            #\" + uid + \" > iframe {\\n                display: inline-block;\\n                position: absolute;\\n                width: 100%;\\n                height: 100%;\\n                top: 0;\\n                left: 0;\\n                transition: opacity .2s ease-in-out;\\n            }\\n\\n            #\" + uid + \" > iframe.zoid-invisible {\\n                opacity: 0;\\n            }\\n\\n            #\" + uid + \" > iframe.zoid-visible {\\n                opacity: 1;\\n        }\\n        \"));\n                div.appendChild(frame);\n                div.appendChild(prerenderFrame);\n                div.appendChild(style);\n                prerenderFrame.classList.add(\"zoid-visible\");\n                frame.classList.add(\"zoid-invisible\");\n                event.on(EVENT.RENDERED, (function() {\n                    prerenderFrame.classList.remove(\"zoid-visible\");\n                    prerenderFrame.classList.add(\"zoid-invisible\");\n                    frame.classList.remove(\"zoid-invisible\");\n                    frame.classList.add(\"zoid-visible\");\n                    setTimeout((function() {\n                        destroyElement(prerenderFrame);\n                    }), 1);\n                }));\n                event.on(EVENT.RESIZE, (function(_ref2) {\n                    var newWidth = _ref2.width, newHeight = _ref2.height;\n                    \"number\" == typeof newWidth && (div.style.width = toCSS(newWidth));\n                    \"number\" == typeof newHeight && (div.style.height = toCSS(newHeight));\n                }));\n                return div;\n            }\n        }\n        function defaultPrerenderTemplate(_ref) {\n            var doc = _ref.doc, props = _ref.props;\n            var html = doc.createElement(\"html\");\n            var body = doc.createElement(\"body\");\n            var style = doc.createElement(\"style\");\n            var spinner = doc.createElement(\"div\");\n            spinner.classList.add(\"spinner\");\n            props.cspNonce && style.setAttribute(\"nonce\", props.cspNonce);\n            html.appendChild(body);\n            body.appendChild(spinner);\n            body.appendChild(style);\n            style.appendChild(doc.createTextNode(\"\\n            html, body {\\n                width: 100%;\\n                height: 100%;\\n            }\\n\\n            .spinner {\\n                position: fixed;\\n                max-height: 60vmin;\\n                max-width: 60vmin;\\n                height: 40px;\\n                width: 40px;\\n                top: 50%;\\n                left: 50%;\\n                box-sizing: border-box;\\n                border: 3px solid rgba(0, 0, 0, .2);\\n                border-top-color: rgba(33, 128, 192, 0.8);\\n                border-radius: 100%;\\n                animation: rotation .7s infinite linear;\\n            }\\n\\n            @keyframes rotation {\\n                from {\\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\\n                }\\n                to {\\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\\n                }\\n            }\\n        \"));\n            return html;\n        }\n        var props_defaultNoop = function() {\n            return src_util_noop;\n        };\n        var props_decorateOnce = function(_ref) {\n            return once(_ref.value);\n        };\n        var component_clean = cleanup();\n        function component_component(opts) {\n            var options = function(options) {\n                var tag = options.tag, url = options.url, domain = options.domain, bridgeUrl = options.bridgeUrl, _options$props = options.props, propsDef = void 0 === _options$props ? {} : _options$props, _options$dimensions = options.dimensions, dimensions = void 0 === _options$dimensions ? {} : _options$dimensions, _options$autoResize = options.autoResize, autoResize = void 0 === _options$autoResize ? {} : _options$autoResize, _options$allowedParen = options.allowedParentDomains, allowedParentDomains = void 0 === _options$allowedParen ? \"*\" : _options$allowedParen, _options$attributes = options.attributes, attributes = void 0 === _options$attributes ? {} : _options$attributes, _options$defaultConte = options.defaultContext, defaultContext = void 0 === _options$defaultConte ? CONTEXT.IFRAME : _options$defaultConte, _options$containerTem = options.containerTemplate, containerTemplate = void 0 === _options$containerTem ? defaultContainerTemplate : _options$containerTem, _options$prerenderTem = options.prerenderTemplate, prerenderTemplate = void 0 === _options$prerenderTem ? defaultPrerenderTemplate : _options$prerenderTem, validate = options.validate, _options$eligible = options.eligible, eligible = void 0 === _options$eligible ? function() {\n                    return {\n                        eligible: !0\n                    };\n                } : _options$eligible, _options$logger = options.logger, logger = void 0 === _options$logger ? {\n                    info: src_util_noop\n                } : _options$logger;\n                var name = tag.replace(/-/g, \"_\");\n                var _dimensions$width = dimensions.width, width = void 0 === _dimensions$width ? \"300px\" : _dimensions$width, _dimensions$height = dimensions.height, height = void 0 === _dimensions$height ? \"150px\" : _dimensions$height;\n                propsDef = _extends({}, {\n                    window: {\n                        type: \"object\",\n                        sendToChild: !1,\n                        required: !1,\n                        allowDelegate: !0,\n                        validate: function(_ref2) {\n                            var value = _ref2.value;\n                            if (!isWindow(value) && !window_ProxyWindow.isProxyWindow(value)) throw new Error(\"Expected Window or ProxyWindow\");\n                            if (isWindow(value)) {\n                                if (isWindowClosed(value)) throw new Error(\"Window is closed\");\n                                if (!isSameDomain(value)) throw new Error(\"Window is not same domain\");\n                            }\n                        },\n                        decorate: function(_ref3) {\n                            return setup_toProxyWindow(_ref3.value);\n                        }\n                    },\n                    timeout: {\n                        type: \"number\",\n                        required: !1,\n                        sendToChild: !1\n                    },\n                    close: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref4) {\n                            return _ref4.close;\n                        }\n                    },\n                    focus: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref5) {\n                            return _ref5.focus;\n                        }\n                    },\n                    resize: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref6) {\n                            return _ref6.resize;\n                        }\n                    },\n                    uid: {\n                        type: \"string\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref7) {\n                            return _ref7.uid;\n                        }\n                    },\n                    cspNonce: {\n                        type: \"string\",\n                        required: !1\n                    },\n                    getParent: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref8) {\n                            return _ref8.getParent;\n                        }\n                    },\n                    getParentDomain: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref9) {\n                            return _ref9.getParentDomain;\n                        }\n                    },\n                    show: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref10) {\n                            return _ref10.show;\n                        }\n                    },\n                    hide: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref11) {\n                            return _ref11.hide;\n                        }\n                    },\n                    onDisplay: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        allowDelegate: !0,\n                        default: props_defaultNoop,\n                        decorate: props_decorateOnce\n                    },\n                    onRendered: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        default: props_defaultNoop,\n                        decorate: props_decorateOnce\n                    },\n                    onRender: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        default: props_defaultNoop,\n                        decorate: props_decorateOnce\n                    },\n                    onClose: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        allowDelegate: !0,\n                        default: props_defaultNoop,\n                        decorate: props_decorateOnce\n                    },\n                    onDestroy: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        allowDelegate: !0,\n                        default: props_defaultNoop,\n                        decorate: props_decorateOnce\n                    },\n                    onResize: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        allowDelegate: !0,\n                        default: props_defaultNoop\n                    },\n                    onFocus: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        allowDelegate: !0,\n                        default: props_defaultNoop\n                    },\n                    onError: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        childDecorate: function(_ref12) {\n                            return _ref12.onError;\n                        }\n                    },\n                    onProps: {\n                        type: \"function\",\n                        required: !1,\n                        sendToChild: !1,\n                        default: props_defaultNoop,\n                        childDecorate: function(_ref13) {\n                            return _ref13.onProps;\n                        }\n                    }\n                }, propsDef);\n                if (!containerTemplate) throw new Error(\"Container template required\");\n                return {\n                    name: name,\n                    tag: tag,\n                    url: url,\n                    domain: domain,\n                    bridgeUrl: bridgeUrl,\n                    propsDef: propsDef,\n                    dimensions: {\n                        width: width,\n                        height: height\n                    },\n                    autoResize: autoResize,\n                    allowedParentDomains: allowedParentDomains,\n                    attributes: attributes,\n                    defaultContext: defaultContext,\n                    containerTemplate: containerTemplate,\n                    prerenderTemplate: prerenderTemplate,\n                    validate: validate,\n                    logger: logger,\n                    eligible: eligible\n                };\n            }(opts);\n            var name = options.name, tag = options.tag, defaultContext = options.defaultContext, propsDef = options.propsDef, eligible = options.eligible;\n            var global = lib_global_getGlobal();\n            var driverCache = {};\n            var instances = [];\n            var isChild = function() {\n                var payload = getChildPayload();\n                return Boolean(payload && payload.tag === tag && payload.childDomain === getDomain());\n            };\n            var registerChild = memoize((function() {\n                if (isChild()) {\n                    if (window.xprops) {\n                        delete global.components[tag];\n                        throw new Error(\"Can not register \" + name + \" as child - child already registered\");\n                    }\n                    var child = function(options) {\n                        var propsDef = options.propsDef, autoResize = options.autoResize, allowedParentDomains = options.allowedParentDomains;\n                        var onPropHandlers = [];\n                        var childPayload = getChildPayload();\n                        var props;\n                        if (!childPayload) throw new Error(\"No child payload found\");\n                        if (\"9_0_58\" !== childPayload.version) throw new Error(\"Parent window has zoid version \" + childPayload.version + \", child window has version 9_0_58\");\n                        var uid = childPayload.uid, parentDomain = childPayload.parentDomain, exports = childPayload.exports, context = childPayload.context, propsRef = childPayload.props;\n                        var parentComponentWindow = function(ref) {\n                            var type = ref.type;\n                            if (\"opener\" === type) return assertExists(\"opener\", getOpener(window));\n                            if (\"parent\" === type && \"number\" == typeof ref.distance) return assertExists(\"parent\", function(win, n) {\n                                void 0 === n && (n = 1);\n                                return function(win, n) {\n                                    void 0 === n && (n = 1);\n                                    var parent = win;\n                                    for (var i = 0; i < n; i++) {\n                                        if (!parent) return;\n                                        parent = utils_getParent(parent);\n                                    }\n                                    return parent;\n                                }(win, getDistanceFromTop(win) - n);\n                            }(window, ref.distance));\n                            if (\"global\" === type && ref.uid && \"string\" == typeof ref.uid) {\n                                var uid = ref.uid;\n                                var ancestor = getAncestor(window);\n                                if (!ancestor) throw new Error(\"Can not find ancestor window\");\n                                for (var _i2 = 0, _getAllFramesInWindow2 = getAllFramesInWindow(ancestor); _i2 < _getAllFramesInWindow2.length; _i2++) {\n                                    var frame = _getAllFramesInWindow2[_i2];\n                                    if (isSameDomain(frame)) {\n                                        var global = lib_global_getGlobal(frame);\n                                        if (global && global.windows && global.windows[uid]) return global.windows[uid];\n                                    }\n                                }\n                            }\n                            throw new Error(\"Unable to find \" + type + \" parent component window\");\n                        }(childPayload.parent);\n                        var parent = setup_deserializeMessage(parentComponentWindow, parentDomain, exports);\n                        var show = parent.show, hide = parent.hide, close = parent.close;\n                        var getParent = function() {\n                            return parentComponentWindow;\n                        };\n                        var getParentDomain = function() {\n                            return parentDomain;\n                        };\n                        var onProps = function(handler) {\n                            onPropHandlers.push(handler);\n                        };\n                        var onError = function(err) {\n                            return promise_ZalgoPromise.try((function() {\n                                if (parent && parent.onError) return parent.onError(err);\n                                throw err;\n                            }));\n                        };\n                        var resize = function(_ref2) {\n                            return parent.resize.fireAndForget({\n                                width: _ref2.width,\n                                height: _ref2.height\n                            });\n                        };\n                        var setProps = function(newProps, origin, isUpdate) {\n                            void 0 === isUpdate && (isUpdate = !1);\n                            var normalizedProps = function(parentComponentWindow, propsDef, props, origin, helpers, isUpdate) {\n                                void 0 === isUpdate && (isUpdate = !1);\n                                var result = {};\n                                for (var _i2 = 0, _Object$keys2 = Object.keys(props); _i2 < _Object$keys2.length; _i2++) {\n                                    var key = _Object$keys2[_i2];\n                                    var prop = propsDef[key];\n                                    if (!prop || !prop.sameDomain || origin === getDomain(window) && isSameDomain(parentComponentWindow)) {\n                                        var value = normalizeChildProp(propsDef, 0, key, props[key], helpers);\n                                        result[key] = value;\n                                        prop && prop.alias && !result[prop.alias] && (result[prop.alias] = value);\n                                    }\n                                }\n                                if (!isUpdate) for (var _i4 = 0, _Object$keys4 = Object.keys(propsDef); _i4 < _Object$keys4.length; _i4++) {\n                                    var _key = _Object$keys4[_i4];\n                                    props.hasOwnProperty(_key) || (result[_key] = normalizeChildProp(propsDef, 0, _key, void 0, helpers));\n                                }\n                                return result;\n                            }(parentComponentWindow, propsDef, newProps, origin, {\n                                show: show,\n                                hide: hide,\n                                close: close,\n                                focus: child_focus,\n                                onError: onError,\n                                resize: resize,\n                                onProps: onProps,\n                                getParent: getParent,\n                                getParentDomain: getParentDomain,\n                                uid: uid\n                            }, isUpdate);\n                            props ? extend(props, normalizedProps) : props = normalizedProps;\n                            for (var _i4 = 0; _i4 < onPropHandlers.length; _i4++) (0, onPropHandlers[_i4])(props);\n                        };\n                        var updateProps = function(newProps) {\n                            return promise_ZalgoPromise.try((function() {\n                                return setProps(newProps, parentDomain, !0);\n                            }));\n                        };\n                        return {\n                            init: function() {\n                                return promise_ZalgoPromise.try((function() {\n                                    !function(allowedParentDomains, domain) {\n                                        if (!matchDomain(allowedParentDomains, domain)) throw new Error(\"Can not be rendered by domain: \" + domain);\n                                    }(allowedParentDomains, parentDomain);\n                                    markWindowKnown(parentComponentWindow);\n                                    !function() {\n                                        window.addEventListener(\"beforeunload\", (function() {\n                                            parent.checkClose.fireAndForget();\n                                        }));\n                                        window.addEventListener(\"unload\", (function() {\n                                            parent.checkClose.fireAndForget();\n                                        }));\n                                        onCloseWindow(parentComponentWindow, (function() {\n                                            child_destroy();\n                                        }));\n                                    }();\n                                    return parent.init({\n                                        updateProps: updateProps,\n                                        close: child_destroy\n                                    });\n                                })).then((function() {\n                                    return (_autoResize$width = autoResize.width, width = void 0 !== _autoResize$width && _autoResize$width, \n                                    _autoResize$height = autoResize.height, height = void 0 !== _autoResize$height && _autoResize$height, \n                                    _autoResize$element = autoResize.element, elementReady(void 0 === _autoResize$element ? \"body\" : _autoResize$element).catch(src_util_noop).then((function(element) {\n                                        return {\n                                            width: width,\n                                            height: height,\n                                            element: element\n                                        };\n                                    }))).then((function(_ref3) {\n                                        var width = _ref3.width, height = _ref3.height, element = _ref3.element;\n                                        element && (width || height) && context !== CONTEXT.POPUP && onResize(element, (function(_ref4) {\n                                            resize({\n                                                width: width ? _ref4.width : void 0,\n                                                height: height ? _ref4.height : void 0\n                                            });\n                                        }), {\n                                            width: width,\n                                            height: height\n                                        });\n                                    }));\n                                    var _autoResize$width, width, _autoResize$height, height, _autoResize$element;\n                                })).catch((function(err) {\n                                    onError(err);\n                                }));\n                            },\n                            getProps: function() {\n                                if (props) return props;\n                                setProps(function(parentComponentWindow, domain, _ref) {\n                                    var type = _ref.type, uid = _ref.uid;\n                                    var props;\n                                    if (\"raw\" === type) props = _ref.value; else if (\"uid\" === type) {\n                                        if (!isSameDomain(parentComponentWindow)) throw new Error(\"Parent component window is on a different domain - expected \" + getDomain() + \" - can not retrieve props\");\n                                        var global = lib_global_getGlobal(parentComponentWindow);\n                                        props = assertExists(\"props\", global && global.props[uid]);\n                                    }\n                                    if (!props) throw new Error(\"Could not find props\");\n                                    return setup_deserializeMessage(parentComponentWindow, domain, props);\n                                }(parentComponentWindow, parentDomain, propsRef), parentDomain);\n                                return props;\n                            }\n                        };\n                    }(options);\n                    child.init();\n                    return child;\n                }\n            }));\n            var init = function init(props) {\n                var instance;\n                var _eligible = eligible({\n                    props: props = props || {}\n                }), eligibility = _eligible.eligible, reason = _eligible.reason;\n                var onDestroy = props.onDestroy;\n                props.onDestroy = function() {\n                    instance && eligibility && instances.splice(instances.indexOf(instance), 1);\n                    if (onDestroy) return onDestroy.apply(void 0, arguments);\n                };\n                var parent = parentComponent(options);\n                parent.init();\n                eligibility ? parent.setProps(props) : props.onDestroy && props.onDestroy();\n                component_clean.register((function() {\n                    parent.destroy(new Error(\"zoid destroyed all components\"));\n                }));\n                var _render = function(target, container, context) {\n                    return promise_ZalgoPromise.try((function() {\n                        if (!eligibility) return parent.destroy().then((function() {\n                            throw new Error(reason || name + \" component is not eligible\");\n                        }));\n                        if (!isWindow(target)) throw new Error(\"Must pass window to renderTo\");\n                        return function(props, context) {\n                            return promise_ZalgoPromise.try((function() {\n                                if (props.window) return setup_toProxyWindow(props.window).getType();\n                                if (context) {\n                                    if (context !== CONTEXT.IFRAME && context !== CONTEXT.POPUP) throw new Error(\"Unrecognized context: \" + context);\n                                    return context;\n                                }\n                                return defaultContext;\n                            }));\n                        }(props, context);\n                    })).then((function(finalContext) {\n                        container = function(context, container) {\n                            if (container) {\n                                if (\"string\" != typeof container && !isElement(container)) throw new TypeError(\"Expected string or element selector to be passed\");\n                                return container;\n                            }\n                            if (context === CONTEXT.POPUP) return \"body\";\n                            throw new Error(\"Expected element to be passed to render iframe\");\n                        }(finalContext, container);\n                        return parent.render(target, container, finalContext);\n                    })).catch((function(err) {\n                        return parent.destroy(err).then((function() {\n                            throw err;\n                        }));\n                    }));\n                };\n                instance = _extends({}, parent.getHelpers(), {\n                    isEligible: function() {\n                        return eligibility;\n                    },\n                    clone: function(_temp) {\n                        var _ref3$decorate = (void 0 === _temp ? {} : _temp).decorate;\n                        return init((void 0 === _ref3$decorate ? identity : _ref3$decorate)(props));\n                    },\n                    render: function(container, context) {\n                        return _render(window, container, context);\n                    },\n                    renderTo: function(target, container, context) {\n                        return _render(target, container, context);\n                    }\n                });\n                eligibility && instances.push(instance);\n                return instance;\n            };\n            registerChild();\n            !function() {\n                on_on(\"zoid_allow_delegate_\" + name, (function() {\n                    return !0;\n                }));\n                on_on(\"zoid_delegate_\" + name, (function(_ref) {\n                    return {\n                        parent: parentComponent(options, _ref.data.overrides, _ref.source)\n                    };\n                }));\n            }();\n            global.components = global.components || {};\n            if (global.components[tag]) throw new Error(\"Can not register multiple components with the same tag: \" + tag);\n            global.components[tag] = !0;\n            return {\n                init: init,\n                instances: instances,\n                driver: function(driverName, dep) {\n                    var drivers = {\n                        react: react,\n                        angular: angular,\n                        vue: vue,\n                        angular2: angular2\n                    };\n                    if (!drivers[driverName]) throw new Error(\"Could not find driver for framework: \" + driverName);\n                    driverCache[driverName] || (driverCache[driverName] = drivers[driverName].register(tag, propsDef, init, dep));\n                    return driverCache[driverName];\n                },\n                isChild: isChild,\n                canRenderTo: function(win) {\n                    return send_send(win, \"zoid_allow_delegate_\" + name).then((function(_ref2) {\n                        return _ref2.data;\n                    })).catch((function() {\n                        return !1;\n                    }));\n                },\n                registerChild: registerChild\n            };\n        }\n        function create(options) {\n            !function() {\n                if (!global_getGlobal().initialized) {\n                    global_getGlobal().initialized = !0;\n                    on = (_ref3 = {\n                        on: on_on,\n                        send: send_send\n                    }).on, send = _ref3.send, (global = global_getGlobal()).receiveMessage = global.receiveMessage || function(message) {\n                        return receive_receiveMessage(message, {\n                            on: on,\n                            send: send\n                        });\n                    };\n                    !function(_ref5) {\n                        var on = _ref5.on, send = _ref5.send;\n                        globalStore().getOrSet(\"postMessageListener\", (function() {\n                            return addEventListener(window, \"message\", (function(event) {\n                                !function(event, _ref4) {\n                                    var on = _ref4.on, send = _ref4.send;\n                                    promise_ZalgoPromise.try((function() {\n                                        var source = event.source || event.sourceElement;\n                                        var origin = event.origin || event.originalEvent && event.originalEvent.origin;\n                                        var data = event.data;\n                                        \"null\" === origin && (origin = \"file://\");\n                                        if (source) {\n                                            if (!origin) throw new Error(\"Post message did not have origin domain\");\n                                            receive_receiveMessage({\n                                                source: source,\n                                                origin: origin,\n                                                data: data\n                                            }, {\n                                                on: on,\n                                                send: send\n                                            });\n                                        }\n                                    }));\n                                }(event, {\n                                    on: on,\n                                    send: send\n                                });\n                            }));\n                        }));\n                    }({\n                        on: on_on,\n                        send: send_send\n                    });\n                    setupBridge({\n                        on: on_on,\n                        send: send_send,\n                        receiveMessage: receive_receiveMessage\n                    });\n                    !function(_ref8) {\n                        var on = _ref8.on, send = _ref8.send;\n                        globalStore(\"builtinListeners\").getOrSet(\"helloListener\", (function() {\n                            var listener = on(\"postrobot_hello\", {\n                                domain: \"*\"\n                            }, (function(_ref3) {\n                                resolveHelloPromise(_ref3.source, {\n                                    domain: _ref3.origin\n                                });\n                                return {\n                                    instanceID: getInstanceID()\n                                };\n                            }));\n                            var parent = getAncestor();\n                            parent && sayHello(parent, {\n                                send: send\n                            }).catch((function(err) {}));\n                            return listener;\n                        }));\n                    }({\n                        on: on_on,\n                        send: send_send\n                    });\n                }\n                var _ref3, on, send, global;\n            }();\n            var comp = component_component(options);\n            var init = function(props) {\n                return comp.init(props);\n            };\n            init.driver = function(name, dep) {\n                return comp.driver(name, dep);\n            };\n            init.isChild = function() {\n                return comp.isChild();\n            };\n            init.canRenderTo = function(win) {\n                return comp.canRenderTo(win);\n            };\n            init.instances = comp.instances;\n            var child = comp.registerChild();\n            child && (window.xprops = init.xprops = child.getProps());\n            return init;\n        }\n        function destroyAll() {\n            src_bridge && src_bridge.destroyBridges();\n            var destroyPromise = component_clean.all();\n            component_clean = cleanup();\n            return destroyPromise;\n        }\n        var destroyComponents = destroyAll;\n        function component_destroy() {\n            destroyAll();\n            delete window.__zoid_9_0_58__;\n            !function() {\n                !function() {\n                    var responseListeners = globalStore(\"responseListeners\");\n                    for (var _i2 = 0, _responseListeners$ke2 = responseListeners.keys(); _i2 < _responseListeners$ke2.length; _i2++) {\n                        var hash = _responseListeners$ke2[_i2];\n                        var listener = responseListeners.get(hash);\n                        listener && (listener.cancelled = !0);\n                        responseListeners.del(hash);\n                    }\n                }();\n                (listener = globalStore().get(\"postMessageListener\")) && listener.cancel();\n                var listener;\n                delete window.__post_robot_10_0_39__;\n            }();\n        }\n    } ]);\n}));"]},"metadata":{},"sourceType":"script"}